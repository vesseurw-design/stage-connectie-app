/*! For license information please see main.ca64dd65.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},87:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(642),o=n(980),i=n(292),s=n(887),a=n(425),l=n(100),c=n(681),u=n(337);t.default=class{constructor(e,t,n){var r,i,u;this.supabaseUrl=e,this.supabaseKey=t;const d=(0,c.validateSupabaseUrl)(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h="sb-".concat(d.hostname.split(".")[0],"-auth-token"),p={db:a.DEFAULT_DB_OPTIONS,realtime:a.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},a.DEFAULT_AUTH_OPTIONS),{storageKey:h}),global:a.DEFAULT_GLOBAL_OPTIONS},f=(0,c.applySettingDefaults)(null!==n&&void 0!==n?n:{},p);this.storageKey=null!==(r=f.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(i=f.global.headers)&&void 0!==i?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(u=f.auth)&&void 0!==u?u:{},this.headers,f.global.fetch),this.fetch=(0,l.fetchWithAuth)(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&this.accessToken().then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new o.PostgrestClient(new URL("rest/v1",d).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new s.StorageClient(this.storageUrl.href,this.headers,this.fetch,null===n||void 0===n?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new r.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{head:!1,get:!1,count:void 0};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:o,detectSessionInUrl:i,storage:s,userStorage:a,storageKey:l,flowType:c,lock:d,debug:h,throwOnError:p}=e;const f={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new u.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),t),storageKey:l,autoRefreshToken:r,persistSession:o,detectSessionInUrl:i,storage:s,userStorage:a,flowType:c,lock:d,debug:h,throwOnError:p,fetch:n,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new i.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=n,this.realtime.setAuth(n))}}},100:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;t.resolveFetch=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)};t.resolveHeadersConstructor=()=>Headers;t.fetchWithAuth=(e,n,r)=>{const o=(0,t.resolveFetch)(r),i=(0,t.resolveHeadersConstructor)();return async(t,r)=>{var s;const a=null!==(s=await n())&&void 0!==s?s:e;let l=new i(null===r||void 0===r?void 0:r.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(a)),o(t,Object.assign(Object.assign({},r),{headers:l}))}}},153:(e,t,n)=>{var r=n(43),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:a.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var _=b.prototype=new y;_.constructor=b,m(_,v.prototype),_.isPureReactComponent=!0;var w=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,r){var o,i={},s=null,a=null;if(null!=t)for(o in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)E.call(t,o)&&!T.hasOwnProperty(o)&&(i[o]=t[o]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===i[o]&&(i[o]=l[o]);return{$$typeof:n,type:e,key:s,ref:a,props:i,_owner:S.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function k(e,t,o,i,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===i?"."+A(l,0):i,w(s)?(o="",null!=e&&(o=e.replace(C,"$&/")+"/"),k(s,t,o,"",function(e){return e})):null!=s&&(I(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,o+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+e)),t.push(s)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+A(a=e[c],c);l+=k(a,t,o,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=k(a=a.value,t,o,u=i+A(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function x(e,t,n){if(null==e)return e;var r=[],o=0;return k(e,r,"","",function(e){return t.call(n,e,o++)}),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},j={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:x,forEach:function(e,t,n){x(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return x(e,function(){t++}),t},toArray:function(e){return x(e,function(e){return e})||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=s,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),i=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!T.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:n,type:e.type,key:i,ref:s,props:o,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=O,t.createFactory=function(e){var t=O.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},210:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(326),o=r.__importDefault(n(829)),i=r.__importDefault(n(736));class s{constructor(e){let{headers:t={},schema:n,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){if(!e||"string"!==typeof e||""===e.trim())throw new Error("Invalid relation name: relation must be a non-empty string.");const t=new URL("".concat(this.url,"/").concat(e));return new o.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new s(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:n=!1,get:r=!1,count:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var s;let a;const l=new URL("".concat(this.url,"/rpc/").concat(e));let c;n||r?(a=n?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]}).forEach(e=>{let[t,n]=e;l.searchParams.append(t,n)})):(a="POST",c=t);const u=new Headers(this.headers);return o&&u.set("Prefer","count=".concat(o)),new i.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}}t.default=s},219:(e,t,n)=>{n.r(t),n.d(t,{AuthAdminApi:()=>Ve,AuthApiError:()=>p,AuthClient:()=>ze,AuthError:()=>d,AuthImplicitGrantRedirectError:()=>w,AuthInvalidCredentialsError:()=>_,AuthInvalidJwtError:()=>A,AuthInvalidTokenResponseError:()=>b,AuthPKCEGrantCodeExchangeError:()=>S,AuthRetryableFetchError:()=>T,AuthSessionMissingError:()=>v,AuthUnknownError:()=>m,AuthWeakPasswordError:()=>I,CustomAuthError:()=>g,GoTrueAdminApi:()=>pe,GoTrueClient:()=>He,NavigatorLockAcquireTimeoutError:()=>ve,SIGN_OUT_SCOPES:()=>he,isAuthApiError:()=>f,isAuthError:()=>h,isAuthImplicitGrantRedirectError:()=>E,isAuthRetryableFetchError:()=>O,isAuthSessionMissingError:()=>y,isAuthWeakPasswordError:()=>C,lockInternals:()=>me,navigatorLock:()=>be,processLock:()=>we});var r=n(326);const o="2.86.2",i=3e4,s=9e4,a={"X-Client-Info":"gotrue-js/".concat(o)},l="X-Supabase-Api-Version",c={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},u=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class d extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function h(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class p extends d{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function f(e){return h(e)&&"AuthApiError"===e.name}class m extends d{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class g extends d{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class v extends g{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function y(e){return h(e)&&"AuthSessionMissingError"===e.name}class b extends g{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _ extends g{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class w extends g{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function E(e){return h(e)&&"AuthImplicitGrantRedirectError"===e.name}class S extends g{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class T extends g{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function O(e){return h(e)&&"AuthRetryableFetchError"===e.name}class I extends g{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}function C(e){return h(e)&&"AuthWeakPasswordError"===e.name}class A extends g{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),x=" \t\n\r=".split(""),N=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<x.length;t+=1)e[x[t].charCodeAt(0)]=-2;for(let t=0;t<k.length;t+=1)e[k[t].charCodeAt(0)]=t;return e})();function R(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(k[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(k[e]),t.queuedBits-=6}}function P(e,t,n){const r=N[e];if(!(r>-1)){if(-2===r)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function j(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},i=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let s=0;s<e.length;s+=1)P(e.charCodeAt(s),o,i);return t.join("")}function D(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function U(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}D(r,t)}}function M(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let o=0;o<e.length;o+=1)P(e.charCodeAt(o),n,r);return new Uint8Array(t)}function L(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>R(e,n,r)),R(null,n,r),t.join("")}const F=()=>"undefined"!==typeof window&&"undefined"!==typeof document,q={tested:!1,writable:!1},B=()=>{if(!F())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(q.tested)return q.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),q.tested=!0,q.writable=!0}catch(t){q.tested=!0,q.writable=!1}return q.writable};const G=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},H=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},V=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},z=async(e,t)=>{await e.removeItem(t)};class J{constructor(){this.promise=new J.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function W(e){const t=e.split(".");if(3!==t.length)throw new A("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!u.test(t[n]))throw new A("JWT not in base64url format");return{header:JSON.parse(j(t[0])),payload:JSON.parse(j(t[1])),signature:M(t[2]),raw:{header:t[0],payload:t[1]}}}function K(e){return("0"+e.toString(16)).substr(-2)}async function Y(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,K).join("")}();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await H(e,"".concat(t,"-code-verifier"),o);const i=await Y(r);return[i,r===i?"plain":"s256"]}J.promiseConstructor=Promise;const Q=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const X=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Z(e){if(!X.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ee(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function te(e){return JSON.parse(JSON.stringify(e))}const ne=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),re=[502,503,504];async function oe(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new T(ne(e),0);if(re.includes(e.status))throw new T(ne(e),e.status);let r,o;try{r=await e.json()}catch(s){throw new m(ne(s),s)}const i=function(e){const t=e.headers.get(l);if(!t)return null;if(!t.match(Q))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(s){return null}}(e);if(i&&i.getTime()>=c.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?o=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(o=r.error_code),o){if("weak_password"===o)throw new I(ne(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===o)throw new v}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new I(ne(r),e.status,r.weak_password.reasons);throw new p(ne(r),e.status||500,o)}async function ie(e,t,n,r){var o;const i=Object.assign({},null===r||void 0===r?void 0:r.headers);i[l]||(i[l]=c.name),(null===r||void 0===r?void 0:r.jwt)&&(i.Authorization="Bearer ".concat(r.jwt));const s=null!==(o=null===r||void 0===r?void 0:r.query)&&void 0!==o?o:{};(null===r||void 0===r?void 0:r.redirectTo)&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",u=await async function(e,t,n,r,o,i){const s=((e,t,n,r)=>{const o={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))})(t,r,o,i);let a;try{a=await e(n,Object.assign({},s))}catch(l){throw console.error(l),new T(ne(l),0)}a.ok||await oe(a);if(null===r||void 0===r?void 0:r.noResolveJson)return a;try{return await a.json()}catch(l){await oe(l)}}(e,t,n+a,{headers:i,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(u):{data:Object.assign({},u),error:null}}function se(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ae(e){const t=se(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function le(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ce(e){return{data:e,error:null}}function ue(e){const{action_link:t,email_otp:n,hashed_token:o,redirect_to:i,verification_type:s}=e,a=(0,r.__rest)(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:o,redirect_to:i,verification_type:s},user:Object.assign({},a)},error:null}}function de(e){return e}const he=["global","local","others"];class pe{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=G(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he[0];if(he.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(he.join(", ")));try{return await ie(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(h(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await ie(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:le})}catch(n){if(h(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=(0,r.__rest)(e,["options"]),o=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(o.new_email=null===n||void 0===n?void 0:n.newEmail,delete o.newEmail),await ie(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:o,headers:this.headers,xform:ue,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(h(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ie(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:le})}catch(t){if(h(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,o,i,s,a;try{const l={nextPage:null,lastPage:0,total:0},c=await ie(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(o=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==o?o:""},xform:de});if(c.error)throw c.error;const u=await c.json(),d=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,h=null!==(a=null===(s=c.headers.get("link"))||void 0===s?void 0:s.split(","))&&void 0!==a?a:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(h(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Z(e);try{return await ie(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:le})}catch(t){if(h(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Z(e);try{return await ie(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:le})}catch(n){if(h(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Z(e);try{return await ie(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:le})}catch(n){if(h(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Z(e.userId);try{const{data:t,error:n}=await ie(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(h(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Z(e.userId),Z(e.id);try{return{data:await ie(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(h(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,r,o,i,s,a;try{const l={nextPage:null,lastPage:0,total:0},c=await ie(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(o=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==o?o:""},xform:de});if(c.error)throw c.error;const u=await c.json(),d=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,h=null!==(a=null===(s=c.headers.get("link"))||void 0===s?void 0:s.split(","))&&void 0!==a?a:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(h(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await ie(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients"),{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(h(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await ie(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(h(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await ie(this.fetch,"PUT","".concat(this.url,"/admin/oauth/clients/").concat(e),{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(n){if(h(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await ie(this.fetch,"DELETE","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(h(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await ie(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients/").concat(e,"/regenerate_secret"),{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(h(t))return{data:null,error:t};throw t}}}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const me={debug:!!(globalThis&&B()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class ge extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ve extends ge{}class ye extends ge{}async function be(e,t,n){me.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),me.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw me.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ve('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(me.debug)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}me.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{me.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}const _e={};async function we(e,t,n){var r;const o=null!==(r=_e[e])&&void 0!==r?r:Promise.resolve(),i=Promise.race([o.catch(()=>null),t>=0?new Promise((n,r)=>{setTimeout(()=>{r(new ye('Acquring process lock with name "'.concat(e,'" timed out')))},t)}):null].filter(e=>e)).catch(e=>{if(e&&e.isAcquireTimeout)throw e;return null}).then(async()=>await n());return _e[e]=i.catch(async e=>{if(e&&e.isAcquireTimeout)return await o,null;throw e}),await i}function Ee(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error('@supabase/auth-js: Address "'.concat(e,'" is invalid.'));return e.toLowerCase()}function Se(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class Te extends Error{constructor(e){let{message:t,code:n,cause:r,name:o}=e;var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(i=null!==o&&void 0!==o?o:r instanceof Error?r.name:void 0)&&void 0!==i?i:"Unknown Error",this.code=n}}class Oe extends Te{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Ie(e){let{error:t,options:n}=e;var r,o,i;const{publicKey:s}=n;if(!s)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(n.signal instanceof AbortSignal)return new Te({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("ConstraintError"===t.name){if(!0===(null===(r=s.authenticatorSelection)||void 0===r?void 0:r.requireResidentKey))return new Te({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if("conditional"===n.mediation&&"required"===(null===(o=s.authenticatorSelection)||void 0===o?void 0:o.userVerification))return new Te({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if("required"===(null===(i=s.authenticatorSelection)||void 0===i?void 0:i.userVerification))return new Te({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if("InvalidStateError"===t.name)return new Te({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if("NotAllowedError"===t.name)return new Te({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("NotSupportedError"===t.name){return 0===s.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new Te({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Te({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t})}if("SecurityError"===t.name){const e=window.location.hostname;if(!Pe(e))return new Te({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:t});if(s.rp.id!==e)return new Te({message:'The RP ID "'.concat(s.rp.id,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:t})}else if("TypeError"===t.name){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Te({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if("UnknownError"===t.name)return new Te({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Te({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Ce(e){let{error:t,options:n}=e;const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(n.signal instanceof AbortSignal)return new Te({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if("NotAllowedError"===t.name)return new Te({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("SecurityError"===t.name){const e=window.location.hostname;if(!Pe(e))return new Te({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:t});if(r.rpId!==e)return new Te({message:'The RP ID "'.concat(r.rpId,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:t})}else if("UnknownError"===t.name)return new Te({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Te({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}const Ae=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function ke(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!==typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"===typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:o}=e,i=(0,r.__rest)(e,["challenge","user","excludeCredentials"]),s=M(t).buffer,a=Object.assign(Object.assign({},n),{id:M(n.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:s,user:a});if(o&&o.length>0){l.excludeCredentials=new Array(o.length);for(let e=0;e<o.length;e++){const t=o[e];l.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:M(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return l}function xe(e){if(!e)throw new Error("Credential request options are required");if("undefined"!==typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"===typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,o=(0,r.__rest)(e,["challenge","allowCredentials"]),i=M(t).buffer,s=Object.assign(Object.assign({},o),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];s.allowCredentials[e]=Object.assign(Object.assign({},t),{id:M(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return s}function Ne(e){var t;if("toJSON"in e&&"function"===typeof e.toJSON)return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:L(new Uint8Array(e.response.attestationObject)),clientDataJSON:L(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function Re(e){var t;if("toJSON"in e&&"function"===typeof e.toJSON)return e.toJSON();const n=e,r=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:L(new Uint8Array(o.authenticatorData)),clientDataJSON:L(new Uint8Array(o.clientDataJSON)),signature:L(new Uint8Array(o.signature)),userHandle:o.userHandle?L(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function Pe(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function je(){var e,t;return!!(F()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"===typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"===typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const De={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Ue={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Me(){const e=e=>null!==e&&"object"===typeof e&&!Array.isArray(e),t=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),n={};for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];for(const s of o)if(s)for(const r in s){const o=s[r];if(void 0!==o)if(Array.isArray(o))n[r]=o;else if(t(o))n[r]=o;else if(e(o)){const t=n[r];e(t)?n[r]=Me(t,o):n[r]=Me(o)}else n[r]=o}return n}class Le{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge(e,t){let{factorId:n,webauthn:r,friendlyName:o,signal:i}=e;try{const{data:e,error:s}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!e)return{data:null,error:s};const a=null!==i&&void 0!==i?i:Ae.createNewAbortSignal();if("create"===e.webauthn.type){const{user:t}=e.webauthn.credential_options.publicKey;t.name||(t.name="".concat(t.id,":").concat(o)),t.displayName||(t.displayName=t.name)}switch(e.webauthn.type){case"create":{const r=function(e,t){return Me(De,e,t||{})}(e.webauthn.credential_options.publicKey,null===t||void 0===t?void 0:t.create),{data:o,error:i}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Oe("Browser returned unexpected credential type",t)}:{data:null,error:new Oe("Empty credential response",t)}}catch(t){return{data:null,error:Ie({error:t,options:e})}}}({publicKey:r,signal:a});return o?{data:{factorId:n,challengeId:e.id,webauthn:{type:e.webauthn.type,credential_response:o}},error:null}:{data:null,error:i}}case"request":{const r=function(e,t){return Me(Ue,e,t||{})}(e.webauthn.credential_options.publicKey,null===t||void 0===t?void 0:t.request),{data:o,error:i}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Oe("Browser returned unexpected credential type",t)}:{data:null,error:new Oe("Empty credential response",t)}}catch(t){return{data:null,error:Ce({error:t,options:e})}}}(Object.assign(Object.assign({},e.webauthn.credential_options),{publicKey:r,signal:a}));return o?{data:{factorId:n,challengeId:e.id,webauthn:{type:e.webauthn.type,credential_response:o}},error:null}:{data:null,error:i}}}}catch(s){return h(s)?{data:null,error:s}:{data:null,error:new m("Unexpected error in challenge",s)}}}async _verify(e){let{challengeId:t,factorId:n,webauthn:r}=e;return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate(e,t){let{factorId:n,webauthn:{rpId:r=("undefined"!==typeof window?window.location.hostname:void 0),rpOrigins:o=("undefined"!==typeof window?[window.location.origin]:void 0),signal:i}={}}=e;if(!r)return{data:null,error:new d("rpId is required for WebAuthn authentication")};try{if(!je())return{data:null,error:new m("Browser does not support WebAuthn",null)};const{data:e,error:s}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:o},signal:i},{request:t});if(!e)return{data:null,error:s};const{webauthn:a}=e;return this._verify({factorId:n,challengeId:e.challengeId,webauthn:{type:a.type,rpId:r,rpOrigins:o,credential_response:a.credential_response}})}catch(s){return h(s)?{data:null,error:s}:{data:null,error:new m("Unexpected error in authenticate",s)}}}async _register(e,t){let{friendlyName:n,webauthn:{rpId:r=("undefined"!==typeof window?window.location.hostname:void 0),rpOrigins:o=("undefined"!==typeof window?[window.location.origin]:void 0),signal:i}={}}=e;if(!r)return{data:null,error:new d("rpId is required for WebAuthn registration")};try{if(!je())return{data:null,error:new m("Browser does not support WebAuthn",null)};const{data:e,error:s}=await this._enroll({friendlyName:n});if(!e)return await this.client.mfa.listFactors().then(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.all.find(e=>"webauthn"===e.factor_type&&e.friendly_name===n&&"unverified"!==e.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null===e||void 0===e?void 0:e.id}):void 0),{data:null,error:s};const{data:a,error:l}=await this._challenge({factorId:e.id,friendlyName:e.friendly_name,webauthn:{rpId:r,rpOrigins:o},signal:i},{create:t});return a?this._verify({factorId:e.id,challengeId:a.challengeId,webauthn:{rpId:r,rpOrigins:o,type:a.webauthn.type,credential_response:a.webauthn.credential_response}}):{data:null,error:l}}catch(s){return h(s)?{data:null,error:s}:{data:null,error:new m("Unexpected error in register",s)}}}}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Fe={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:a,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function qe(e,t,n){return await n()}const Be={};class Ge{get jwks(){var e,t;return null!==(t=null===(e=Be[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Be[this.storageKey]=Object.assign(Object.assign({},Be[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Be[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Be[this.storageKey]=Object.assign(Object.assign({},Be[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},Fe),e);if(this.storageKey=o.storageKey,this.instanceID=null!==(t=Ge.nextInstanceID[this.storageKey])&&void 0!==t?t:0,Ge.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,"function"===typeof o.debug&&(this.logger=o.debug),this.instanceID>0&&F()){const e="".concat(this._logPrefix()," Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");console.warn(e),this.logDebugMessages&&console.trace(e)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new pe({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=G(o.fetch),this.lock=o.lock||qe,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:F()&&(null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===n?void 0:n.locks)?this.lock=be:this.lock=qe,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Le(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:B()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fe(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=fe(this.memoryStorage)),F()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return"GoTrueClient@"+"".concat(this.storageKey,":").concat(this.instanceID," (").concat(o,") ").concat((new Date).toISOString())}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger(this._logPrefix(),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},n="none";if(F()&&(t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(r){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),F()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:o}=await this._getSessionFromURL(t,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),E(o)){const t=null===(e=o.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:s}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{"recovery"===s?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return h(t)?this._returnResult({error:t}):this._returnResult({error:new m("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const o=await ie(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:se}),{data:i,error:s}=o;if(s||!i)return this._returnResult({data:{user:null,session:null},error:s});const a=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),this._returnResult({data:{user:l,session:a},error:null})}catch(o){if(h(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var t,n,r;try{let o;if("email"in e){const{email:n,password:r,options:i}=e;let s=null,a=null;"pkce"===this.flowType&&([s,a]=await $(this.storage,this.storageKey)),o=await ie(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:s,code_challenge_method:a},xform:se})}else{if(!("phone"in e))throw new _("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:s}=e;o=await ie(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null===s||void 0===s?void 0:s.data)&&void 0!==n?n:{},channel:null!==(r=null===s||void 0===s?void 0:s.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:se})}}const{data:i,error:s}=o;if(s||!i)return await z(this.storage,"".concat(this.storageKey,"-code-verifier")),this._returnResult({data:{user:null,session:null},error:s});const a=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),this._returnResult({data:{user:l,session:a},error:null})}catch(o){if(await z(this.storage,"".concat(this.storageKey,"-code-verifier")),h(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:o}=e;t=await ie(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:ae})}else{if(!("phone"in e))throw new _("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:o}=e;t=await ie(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:ae})}}const{data:n,error:r}=t;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!n||!n.session||!n.user){const e=new b;return this._returnResult({data:{user:null,session:null},error:e})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if(h(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,r,o;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(o=e.options)||void 0===o?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}}async signInWithEthereum(e){var t,n,r,o,i,s,a,l,c,u,d;let p,f;if("message"in e)p=e.message,f=e.signature;else{const{chain:u,wallet:d,statement:h,options:m}=e;let g;if(F())if("object"===typeof d)g=d;else{const e=window;if(!("ethereum"in e)||"object"!==typeof e.ethereum||!("request"in e.ethereum)||"function"!==typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=e.ethereum}else{if("object"!==typeof d||!(null===m||void 0===m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=d}const v=new URL(null!==(t=null===m||void 0===m?void 0:m.url)&&void 0!==t?t:window.location.href),y=await g.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!y||0===y.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const b=Ee(y[0]);let _=null===(n=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===n?void 0:n.chainId;if(!_){const e=await g.request({method:"eth_chainId"});_=parseInt(e,16)}p=function(e){var t;const{chainId:n,domain:r,expirationTime:o,issuedAt:i=new Date,nonce:s,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:h}=e;if(!Number.isInteger(n))throw new Error('@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: '.concat(n));if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error('@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: '.concat(s));if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error("@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ".concat(h));if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error("@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\n'. Provided value: ".concat(e.statement));const p=Ee(e.address),f=u?"".concat(u,"://").concat(r):r,m=e.statement?"".concat(e.statement,"\n"):"",g="".concat(f," wants you to sign in with your Ethereum account:\n").concat(p,"\n\n").concat(m);let v="URI: ".concat(d,"\nVersion: ").concat(h,"\nChain ID: ").concat(n).concat(s?"\nNonce: ".concat(s):"","\nIssued At: ").concat(i.toISOString());if(o&&(v+="\nExpiration Time: ".concat(o.toISOString())),a&&(v+="\nNot Before: ".concat(a.toISOString())),l&&(v+="\nRequest ID: ".concat(l)),c){let e="\nResources:";for(const t of c){if(!t||"string"!==typeof t)throw new Error('@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: '.concat(t));e+="\n- ".concat(t)}v+=e}return"".concat(g,"\n").concat(v)}({domain:v.host,address:b,statement:h,uri:v.href,version:"1",chainId:_,nonce:null===(r=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===r?void 0:r.nonce,issuedAt:null!==(i=null===(o=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===o?void 0:o.issuedAt)&&void 0!==i?i:new Date,expirationTime:null===(s=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===s?void 0:s.expirationTime,notBefore:null===(a=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===a?void 0:a.notBefore,requestId:null===(l=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===c?void 0:c.resources}),f=await g.request({method:"personal_sign",params:[Se(p),b]})}try{const{data:t,error:n}=await ie(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:f},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:se});if(n)throw n;if(!t||!t.session||!t.user){const e=new b;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:n})}catch(m){if(h(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(e){var t,n,r,o,i,s,a,l,c,u,d,p;let f,m;if("message"in e)f=e.message,m=e.signature;else{const{chain:d,wallet:h,statement:p,options:g}=e;let v;if(F())if("object"===typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const y=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),p?{statement:p}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),m=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=["".concat(y.host," wants you to sign in with your Solana account:"),v.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1","URI: ".concat(y.href),"Issued At: ".concat(null!==(r=null===(n=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()),...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.notBefore)?["Not Before: ".concat(g.signInWithSolana.notBefore)]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.expirationTime)?["Expiration Time: ".concat(g.signInWithSolana.expirationTime)]:[],...(null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.chainId)?["Chain ID: ".concat(g.signInWithSolana.chainId)]:[],...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.nonce)?["Nonce: ".concat(g.signInWithSolana.nonce)]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(g.signInWithSolana.requestId)]:[],...(null===(u=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=e}}try{const{data:t,error:n}=await ie(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:L(m)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(p=e.options)||void 0===p?void 0:p.captchaToken}}:null),xform:se});if(n)throw n;if(!t||!t.session||!t.user){const e=new b;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:n})}catch(g){if(h(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async _exchangeCodeForSession(e){const t=await V(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,r]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:o}=await ie(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:se});if(await z(this.storage,"".concat(this.storageKey,"-code-verifier")),o)throw o;if(!t||!t.session||!t.user){const e=new b;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:o})}catch(o){if(await z(this.storage,"".concat(this.storageKey,"-code-verifier")),h(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:o,nonce:i}=e,s=await ie(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:r,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:se}),{data:a,error:l}=s;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a||!a.session||!a.user){const e=new b;return this._returnResult({data:{user:null,session:null},error:e})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:a,error:l})}catch(t){if(h(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,r,o,i;try{if("email"in e){const{email:r,options:o}=e;let i=null,s=null;"pkce"===this.flowType&&([i,s]=await $(this.storage,this.storageKey));const{error:a}=await ie(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:r,data:null!==(t=null===o||void 0===o?void 0:o.data)&&void 0!==t?t:{},create_user:null===(n=null===o||void 0===o?void 0:o.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken},code_challenge:i,code_challenge_method:s},redirectTo:null===o||void 0===o?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}if("phone"in e){const{phone:t,options:n}=e,{data:s,error:a}=await ie(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(o=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===o||o,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(i=null===n||void 0===n?void 0:n.channel)&&void 0!==i?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:a})}throw new _("You must provide either an email or phone number.")}catch(s){if(await z(this.storage,"".concat(this.storageKey,"-code-verifier")),h(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var t,n;try{let r,o;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,o=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:s}=await ie(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:r,xform:se});if(s)throw s;if(!i){throw new Error("An error occurred on token verification.")}const a=i.session,l=i.user;return(null===a||void 0===a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",a)),this._returnResult({data:{user:l,session:a},error:null})}catch(r){if(h(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var t,n,r,o,i;try{let s=null,a=null;"pkce"===this.flowType&&([s,a]=await $(this.storage,this.storageKey));const l=await ie(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:ce});return(null===(o=l.data)||void 0===o?void 0:o.url)&&F()&&!(null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(s){if(await z(this.storage,"".concat(this.storageKey,"-code-verifier")),h(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new v;const{error:r}=await ie(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(h(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:r,options:o}=e,{error:i}=await ie(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},redirectTo:null===o||void 0===o?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}if("phone"in e){const{phone:n,type:r,options:o}=e,{data:i,error:s}=await ie(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:s})}throw new _("You must provide either an email or phone number and a type")}catch(t){if(h(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await V(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<s;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.userStorage){const t=await V(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=ee()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const t={value:this.suppressGetSessionWarning};e.user=function(e,t){return new Proxy(e,{get:(e,n,r)=>{if("__isInsecureUserWarningProxy"===n)return!0;if("symbol"===typeof n){const t=n.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t||"Symbol(nodejs.util.inspect.custom)"===t)return Reflect.get(e,n,r)}return t.value||"string"!==typeof n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,n,r)}})}(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await ie(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:le}):await this._useSession(async e=>{var t,n,r;const{data:o,error:i}=e;if(i)throw i;return(null===(t=o.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await ie(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(r=null===(n=o.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:le}):{data:{user:null},error:new v}})}catch(t){if(h(t))return y(t)&&(await this._removeSession(),await z(this.storage,"".concat(this.storageKey,"-code-verifier"))),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:r,error:o}=n;if(o)throw o;if(!r.session)throw new v;const i=r.session;let s=null,a=null;"pkce"===this.flowType&&null!=e.email&&([s,a]=await $(this.storage,this.storageKey));const{data:l,error:c}=await ie(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:a}),jwt:i.access_token,xform:le});if(c)throw c;return i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(n){if(await z(this.storage,"".concat(this.storageKey,"-code-verifier")),h(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new v;const t=Date.now()/1e3;let n=t,r=!0,o=null;const{payload:i}=W(e.access_token);if(i.exp&&(n=i.exp,r=n<=t),r){const{data:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!t)return{data:{user:null,session:null},error:null};o=t}else{const{data:r,error:i}=await this._getUser(e.access_token);if(i)throw i;o={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(t){if(h(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:o}=t;if(o)throw o;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new v;const{data:r,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(h(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!F())throw new w("No browser detected.");if(e.error||e.error_description||e.error_code)throw new w(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new S("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new w("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new S("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:o,refresh_token:s,expires_in:a,expires_at:l,token_type:c}=e;if(!o||!a||!s||!c)throw new w("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const p=h-u;1e3*p<=i&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(p,"s, should have been closer to ").concat(d,"s"));const f=h-d;u-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,h,u):u-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,h,u);const{data:m,error:g}=await this._getUser(o);if(g)throw g;const v={provider_token:n,provider_refresh_token:r,access_token:o,expires_in:d,expires_at:h,refresh_token:s,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:e.type},error:null})}catch(n){if(h(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await V(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:r,error:o}=t;if(o)return this._returnResult({error:o});const i=null===(n=r.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!f(t)||404!==t.status&&401!==t.status&&403!==t.status))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await z(this.storage,"".concat(this.storageKey,"-code-verifier"))),this._returnResult({error:null})})}onAuthStateChange(e){const t=Symbol("auth-callback"),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:o}=t;if(o)throw o;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(o){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await $(this.storage,this.storageKey,!0));try{return await ie(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(await z(this.storage,"".concat(this.storageKey,"-code-verifier")),h(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null})}catch(t){if(h(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,o,i,s;const{data:a,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(o=e.options)||void 0===o?void 0:o.queryParams,skipBrowserRedirect:!0});return await ie(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(s=null===(i=a.session)||void 0===i?void 0:i.access_token)&&void 0!==s?s:void 0})});if(r)throw r;return F()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),this._returnResult({data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null})}catch(n){if(h(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:r,data:{session:o}}=t;if(r)throw r;const{options:i,provider:s,token:a,access_token:l,nonce:c}=e,u=await ie(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,jwt:null!==(n=null===o||void 0===o?void 0:o.access_token)&&void 0!==n?n:void 0,body:{provider:s,id_token:a,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:se}),{data:d,error:h}=u;return h?this._returnResult({data:{user:null,session:null},error:h}):d&&d.session&&d.user?(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:h})):this._returnResult({data:{user:null,session:null},error:new b})}catch(r){if(await z(this.storage,"".concat(this.storageKey,"-code-verifier")),h(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:o,error:i}=t;if(i)throw i;return await ie(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(r=null===(n=o.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(h(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const o=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await ie(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:se})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&O(t)&&Date.now()+n-o<i},new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await n(i);if(!r(i,null,t))return void e(t)}catch(o){if(!r(i,o))return void t(o)}})()}))}catch(o){if(this._debug(t,"error",o),h(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),F()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const o=await V(this.storage,this.storageKey);if(o&&this.userStorage){let t=await V(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:o.user},await H(this.userStorage,this.storageKey+"-user",t)),o.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:ee()}else if(o&&!o.user&&!o.user){const e=await V(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(o.user=e.user,await z(this.storage,this.storageKey+"-user"),await H(this.storage,this.storageKey,o)):o.user=ee()}if(this._debug(n,"session from storage",o),!this._isValidSession(o))return this._debug(n,"session is not valid"),void(null!==o&&await this._removeSession());const i=1e3*(null!==(t=o.expires_at)&&void 0!==t?t:1/0)-Date.now()<s;if(this._debug(n,"session has".concat(i?"":" not"," expired with margin of ").concat(s,"s")),i){if(this.autoRefreshToken&&o.refresh_token){const{error:e}=await this._callRefreshToken(o.refresh_token);e&&(console.error(e),O(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(o.user&&!0===o.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(o.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(o.user=e.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){return this._debug(n,"error",o),void console.error(o)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new v;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(r,"begin");try{this.refreshingDeferred=new J;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new v;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={data:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(o){if(this._debug(r,"error",o),h(o)){const e={data:null,error:o};return O(o)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r="#_notifyAllSubscribers(".concat(e,")");this._debug(r,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(o){r.push(o)}});if(await Promise.all(o),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await z(this.storage,"".concat(this.storageKey,"-code-verifier"));const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await H(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=te(e);await H(this.storage,this.storageKey,r)}else{const e=te(t);await H(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await z(this.storage,this.storageKey),await z(this.storage,this.storageKey+"-code-verifier"),await z(this.storage,this.storageKey+"-user"),this.userStorage&&await z(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&F()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),i);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/i);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(r," ticks, a tick lasts ").concat(i,"ms, refresh threshold is ").concat(3," ticks")),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof ge))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!F()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&r.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await $(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(r.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:o}=t;return o?this._returnResult({data:null,error:o}):await ie(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(h(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:o,error:i}=t;if(i)return this._returnResult({data:null,error:i});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:a,error:l}=await ie(this.fetch,"POST","".concat(this.url,"/factors"),{body:s,headers:this.headers,jwt:null===(n=null===o||void 0===o?void 0:o.session)||void 0===n?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===a.type&&(null===(r=null===a||void 0===a?void 0:a.totp)||void 0===r?void 0:r.qr_code)&&(a.totp.qr_code="data:image/svg+xml;utf-8,".concat(a.totp.qr_code)),this._returnResult({data:a,error:null}))})}catch(t){if(h(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:o}=t;if(o)return this._returnResult({data:null,error:o});const i=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?Ne(e.webauthn.credential_response):Re(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:a}=await ie(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:i,headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return a?this._returnResult({data:null,error:a}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:a}))})}catch(t){if(h(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:o}=t;if(o)return this._returnResult({data:null,error:o});const i=await ie(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:e,headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});if(i.error)return i;const{data:s}=i;if("webauthn"!==s.type)return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:ke(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:xe(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(h(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r={all:[],phone:[],totp:[],webauthn:[]};for(const o of null!==(e=null===t||void 0===t?void 0:t.factors)&&void 0!==e?e:[])r.all.push(o),"verified"===o.status&&r[o.factor_type].push(o);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:n},error:r}=await this.getSession();if(r)return this._returnResult({data:null,error:r});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=W(n.access_token);let i=null;o.aal&&(i=o.aal);let s=i;(null!==(t=null===(e=n.user.factors)||void 0===e?void 0:e.filter(e=>"verified"===e.status))&&void 0!==t?t:[]).length>0&&(s="aal2");return{data:{currentLevel:i,nextLevel:s,currentAuthenticationMethods:o.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await ie(this.fetch,"GET","".concat(this.url,"/oauth/authorizations/").concat(e),{headers:this.headers,jwt:n.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new v})})}catch(t){if(h(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:r},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!r)return this._returnResult({data:null,error:new v});const i=await ie(this.fetch,"POST","".concat(this.url,"/oauth/authorizations/").concat(e,"/consent"),{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return i.data&&i.data.redirect_url&&F()&&!(null===t||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(h(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:r},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!r)return this._returnResult({data:null,error:new v});const i=await ie(this.fetch,"POST","".concat(this.url,"/oauth/authorizations/").concat(e,"/consent"),{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return i.data&&i.data.redirect_url&&F()&&!(null===t||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(h(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;return n?this._returnResult({data:null,error:n}):t?await ie(this.fetch,"GET","".concat(this.url,"/user/oauth/grants"),{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new v})})}catch(e){if(h(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?(await ie(this.fetch,"DELETE","".concat(this.url,"/user/oauth/grants"),{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new v})})}catch(t){if(h(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:r,error:o}=await ie(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(o)throw o;return r.keys&&0!==r.keys.length?(this.jwks=r,this.jwks_cached_at=n,t=r.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});n=e.session.access_token}const{header:r,payload:o,signature:i,raw:{header:s,payload:a}}=W(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(o.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:o,header:r,signature:i},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,u,i,function(e){const t=[];return U(e,e=>t.push(e)),new Uint8Array(t)}("".concat(s,".").concat(a))))throw new A("Invalid JWT signature");return{data:{claims:o,header:r,signature:i},error:null}}catch(n){if(h(n))return this._returnResult({data:null,error:n});throw n}}}Ge.nextInstanceID={};const He=Ge,Ve=pe,ze=Ge},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,s=o>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<o&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,_(e),!m)if(null!==r(c))m=!0,P(E);else{var t=r(u);null!==t&&j(w,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,y(I),I=-1),f=!0;var i=p;try{for(_(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!k());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&o(c),_(n)}else o(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&j(w,d.startTime-n),l=!1}return l}finally{h=null,p=i,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,T=!1,O=null,I=-1,C=5,A=-1;function k(){return!(t.unstable_now()-A<C)}function x(){if(null!==O){var e=t.unstable_now();A=e;var n=!0;try{n=O(!0,e)}finally{n?S():(T=!1,O=null)}}else T=!1}if("function"===typeof b)S=function(){b(x)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,R=N.port2;N.port1.onmessage=x,S=function(){R.postMessage(null)}}else S=function(){v(x,0)};function P(e){O=e,T||(T=!0,S())}function j(e,n){I=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,P(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>s?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(y(I),I=-1):g=!0,j(w,i-s))):(e.sortIndex=a,n(c,e),m||f||(m=!0,P(E))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},286:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(326).__importDefault(n(611));t.default=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,o,i;let s=null,a=null,l=null,c=e.status,u=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(a="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const r=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),i=null===(o=e.headers.get("content-range"))||void 0===o?void 0:o.split("/");r&&i&&i.length>1&&(l=parseInt(i[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(s={code:"PGRST116",details:"Results contain ".concat(a.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,u="Not Acceptable"):a=1===a.length?a[0]:null)}else{const t=await e.text();try{s=JSON.parse(t),Array.isArray(s)&&404===e.status&&(a=[],s=null,c=200,u="OK")}catch(d){404===e.status&&""===t?(c=204,u="No Content"):s={message:t}}if(s&&this.isMaybeSingle&&(null===(i=null===s||void 0===s?void 0:s.details)||void 0===i?void 0:i.includes("0 rows"))&&(s=null,c=200,u="OK"),s&&this.shouldThrowOnError)throw new r.default(s)}return{error:s,data:a,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r,o,i,s;let a="";const l=null===e||void 0===e?void 0:e.cause;if(l){const i=null!==(t=null===l||void 0===l?void 0:l.message)&&void 0!==t?t:"",s=null!==(n=null===l||void 0===l?void 0:l.code)&&void 0!==n?n:"";a="".concat(null!==(r=null===e||void 0===e?void 0:e.name)&&void 0!==r?r:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),a+="\n\nCaused by: ".concat(null!==(o=null===l||void 0===l?void 0:l.name)&&void 0!==o?o:"Error",": ").concat(i),s&&(a+=" (".concat(s,")")),(null===l||void 0===l?void 0:l.stack)&&(a+="\n".concat(l.stack))}else a=null!==(i=null===e||void 0===e?void 0:e.stack)&&void 0!==i?i:"";return{error:{message:"".concat(null!==(s=null===e||void 0===e?void 0:e.name)&&void 0!==s?s:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},292:(e,t,n)=>{n.r(t),n.d(t,{REALTIME_CHANNEL_STATES:()=>R,REALTIME_LISTEN_TYPES:()=>k,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:()=>A,REALTIME_PRESENCE_LISTEN_EVENTS:()=>C,REALTIME_SUBSCRIBE_STATES:()=>x,RealtimeChannel:()=>P,RealtimeClient:()=>F,RealtimePresence:()=>N,WebSocketFactory:()=>r});const r=class{constructor(){}static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof n.g&&"undefined"!==typeof n.g.WebSocket)return{type:"native",constructor:n.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process){const e=process.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(n," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(n," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},o="realtime-js/".concat("2.86.2"),i="1.0.0",s=i,a=1e4;var l,c,u,d,h,p;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(l||(l={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(c||(c={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(u||(u={})),function(e){e.websocket="websocket"}(d||(d={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(h||(h={}));class f{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!==e&&void 0!==e?e:[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&"string"===typeof e.payload.event)return t(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null===(t=e.payload)||void 0===t?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,n;const r=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==n?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var t,n;const r=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==n?n:{},o=(new TextEncoder).encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,t,n){var r,o;const i=e.topic,s=null!==(r=e.ref)&&void 0!==r?r:"",a=null!==(o=e.join_ref)&&void 0!==o?o:"",l=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},u=0===Object.keys(c).length?"":JSON.stringify(c);if(a.length>255)throw new Error("joinRef length ".concat(a.length," exceeds maximum of 255"));if(s.length>255)throw new Error("ref length ".concat(s.length," exceeds maximum of 255"));if(i.length>255)throw new Error("topic length ".concat(i.length," exceeds maximum of 255"));if(l.length>255)throw new Error("userEvent length ".concat(l.length," exceeds maximum of 255"));if(u.length>255)throw new Error("metadata length ".concat(u.length," exceeds maximum of 255"));const d=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+s.length+i.length+l.length+u.length,h=new ArrayBuffer(this.HEADER_LENGTH+d);let p=new DataView(h),f=0;p.setUint8(f++,this.KINDS.userBroadcastPush),p.setUint8(f++,a.length),p.setUint8(f++,s.length),p.setUint8(f++,i.length),p.setUint8(f++,l.length),p.setUint8(f++,u.length),p.setUint8(f++,t),Array.from(a,e=>p.setUint8(f++,e.charCodeAt(0))),Array.from(s,e=>p.setUint8(f++,e.charCodeAt(0))),Array.from(i,e=>p.setUint8(f++,e.charCodeAt(0))),Array.from(l,e=>p.setUint8(f++,e.charCodeAt(0))),Array.from(u,e=>p.setUint8(f++,e.charCodeAt(0)));var m=new Uint8Array(h.byteLength+n.byteLength);return m.set(new Uint8Array(h),0),m.set(new Uint8Array(n),h.byteLength),m.buffer}decode(e,t){if(this._isArrayBuffer(e)){return t(this._binaryDecode(e))}if("string"===typeof e){const n=JSON.parse(e),[r,o,i,s,a]=n;return t({join_ref:r,ref:o,topic:i,event:s,payload:a})}return t({})}_binaryDecode(e){const t=new DataView(e),n=t.getUint8(0),r=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,r)}_decodeUserBroadcast(e,t,n){const r=t.getUint8(1),o=t.getUint8(2),i=t.getUint8(3),s=t.getUint8(4);let a=this.HEADER_LENGTH+4;const l=n.decode(e.slice(a,a+r));a+=r;const c=n.decode(e.slice(a,a+o));a+=o;const u=n.decode(e.slice(a,a+i));a+=i;const d=e.slice(a,e.byteLength),h=s===this.JSON_ENCODING?JSON.parse(n.decode(d)):d,p={type:this.BROADCAST_EVENT,event:c,payload:h};return i>0&&(p.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===(t=null===e||void 0===e?void 0:e.constructor)||void 0===t?void 0:t.name)}_pick(e,t){return e&&"object"===typeof e?Object.fromEntries(Object.entries(e).filter(e=>{let[n]=e;return t.includes(n)})):{}}}class m{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(p||(p={}));const g=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return t?Object.keys(t).reduce((n,o)=>(n[o]=v(o,e,t,r),n),{}):{}},v=(e,t,n,r)=>{const o=t.find(t=>t.name===e),i=null===o||void 0===o?void 0:o.type,s=n[e];return i&&!r.includes(i)?y(i,s):b(s)},y=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return S(t,n)}switch(e){case p.bool:return _(t);case p.float4:case p.float8:case p.int2:case p.int4:case p.int8:case p.numeric:case p.oid:return w(t);case p.json:case p.jsonb:return E(t);case p.timestamp:return T(t);case p.abstime:case p.date:case p.daterange:case p.int4range:case p.int8range:case p.money:case p.reltime:case p.text:case p.time:case p.timestamptz:case p.timetz:case p.tsrange:case p.tstzrange:default:return b(t)}},b=e=>e,_=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},w=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},E=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},S=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const i=e.slice(1,n);try{r=JSON.parse("["+i+"]")}catch(o){r=i?i.split(","):[]}return r.map(e=>y(t,e))}return e},T=e=>"string"===typeof e?e.replace(" ","T"):e,O=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class I{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var C,A,k,x;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(C||(C={}));class N{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=N.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=N.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=N.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const o=this.cloneDeep(e),i=this.transformState(t),s={},a={};return this.map(o,(e,t)=>{i[e]||(a[e]=t)}),this.map(i,(e,t)=>{const n=o[e];if(n){const r=t.map(e=>e.presence_ref),o=n.map(e=>e.presence_ref),i=t.filter(e=>o.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);i.length>0&&(s[e]=i),l.length>0&&(a[e]=l)}else s[e]=t}),this.syncDiff(o,{joins:s,leaves:a},n,r)}static syncDiff(e,t,n,r){const{joins:o,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(o,(t,r)=>{var o;const i=null!==(o=e[t])&&void 0!==o?o:[];if(e[t]=this.cloneDeep(r),i.length>0){const n=e[t].map(e=>e.presence_ref),r=i.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,i,r)}),this.map(i,(t,n)=>{let o=e[t];if(!o)return;const i=n.map(e=>e.presence_ref);o=o.filter(e=>i.indexOf(e.presence_ref)<0),e[t]=o,r(t,o,n),0===o.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(A||(A={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(k||(k={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(x||(x={}));const R=c;class P{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;var r,o;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=c.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new I(this,u.join,this.params,this.timeout),this.rejoinTimer=new m(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=c.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=c.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=c.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=c.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=c.errored,this.rejoinTimer.scheduleTimeout())}),this._on(u.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new N(this),this.broadcastEndpointURL=O(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(o=null===(r=this.params.config)||void 0===r?void 0:r.broadcast)||void 0===o?void 0:o.replay))throw"tried to use replay on public channel '".concat(this.topic,"'. It must be a private channel.")}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r,o;if(this.socket.isConnected()||this.socket.connect(),this.state==c.closed){const{config:{broadcast:i,presence:s,private:a}}=this.params,l=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],u=!!this.bindings[k.PRESENCE]&&this.bindings[k.PRESENCE].length>0||!0===(null===(o=this.params.config.presence)||void 0===o?void 0:o.enabled),d={},h={broadcast:i,presence:Object.assign(Object.assign({},s),{enabled:u}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(x.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(x.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var r;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,o=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,i=[];for(let r=0;r<o;r++){const o=t[r],{filter:{event:s,schema:a,table:l,filter:u}}=o,d=n&&n[r];if(!d||d.event!==s||d.schema!==a||d.table!==l||d.filter!==u)return this.unsubscribe(),this.state=c.errored,void(null===e||void 0===e||e(x.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},o),{id:d.id}))}return this.bindings.postgres_changes=i,void(e&&e(x.SUBSCRIBED))}null===e||void 0===e||e(x.SUBSCRIBED)}).receive("error",t=>{this.state=c.errored,null===e||void 0===e||e(x.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(x.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===c.joined&&e===k.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async httpSend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r;const o=this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"";if(void 0===t||null===t)return Promise.reject("Payload is required for httpSend()");const i={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,i,null!==(r=n.timeout)&&void 0!==r?r:this.timeout);if(202===s.status)return{success:!0};let a=s.statusText;try{const e=await s.json();a=e.error||e.message||a}catch(l){}return Promise.reject(new Error(a))}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,o,i;const s=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(o=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===o?void 0:o.broadcast)||void 0===i?void 0:i.ack)||n("ok"),s.receive("ok",()=>n("ok")),s.receive("error",()=>n("error")),s.receive("timeout",()=>n("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:s}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(o){return"AbortError"===o.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=c.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(u.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new I(this,u.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=c.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,o=setTimeout(()=>r.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(o),i}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let r=new I(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,o;const i=e.toLocaleLowerCase(),{close:s,error:a,leave:l,join:c}=u;if(n&&[s,a,l,c].indexOf(i)>=0&&n!==this._joinRef())return;let d=this._onMessage(i,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===i}).map(e=>e.callback(d,n)):null===(o=this.bindings[i])||void 0===o||o.filter(e=>{var n,r,o,s,a,l;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,s=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(r=t.ids)||void 0===r?void 0:r.includes(i))&&("*"===s||(null===s||void 0===s?void 0:s.toLocaleLowerCase())===(null===(o=t.data)||void 0===o?void 0:o.type.toLocaleLowerCase()))}{const n=null===(a=null===(s=null===e||void 0===e?void 0:e.filter)||void 0===s?void 0:s.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:n,commit_timestamp:r,type:o,errors:i}=e,s={schema:t,table:n,commit_timestamp:r,eventType:o,new:{},old:{},errors:i};d=Object.assign(Object.assign({},s),this._getPayloadRecords(e))}e.callback(d,n)})}_isClosed(){return this.state===c.closed}_isJoined(){return this.state===c.joined}_isJoining(){return this.state===c.joining}_isLeaving(){return this.state===c.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const r=e.toLocaleLowerCase(),o={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(o):this.bindings[r]=[o],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&P.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(u.close,{},e)}_onError(e){this._on(u.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=c.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=g(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=g(e.columns,e.old_record)),t}}const j=()=>{},D=25e3,U=10,M=100,L=[1e3,2e3,5e3,1e4];class F{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=a,this.transport=null,this.heartbeatIntervalMs=D,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=j,this.ref=0,this.reconnectTimer=null,this.vsn=s,this.logger=j,this.conn=null,this.sendBuffer=[],this.serializer=new f,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},!(null===(n=null===t||void 0===t?void 0:t.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(d.websocket),this.httpEndpoint=O(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=r.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},"function"===typeof this.conn.close&&(e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case l.connecting:return h.Connecting;case l.open:return h.Open;case l.closing:return h.Closing;default:return h.Closed}}isConnected(){return this.connectionState()===h.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n="realtime:".concat(e),r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new P("realtime:".concat(e),t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:o}=e,i=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(n," (").concat(o,")"),r),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},M)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(a){this.log("error","error in heartbeat callback",a)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:r,ref:o}=e,i=o?"(".concat(o,")"):"",s=r.status||"";this.log("receive","".concat(s," ").concat(t," ").concat(n," ").concat(i).trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,o)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===l.open||this.conn.readyState===l.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL()));(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(u.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return"".concat(e).concat(n).concat(r)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:o};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(u.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(r){this.log("error","error in ".concat(e," callback"),r)}})}catch(n){this.log("error","error triggering ".concat(e," callbacks"),n)}}_setupReconnectionTimer(){this.reconnectTimer=new m(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},U)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,o,l,c,u,d,h,p,f,m;switch(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null===e||void 0===e?void 0:e.timeout)&&void 0!==n?n:a,this.heartbeatIntervalMs=null!==(r=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:D,this.worker=null!==(o=null===e||void 0===e?void 0:e.worker)&&void 0!==o&&o,this.accessToken=null!==(l=null===e||void 0===e?void 0:e.accessToken)&&void 0!==l?l:null,this.heartbeatCallback=null!==(c=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==c?c:j,this.vsn=null!==(u=null===e||void 0===e?void 0:e.vsn)&&void 0!==u?u:s,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(d=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==d?d:e=>L[e-1]||1e4,this.vsn){case i:this.encode=null!==(h=null===e||void 0===e?void 0:e.encode)&&void 0!==h?h:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(p=null===e||void 0===e?void 0:e.decode)&&void 0!==p?p:(e,t)=>t(JSON.parse(e));break;case"2.0.0":this.encode=null!==(f=null===e||void 0===e?void 0:e.encode)&&void 0!==f?f:this.serializer.encode.bind(this.serializer),this.decode=null!==(m=null===e||void 0===e?void 0:e.decode)&&void 0!==m?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error("Unsupported serializer version: ".concat(this.vsn))}if(this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}},326:(e,t,n)=>{n.r(t),n.d(t,{__addDisposableResource:()=>D,__assign:()=>i,__asyncDelegator:()=>O,__asyncGenerator:()=>T,__asyncValues:()=>I,__await:()=>S,__awaiter:()=>f,__classPrivateFieldGet:()=>R,__classPrivateFieldIn:()=>j,__classPrivateFieldSet:()=>P,__createBinding:()=>g,__decorate:()=>a,__disposeResources:()=>M,__esDecorate:()=>c,__exportStar:()=>v,__extends:()=>o,__generator:()=>m,__importDefault:()=>N,__importStar:()=>x,__makeTemplateObject:()=>C,__metadata:()=>p,__param:()=>l,__propKey:()=>d,__read:()=>b,__rest:()=>s,__rewriteRelativeImportExtension:()=>L,__runInitializers:()=>u,__setFunctionName:()=>h,__spread:()=>_,__spreadArray:()=>E,__spreadArrays:()=>w,__values:()=>y,default:()=>F});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function a(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function l(e,t){return function(n,r){t(n,r,e)}}function c(e,t,n,r,o,i){function s(e){if(void 0!==e&&"function"!==typeof e)throw new TypeError("Function expected");return e}for(var a,l=r.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h=!1,p=n.length-1;p>=0;p--){var f={};for(var m in r)f[m]="access"===m?{}:r[m];for(var m in r.access)f.access[m]=r.access[m];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(e||null))};var g=(0,n[p])("accessor"===l?{get:d.get,set:d.set}:d[c],f);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!==typeof g)throw new TypeError("Object expected");(a=s(g.get))&&(d.get=a),(a=s(g.set))&&(d.set=a),(a=s(g.init))&&o.unshift(a)}else(a=s(g))&&("field"===l?o.unshift(a):d[c]=a)}u&&Object.defineProperty(u,r.name,d),h=!0}function u(e,t,n){for(var r=arguments.length>2,o=0;o<t.length;o++)n=r?t[o].call(e,n):t[o].call(e);return r?n:void 0}function d(e){return"symbol"===typeof e?e:"".concat(e)}function h(e,t,n){return"symbol"===typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function p(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{l(r.next(e))}catch(t){i(t)}}function a(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})}function m(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(l){a=[6,l],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var g=Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function v(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||g(t,e,n)}function y(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function w(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}function E(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function S(e){return this instanceof S?(this.v=e,this):new S(e)}function T(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r=Object.create(("function"===typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||a(e,t)})},t&&(r[e]=t(r[e])))}function a(e,t){try{(n=o[e](t)).value instanceof S?Promise.resolve(n.value.v).then(l,c):u(i[0][2],n)}catch(r){u(i[0][3],r)}var n}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function O(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:S(e[r](t)),done:!1}:o?o(t):t}:o}}function I(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=y(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,o,(t=e[n](t)).done,t.value)})}}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var A=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},k=function(e){return k=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},k(e)};function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=k(e),r=0;r<n.length;r++)"default"!==n[r]&&g(t,e,n[r]);return A(t,e),t}function N(e){return e&&e.__esModule?e:{default:e}}function R(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function P(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n}function j(e,t){if(null===t||"object"!==typeof t&&"function"!==typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof e?t===e:e.has(t)}function D(e,t,n){if(null!==t&&void 0!==t){if("object"!==typeof t&&"function"!==typeof t)throw new TypeError("Object expected.");var r,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(o=r)}if("function"!==typeof r)throw new TypeError("Object not disposable.");o&&(r=function(){try{o.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var U="function"===typeof SuppressedError?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function M(e){function t(t){e.error=e.hasError?new U(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,r=0;return function o(){for(;n=e.stack.pop();)try{if(!n.async&&1===r)return r=0,e.stack.push(n),Promise.resolve().then(o);if(n.dispose){var i=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(i).then(o,function(e){return t(e),o()})}else r|=1}catch(s){t(s)}if(1===r)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function L(e,t){return"string"===typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,n,r,o,i){return n?t?".jsx":".js":!r||o&&i?r+o+"."+i.toLowerCase()+"js":e}):e}const F={__extends:o,__assign:i,__rest:s,__decorate:a,__param:l,__esDecorate:c,__runInitializers:u,__propKey:d,__setFunctionName:h,__metadata:p,__awaiter:f,__generator:m,__createBinding:g,__exportStar:v,__values:y,__read:b,__spread:_,__spreadArrays:w,__spreadArray:E,__await:S,__asyncGenerator:T,__asyncDelegator:O,__asyncValues:I,__makeTemplateObject:C,__importStar:x,__importDefault:N,__classPrivateFieldGet:R,__classPrivateFieldSet:P,__classPrivateFieldIn:j,__addDisposableResource:D,__disposeResources:M,__rewriteRelativeImportExtension:L}},337:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SupabaseAuthClient=void 0;const r=n(219);class o extends r.AuthClient{constructor(e){super(e)}}t.SupabaseAuthClient=o},374:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(326).__importDefault(n(286));class o extends r.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:o=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=o?"".concat(o,".order"):"order",s=this.url.searchParams.get(i);return this.url.searchParams.set(i,"".concat(s?"".concat(s,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(r,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o="undefined"===typeof r?"offset":"".concat(r,".offset"),i="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(o,"".concat(e)),this.url.searchParams.set(i,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:o=!1,format:i="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var s;const a=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,o?"wal":null].filter(Boolean).join("|"),l=null!==(s=this.headers.get("Accept"))&&void 0!==s?s:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(i,'; for="').concat(l,'"; options=').concat(a,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=o},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},425:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const r=n(488);let o="";o="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node",t.DEFAULT_HEADERS={"X-Client-Info":"supabase-js-".concat(o,"/").concat(r.version)},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}},448:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const s=i(n(87));o(n(219),t);var a=n(980);Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return a.PostgrestError}});var l=n(642);Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return l.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return l.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return l.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return l.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return l.FunctionRegion}}),o(n(292),t);var c=n(87);Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return i(c).default}});t.createClient=(e,t,n)=>new s.default(e,t,n),function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18}()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")},488:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="2.86.2"},555:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>a})},579:(e,t,n)=>{e.exports=n(153)},611:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},642:(e,t,n)=>{n.r(t),n.d(t,{FunctionRegion:()=>l,FunctionsClient:()=>c,FunctionsError:()=>o,FunctionsFetchError:()=>i,FunctionsHttpError:()=>a,FunctionsRelayError:()=>s});var r=n(326);class o extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class i extends o{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class s extends o{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class a extends o{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var l;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(l||(l={}));class c{constructor(e){let{headers:t={},customFetch:n,region:r=l.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=r,this.fetch=(e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)})(n)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){return(0,r.__awaiter)(this,arguments,void 0,function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var r;let o,l;try{const{headers:c,method:u,body:d,signal:h,timeout:p}=n;let f={},{region:m}=n;m||(m=t.region);const g=new URL("".concat(t.url,"/").concat(e));let v;m&&"any"!==m&&(f["x-region"]=m,g.searchParams.set("forceFunctionRegion",m)),d&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?"undefined"!==typeof Blob&&d instanceof Blob||d instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=d):"string"===typeof d?(f["Content-Type"]="text/plain",v=d):"undefined"!==typeof FormData&&d instanceof FormData?v=d:(f["Content-Type"]="application/json",v=JSON.stringify(d)):v=d;let y=h;p&&(l=new AbortController,o=setTimeout(()=>l.abort(),p),h?(y=l.signal,h.addEventListener("abort",()=>l.abort())):y=l.signal);const b=yield t.fetch(g.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},f),t.headers),c),body:v,signal:y}).catch(e=>{throw new i(e)}),_=b.headers.get("x-relay-error");if(_&&"true"===_)throw new s(b);if(!b.ok)throw new a(b);let w,E=(null!==(r=b.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return w="application/json"===E?yield b.json():"application/octet-stream"===E||"application/pdf"===E?yield b.blob():"text/event-stream"===E?b:"multipart/form-data"===E?yield b.formData():yield b.text(),{data:w,error:null,response:b}}catch(c){return{data:null,error:c,response:c instanceof a||c instanceof s?c.context:void 0}}finally{o&&clearTimeout(o)}}()})}}},681:(e,t)=>{function n(e){return e.endsWith("/")?e:e+"/"}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=void 0,t.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},t.ensureTrailingSlash=n,t.applySettingDefaults=function(e,t){var n,r;const{db:o,auth:i,realtime:s,global:a}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),o),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},null!==(n=null===d||void 0===d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null===a||void 0===a?void 0:a.headers)&&void 0!==r?r:{})}),accessToken:async()=>""};e.accessToken?h.accessToken=e.accessToken:delete h.accessToken;return h},t.validateSupabaseUrl=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(n(t))}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}};t.isBrowser=()=>"undefined"!==typeof window},730:(e,t,n)=>{var r=n(43),o=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,o,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var j=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var U,M=Object.assign;function L(e){if(void 0===U)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var F=!1;function q(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),i=r.stack.split("\n"),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(1!==s||1!==a)do{if(s--,0>--a||o[s]!==i[a]){var l="\n"+o[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function B(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 1:return e=q(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case O:return"Profiler";case T:return"StrictMode";case k:return"Suspense";case x:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=z(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=z(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Q(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function ie(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,Te=null;function Oe(e){if(e=_o(e)){if("function"!==typeof Ee)throw Error(i(280));var t=e.stateNode;t&&(t=Eo(t),Ee(e.stateNode,e.type,t))}}function Ie(e){Se?Te?Te.push(e):Te=[e]:Se=e}function Ce(){if(Se){var e=Se,t=Te;if(Te=Se=null,Oe(e),t)for(e=0;e<t.length;e++)Oe(t[e])}}function Ae(e,t){return e(t)}function ke(){}var xe=!1;function Ne(e,t,n){if(xe)return e(t,n);xe=!0;try{return Ae(e,t,n)}finally{xe=!1,(null!==Se||null!==Te)&&(ke(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=Eo(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Pe=!1;if(u)try{var je={};Object.defineProperty(je,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(ue){Pe=!1}function De(e,t,n,r,o,i,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ue=!1,Me=null,Le=!1,Fe=null,qe={onError:function(e){Ue=!0,Me=e}};function Be(e,t,n,r,o,i,s,a,l){Ue=!1,Me=null,De.apply(qe,arguments)}function Ge(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(Ge(e)!==e)throw Error(i(188))}function ze(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var s=o.alternate;if(null===s){if(null!==(r=o.return)){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return Ve(o),e;if(s===r)return Ve(o),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=s;else{for(var a=!1,l=o.child;l;){if(l===n){a=!0,n=o,r=s;break}if(l===r){a=!0,r=o,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=o;break}if(l===r){a=!0,r=s,n=o;break}l=l.sibling}if(!a)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Je(e):null}function Je(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Je(e);if(null!==t)return t;e=e.sibling}return null}var We=o.unstable_scheduleCallback,Ke=o.unstable_cancelCallback,Ye=o.unstable_shouldYield,$e=o.unstable_requestPaint,Qe=o.unstable_now,Xe=o.unstable_getCurrentPriorityLevel,Ze=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,it=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~o;0!==a?r=dt(a):0!==(i&=s)&&(r=dt(i))}else 0!==(s=n&~o)?r=dt(s):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-st(t)),r|=e[n],t&=~o;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var bt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Et,St,Tt,Ot,It=!1,Ct=[],At=null,kt=null,xt=null,Nt=new Map,Rt=new Map,Pt=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":kt=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Ut(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=_o(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Mt(e){var t=bo(e.target);if(null!==t){var n=Ge(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Ot(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_o(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Ft(e,t,n){Lt(e)&&n.delete(t)}function qt(){It=!1,null!==At&&Lt(At)&&(At=null),null!==kt&&Lt(kt)&&(kt=null),null!==xt&&Lt(xt)&&(xt=null),Nt.forEach(Ft),Rt.forEach(Ft)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,qt)))}function Gt(e){function t(t){return Bt(t,e)}if(0<Ct.length){Bt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Bt(At,e),null!==kt&&Bt(kt,e),null!==xt&&Bt(xt,e),Nt.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var Ht=_.ReactCurrentBatchConfig,Vt=!0;function zt(e,t,n,r){var o=bt,i=Ht.transition;Ht.transition=null;try{bt=1,Wt(e,t,n,r)}finally{bt=o,Ht.transition=i}}function Jt(e,t,n,r){var o=bt,i=Ht.transition;Ht.transition=null;try{bt=4,Wt(e,t,n,r)}finally{bt=o,Ht.transition=i}}function Wt(e,t,n,r){if(Vt){var o=Yt(e,t,n,r);if(null===o)Vr(e,t,r,Kt,n),Dt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return At=Ut(At,e,t,n,r,o),!0;case"dragenter":return kt=Ut(kt,e,t,n,r,o),!0;case"mouseover":return xt=Ut(xt,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Nt.set(i,Ut(Nt.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Rt.set(i,Ut(Rt.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<jt.indexOf(e)){for(;null!==o;){var i=_o(o);if(null!==i&&wt(i),null===(i=Yt(e,t,n,r))&&Vr(e,t,r,Kt,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var Kt=null;function Yt(e,t,n,r){if(Kt=null,null!==(e=bo(e=we(r))))if(null===(t=Ge(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,o="value"in Qt?Qt.value:Qt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===o[i-t];t++);return Zt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,i){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(o):o[s]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=M({},cn,{view:0,detail:0}),hn=on(dn),pn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:On,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=on(pn),mn=on(M({},pn,{dataTransfer:0})),gn=on(M({},dn,{relatedTarget:0})),vn=on(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),_n=on(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function On(){return Tn}var In=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:On,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=on(In),An=on(M({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kn=on(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:On})),xn=on(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=M({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=on(Nn),Pn=[9,13,27,32],jn=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Un=u&&"TextEvent"in window&&!Dn,Mn=u&&(!jn||Dn&&8<Dn&&11>=Dn),Ln=String.fromCharCode(32),Fn=!1;function qn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function zn(e,t,n,r){Ie(r),0<(t=Jr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Jn=null,Wn=null;function Kn(e){Lr(e,0)}function Yn(e){if(W(wo(e)))return e}function $n(e,t){if("change"===e)return t}var Qn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Qn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Jn&&(Jn.detachEvent("onpropertychange",nr),Wn=Jn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];zn(t,Wn,e,we(e)),Ne(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Jn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function ir(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!ar(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=ur(n,i);var s=ur(n,r);o&&s&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Jr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Tr={};function Or(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return Sr[e]=n[t];return e}u&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Ir=Or("animationend"),Cr=Or("animationiteration"),Ar=Or("animationstart"),kr=Or("transitionend"),xr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){xr.set(e,t),l(t,[e])}for(var Pr=0;Pr<Nr.length;Pr++){var jr=Nr[Pr];Rr(jr.toLowerCase(),"on"+(jr[0].toUpperCase()+jr.slice(1)))}Rr(Ir,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(Ar,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(kr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ur=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,s,a,l,c){if(Be.apply(this,arguments),Ue){if(!Ue)throw Error(i(198));var u=Me;Ue=!1,Me=null,Le||(Le=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&o.isPropagationStopped())break e;Mr(o,a,c),i=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==i&&o.isPropagationStopped())break e;Mr(o,a,c),i=l}}}if(Le)throw e=Fe,Le=!1,Fe=null,e}function Fr(e,t){var n=t[go];void 0===n&&(n=t[go]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function qr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Gr(e){if(!e[Br]){e[Br]=!0,s.forEach(function(t){"selectionchange"!==t&&(Ur.has(t)||qr(t,!1,e),qr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,qr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch($t(t)){case 1:var o=zt;break;case 4:o=Jt;break;default:o=Wt}n=o.bind(null,t,n,e),o=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===o||8===a.nodeType&&a.parentNode===o)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;s=s.return}for(;null!==a;){if(null===(s=bo(a)))return;if(5===(l=s.tag)||6===l){r=i=s;continue e}a=a.parentNode}}r=r.return}Ne(function(){var r=i,o=we(n),s=[];e:{var a=xr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=kn;break;case Ir:case Cr:case Ar:l=vn;break;case kr:l=xn;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Re(f,h))&&u.push(zr(f,m,p)))),d)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,o),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!bo(c)&&!c[mo])&&(l||a)&&(a=o.window===o?o:(a=o.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?bo(c):null)&&(c!==(d=Ge(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?a:wo(l),p=null==c?a:wo(c),(a=new u(m,f+"leave",l,n,o)).target=d,a.relatedTarget=p,m=null,bo(o)===r&&((u=new u(h,f+"enter",c,n,o)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Wr(p))f++;for(p=0,m=h;m;m=Wr(m))p++;for(;0<f-p;)u=Wr(u),f--;for(;0<p-f;)h=Wr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Wr(u),h=Wr(h)}u=null}else u=null;null!==l&&Kr(s,a,l,u,!1),null!==c&&null!==d&&Kr(s,d,c,u,!0)}if("select"===(l=(a=r?wo(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=$n;else if(Vn(a))if(Qn)g=sr;else{g=or;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ir);switch(g&&(g=g(e,r))?zn(s,g,n,o):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?wo(r):window,e){case"focusin":(Vn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,_r(s,n,o);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":_r(s,n,o)}var y;if(jn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Gn?qn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Gn&&(y=en()):(Xt="value"in(Qt=o)?Qt.value:Qt.textContent,Gn=!0)),0<(v=Jr(r,b)).length&&(b=new _n(b,e,null,n,o),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=Bn(n))&&(b.data=y))),(y=Un?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Ln);case"textInput":return(e=t.data)===Ln&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!jn&&qn(e,t)?(e=en(),Zt=Xt=Qt=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Jr(r,"onBeforeInput")).length&&(o=new _n("onBeforeInput","beforeinput",null,n,o),s.push({event:o,listeners:r}),o.data=y))}Lr(s,t)})}function zr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Jr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Re(e,n))&&r.unshift(zr(e,i,o)),null!=(i=Re(e,t))&&r.push(zr(e,i,o))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,o){for(var i=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,o?null!=(l=Re(n,i))&&s.unshift(zr(n,l,a)):o||null!=(l=Re(n,i))&&s.push(zr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(i(425))}function Zr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,so="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(ao)}:ro;function ao(e){setTimeout(function(){throw e})}function lo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Gt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Gt(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),po="__reactFiber$"+ho,fo="__reactProps$"+ho,mo="__reactContainer$"+ho,go="__reactEvents$"+ho,vo="__reactListeners$"+ho,yo="__reactHandles$"+ho;function bo(e){var t=e[po];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mo]||n[po]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[po])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function _o(e){return!(e=e[po]||e[mo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function Eo(e){return e[fo]||null}var So=[],To=-1;function Oo(e){return{current:e}}function Io(e){0>To||(e.current=So[To],So[To]=null,To--)}function Co(e,t){To++,So[To]=e.current,e.current=t}var Ao={},ko=Oo(Ao),xo=Oo(!1),No=Ao;function Ro(e,t){var n=e.type.contextTypes;if(!n)return Ao;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Po(e){return null!==(e=e.childContextTypes)&&void 0!==e}function jo(){Io(xo),Io(ko)}function Do(e,t,n){if(ko.current!==Ao)throw Error(i(168));Co(ko,t),Co(xo,n)}function Uo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(i(108,H(e)||"Unknown",o));return M({},n,r)}function Mo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ao,No=ko.current,Co(ko,e),Co(xo,xo.current),!0}function Lo(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Uo(e,t,No),r.__reactInternalMemoizedMergedChildContext=e,Io(xo),Io(ko),Co(ko,e)):Io(xo),Co(xo,n)}var Fo=null,qo=!1,Bo=!1;function Go(e){null===Fo?Fo=[e]:Fo.push(e)}function Ho(){if(!Bo&&null!==Fo){Bo=!0;var e=0,t=bt;try{var n=Fo;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fo=null,qo=!1}catch(o){throw null!==Fo&&(Fo=Fo.slice(e+1)),We(Ze,Ho),o}finally{bt=t,Bo=!1}}return null}var Vo=[],zo=0,Jo=null,Wo=0,Ko=[],Yo=0,$o=null,Qo=1,Xo="";function Zo(e,t){Vo[zo++]=Wo,Vo[zo++]=Jo,Jo=e,Wo=t}function ei(e,t,n){Ko[Yo++]=Qo,Ko[Yo++]=Xo,Ko[Yo++]=$o,$o=e;var r=Qo;e=Xo;var o=32-st(r)-1;r&=~(1<<o),n+=1;var i=32-st(t)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Qo=1<<32-st(t)+o|n<<o|r,Xo=i+e}else Qo=1<<i|n<<o|r,Xo=e}function ti(e){null!==e.return&&(Zo(e,1),ei(e,1,0))}function ni(e){for(;e===Jo;)Jo=Vo[--zo],Vo[zo]=null,Wo=Vo[--zo],Vo[zo]=null;for(;e===$o;)$o=Ko[--Yo],Ko[Yo]=null,Xo=Ko[--Yo],Ko[Yo]=null,Qo=Ko[--Yo],Ko[Yo]=null}var ri=null,oi=null,ii=!1,si=null;function ai(e,t){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function li(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,oi=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$o?{id:Qo,overflow:Xo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ri=e,oi=null,!0);default:return!1}}function ci(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ii){var t=oi;if(t){var n=t;if(!li(e,t)){if(ci(e))throw Error(i(418));t=co(n.nextSibling);var r=ri;t&&li(e,t)?ai(r,n):(e.flags=-4097&e.flags|2,ii=!1,ri=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ri=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function hi(e){if(e!==ri)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oi)){if(ci(e))throw pi(),Error(i(418));for(;t;)ai(e,t),t=co(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oi=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oi=null}}else oi=ri?co(e.stateNode.nextSibling):null;return!0}function pi(){for(var e=oi;e;)e=co(e.nextSibling)}function fi(){oi=ri=null,ii=!1}function mi(e){null===si?si=[e]:si.push(e)}var gi=_.ReactCurrentBatchConfig;function vi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=o.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bi(e){return(0,e._init)(e._payload)}function _i(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===R&&bi(i)===t.type)?((r=o(t,n.props)).ref=vi(e,t,n),r.return=e,r):((r=jc(n.type,n.key,n.props,null,e.mode,r)).ref=vi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Lc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=jc(t.type,t.key,t.props,null,e.mode,n)).ref=vi(e,null,t),n.return=e,n;case E:return(t=Lc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===o?c(e,t,n,r):null;case E:return n.key===o?u(e,t,n,r):null;case R:return p(e,t,(o=n._init)(n._payload),r)}if(te(n)||D(n))return null!==o?null:d(e,t,n,r,null);yi(e,n)}return null}function f(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case R:return f(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,o,null);yi(t,r)}return null}function m(o,i,a,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(o,d,a[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(o,d),i=s(v,i,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===a.length)return n(o,d),ii&&Zo(o,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(o,a[m],l))&&(i=s(d,i,m),null===u?c=d:u.sibling=d,u=d);return ii&&Zo(o,m),c}for(d=r(o,d);m<a.length;m++)null!==(g=f(d,o,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=s(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(o,e)}),ii&&Zo(o,m),c}function g(o,a,l,c){var u=D(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(o,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(o,m),a=s(b,a,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(o,m),ii&&Zo(o,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(o,y.value,c))&&(a=s(y,a,g),null===d?u=y:d.sibling=y,d=y);return ii&&Zo(o,g),u}for(m=r(o,m);!y.done;g++,y=l.next())null!==(y=f(m,o,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=s(y,a,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(o,e)}),ii&&Zo(o,g),u}return function e(r,i,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var c=s.key,u=i;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(r,u.sibling),(i=o(u,s.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&bi(c)===u.type){n(r,u.sibling),(i=o(u,s.props)).ref=vi(r,u,s),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===S?((i=Dc(s.props.children,r.mode,l,s.key)).return=r,r=i):((l=jc(s.type,s.key,s.props,null,r.mode,l)).ref=vi(r,i,s),l.return=r,r=l)}return a(r);case E:e:{for(u=s.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===s.containerInfo&&i.stateNode.implementation===s.implementation){n(r,i.sibling),(i=o(i,s.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Lc(s,r.mode,l)).return=r,r=i}return a(r);case R:return e(r,i,(u=s._init)(s._payload),l)}if(te(s))return m(r,i,s,l);if(D(s))return g(r,i,s,l);yi(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,s)).return=r,r=i):(n(r,i),(i=Mc(s,r.mode,l)).return=r,r=i),a(r)):n(r,i)}}var wi=_i(!0),Ei=_i(!1),Si=Oo(null),Ti=null,Oi=null,Ii=null;function Ci(){Ii=Oi=Ti=null}function Ai(e){var t=Si.current;Io(Si),e._currentValue=t}function ki(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xi(e,t){Ti=e,Ii=Oi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ni(e){var t=e._currentValue;if(Ii!==e)if(e={context:e,memoizedValue:t,next:null},null===Oi){if(null===Ti)throw Error(i(308));Oi=e,Ti.dependencies={lanes:0,firstContext:e}}else Oi=Oi.next=e;return t}var Ri=null;function Pi(e){null===Ri?Ri=[e]:Ri.push(e)}function ji(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Pi(t)):(n.next=o.next,o.next=n),t.interleaved=n,Di(e,r)}function Di(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ui=!1;function Mi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Li(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Di(e,n)}return null===(o=r.interleaved)?(t.next=t,Pi(r)):(t.next=o.next,o.next=t),r.interleaved=t,Di(e,n)}function Bi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Gi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hi(e,t,n,r){var o=e.updateQueue;Ui=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(null!==a){o.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?i=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=o.baseState;for(s=0,u=c=l=null,a=i;;){var h=a.lane,p=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=M({},d,h);break e;case 2:Ui=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=h;if(null===(a=a.next)){if(null===(a=o.shared.pending))break;a=(h=a).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{s|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Ul|=s,e.lanes=s,e.memoizedState=d}}function Vi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(i(191,o));o.call(r)}}}var zi={},Ji=Oo(zi),Wi=Oo(zi),Ki=Oo(zi);function Yi(e){if(e===zi)throw Error(i(174));return e}function $i(e,t){switch(Co(Ki,t),Co(Wi,e),Co(Ji,zi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Io(Ji),Co(Ji,t)}function Qi(){Io(Ji),Io(Wi),Io(Ki)}function Xi(e){Yi(Ki.current);var t=Yi(Ji.current),n=le(t,e.type);t!==n&&(Co(Wi,e),Co(Ji,n))}function Zi(e){Wi.current===e&&(Io(Ji),Io(Wi))}var es=Oo(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function rs(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var os=_.ReactCurrentDispatcher,is=_.ReactCurrentBatchConfig,ss=0,as=null,ls=null,cs=null,us=!1,ds=!1,hs=0,ps=0;function fs(){throw Error(i(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function gs(e,t,n,r,o,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,os.current=null===e||null===e.memoizedState?Zs:ea,e=n(r,o),ds){s=0;do{if(ds=!1,hs=0,25<=s)throw Error(i(301));s+=1,cs=ls=null,t.updateQueue=null,os.current=ta,e=n(r,o)}while(ds)}if(os.current=Xs,t=null!==ls&&null!==ls.next,ss=0,cs=ls=as=null,us=!1,t)throw Error(i(300));return e}function vs(){var e=0!==hs;return hs=0,e}function ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?as.memoizedState=cs=e:cs=cs.next=e,cs}function bs(){if(null===ls){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===cs?as.memoizedState:cs.next;if(null!==t)cs=t,ls=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===cs?as.memoizedState=cs=e:cs=cs.next=e}return cs}function _s(e,t){return"function"===typeof t?t(e):t}function ws(e){var t=bs(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ls,o=r.baseQueue,s=n.pending;if(null!==s){if(null!==o){var a=o.next;o.next=s.next,s.next=a}r.baseQueue=o=s,n.pending=null}if(null!==o){s=o.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ss&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,as.lanes|=d,Ul|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{s=o.lane,as.lanes|=s,Ul|=s,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Es(e){var t=bs(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(null!==o){n.pending=null;var a=o=o.next;do{s=e(s,a.action),a=a.next}while(a!==o);ar(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ss(){}function Ts(e,t){var n=as,r=bs(),o=t(),s=!ar(r.memoizedState,o);if(s&&(r.memoizedState=o,ba=!0),r=r.queue,Us(Cs.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(n.flags|=2048,Ns(9,Is.bind(null,n,r,o,t),void 0,null),null===kl)throw Error(i(349));0!==(30&ss)||Os(n,t,o)}return o}function Os(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Is(e,t,n,r){t.value=n,t.getSnapshot=r,As(t)&&ks(e)}function Cs(e,t,n){return n(function(){As(t)&&ks(e)})}function As(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function ks(e){var t=Di(e,1);null!==t&&nc(t,e,1,-1)}function xs(e){var t=ys();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:e},t.queue=e,e=e.dispatch=Ks.bind(null,as,e),[t.memoizedState,e]}function Ns(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Rs(){return bs().memoizedState}function Ps(e,t,n,r){var o=ys();as.flags|=e,o.memoizedState=Ns(1|t,n,void 0,void 0===r?null:r)}function js(e,t,n,r){var o=bs();r=void 0===r?null:r;var i=void 0;if(null!==ls){var s=ls.memoizedState;if(i=s.destroy,null!==r&&ms(r,s.deps))return void(o.memoizedState=Ns(t,n,i,r))}as.flags|=e,o.memoizedState=Ns(1|t,n,i,r)}function Ds(e,t){return Ps(8390656,8,e,t)}function Us(e,t){return js(2048,8,e,t)}function Ms(e,t){return js(4,2,e,t)}function Ls(e,t){return js(4,4,e,t)}function Fs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,js(4,4,Fs.bind(null,t,e),n)}function Bs(){}function Gs(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hs(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Vs(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),as.lanes|=n,Ul|=n,e.baseState=!0),t)}function zs(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=is.transition;is.transition={};try{e(!1),t()}finally{bt=n,is.transition=r}}function Js(){return bs().memoizedState}function Ws(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ys(e))$s(t,n);else if(null!==(n=ji(e,t,n,r))){nc(n,e,r,ec()),Qs(n,t,r)}}function Ks(e,t,n){var r=tc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ys(e))$s(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=i(s,n);if(o.hasEagerState=!0,o.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(o.next=o,Pi(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(c){}null!==(n=ji(e,t,o,r))&&(nc(n,e,r,o=ec()),Qs(n,t,r))}}function Ys(e){var t=e.alternate;return e===as||null!==t&&t===as}function $s(e,t){ds=us=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qs(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xs={readContext:Ni,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},Zs={readContext:Ni,useCallback:function(e,t){return ys().memoizedState=[e,void 0===t?null:t],e},useContext:Ni,useEffect:Ds,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ps(4194308,4,Fs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ps(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ps(4,2,e,t)},useMemo:function(e,t){var n=ys();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ys();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ws.bind(null,as,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ys().memoizedState=e},useState:xs,useDebugValue:Bs,useDeferredValue:function(e){return ys().memoizedState=e},useTransition:function(){var e=xs(!1),t=e[0];return e=zs.bind(null,e[1]),ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=as,o=ys();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===kl)throw Error(i(349));0!==(30&ss)||Os(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Ds(Cs.bind(null,r,s,e),[e]),r.flags|=2048,Ns(9,Is.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ys(),t=kl.identifierPrefix;if(ii){var n=Xo;t=":"+t+"R"+(n=(Qo&~(1<<32-st(Qo)-1)).toString(32)+n),0<(n=hs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ps++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Ni,useCallback:Gs,useContext:Ni,useEffect:Us,useImperativeHandle:qs,useInsertionEffect:Ms,useLayoutEffect:Ls,useMemo:Hs,useReducer:ws,useRef:Rs,useState:function(){return ws(_s)},useDebugValue:Bs,useDeferredValue:function(e){return Vs(bs(),ls.memoizedState,e)},useTransition:function(){return[ws(_s)[0],bs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:Ts,useId:Js,unstable_isNewReconciler:!1},ta={readContext:Ni,useCallback:Gs,useContext:Ni,useEffect:Us,useImperativeHandle:qs,useInsertionEffect:Ms,useLayoutEffect:Ls,useMemo:Hs,useReducer:Es,useRef:Rs,useState:function(){return Es(_s)},useDebugValue:Bs,useDeferredValue:function(e){var t=bs();return null===ls?t.memoizedState=e:Vs(t,ls.memoizedState,e)},useTransition:function(){return[Es(_s)[0],bs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:Ts,useId:Js,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var oa={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),i=Fi(r,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=qi(e,i,o))&&(nc(t,e,o,r),Bi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),i=Fi(r,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=qi(e,i,o))&&(nc(t,e,o,r),Bi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),o=Fi(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=qi(e,o,r))&&(nc(t,e,r,n),Bi(t,e,r))}};function ia(e,t,n,r,o,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(o,i))}function sa(e,t,n){var r=!1,o=Ao,i=t.contextType;return"object"===typeof i&&null!==i?i=Ni(i):(o=Po(t)?No:ko.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ro(e,o):Ao),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=oa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oa.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Mi(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=Ni(i):(i=Po(t)?No:ko.current,o.context=Ro(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ra(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&oa.enqueueReplaceState(o,o.state,null),Hi(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ha="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vl||(Vl=!0,zl=r),da(0,t)},n}function fa(e,t,n){(n=Fi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){da(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Jl?Jl=new Set([this]):Jl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Oc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,qi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var ya=_.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Ei(t,null,n,r):wi(t,e.child,n,r)}function wa(e,t,n,r,o){n=n.render;var i=t.ref;return xi(t,o),r=gs(e,t,n,r,i,o),n=vs(),null===e||ba?(ii&&n&&ti(t),t.flags|=1,_a(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Va(e,t,o))}function Ea(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Rc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=jc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Sa(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var s=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Va(e,t,o)}return t.flags|=1,(e=Pc(i,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,Va(e,t,o);0!==(131072&e.flags)&&(ba=!0)}}return Ia(e,t,n,r,o)}function Ta(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Co(Pl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Co(Pl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Co(Pl,Rl),Rl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Co(Pl,Rl),Rl|=r;return _a(e,t,o,n),t.child}function Oa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ia(e,t,n,r,o){var i=Po(n)?No:ko.current;return i=Ro(t,i),xi(t,o),n=gs(e,t,n,r,i,o),r=vs(),null===e||ba?(ii&&r&&ti(t),t.flags|=1,_a(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Va(e,t,o))}function Ca(e,t,n,r,o){if(Po(n)){var i=!0;Mo(t)}else i=!1;if(xi(t,o),null===t.stateNode)Ha(e,t),sa(t,n,r),la(t,n,r,o),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ni(c):c=Ro(t,c=Po(n)?No:ko.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,s,r,c),Ui=!1;var h=t.memoizedState;s.state=h,Hi(t,r,s,o),l=t.memoizedState,a!==r||h!==l||xo.current||Ui?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Ui||ia(t,n,a,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Li(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ni(l):l=Ro(t,l=Po(n)?No:ko.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,s,r,l),Ui=!1,h=t.memoizedState,s.state=h,Hi(t,r,s,o);var f=t.memoizedState;a!==d||h!==f||xo.current||Ui?("function"===typeof p&&(ra(t,n,p,r),f=t.memoizedState),(c=Ui||ia(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Aa(e,t,n,r,i,o)}function Aa(e,t,n,r,o,i){Oa(e,t);var s=0!==(128&t.flags);if(!r&&!s)return o&&Lo(t,n,!1),Va(e,t,i);r=t.stateNode,ya.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=wi(t,e.child,null,i),t.child=wi(t,null,a,i)):_a(e,t,a,i),t.memoizedState=r.state,o&&Lo(t,n,!0),t.child}function ka(e){var t=e.stateNode;t.pendingContext?Do(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Do(0,t.context,!1),$i(e,t.containerInfo)}function xa(e,t,n,r,o){return fi(),mi(o),t.flags|=256,_a(e,t,n,r),t.child}var Na,Ra,Pa,ja,Da={dehydrated:null,treeContext:null,retryLane:0};function Ua(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ma(e,t,n){var r,o=t.pendingProps,s=es.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Co(es,1&s),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,a?(o=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Uc(l,o,0,null),e=Dc(e,o,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ua(n),t.memoizedState=Da,e):La(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,o,s,a){if(n)return 256&t.flags?(t.flags&=-257,Fa(e,t,a,r=ua(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=Uc({mode:"visible",children:r.children},o,0,null),(s=Dc(s,o,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&wi(t,e.child,null,a),t.child.memoizedState=Ua(a),t.memoizedState=Da,s);if(0===(1&t.mode))return Fa(e,t,a,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,Fa(e,t,a,r=ua(s=Error(i(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=kl)){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|a))?0:o)&&o!==s.retryLane&&(s.retryLane=o,Di(e,o),nc(r,e,o,-1))}return mc(),Fa(e,t,a,r=ua(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,oi=co(o.nextSibling),ri=t,ii=!0,si=null,null!==e&&(Ko[Yo++]=Qo,Ko[Yo++]=Xo,Ko[Yo++]=$o,Qo=e.id,Xo=e.overflow,$o=t),t=La(t,r.children),t.flags|=4096,t)}(e,t,l,o,r,s,n);if(a){a=o.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==s?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Pc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Pc(r,a):(a=Dc(a,l,n,null)).flags|=2,a.return=t,o.return=t,o.sibling=a,t.child=o,o=a,a=t.child,l=null===(l=e.child.memoizedState)?Ua(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Da,o}return e=(a=e.child).sibling,o=Pc(a,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function La(e,t){return(t=Uc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fa(e,t,n,r){return null!==r&&mi(r),wi(t,e.child,null,n),(e=La(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qa(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ki(e.return,t,n)}function Ba(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Ga(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=es.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qa(e,n,t);else if(19===e.tag)qa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Co(es,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ba(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ts(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ba(t,!0,n,null,i);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Va(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ul|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function za(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ja(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wa(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ja(t),null;case 1:case 17:return Po(t.type)&&jo(),Ja(t),null;case 3:return r=t.stateNode,Qi(),Io(xo),Io(ko),rs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==si&&(sc(si),si=null))),Ra(e,t),Ja(t),null;case 5:Zi(t);var o=Yi(Ki.current);if(n=t.type,null!==e&&null!=t.stateNode)Pa(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ja(t),null}if(e=Yi(Ji.current),hi(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[po]=t,r[fo]=s,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(o=0;o<Dr.length;o++)Fr(Dr[o],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":$(r,s),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fr("invalid",r);break;case"textarea":oe(r,s),Fr("invalid",r)}for(var l in ye(n,s),o=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),o=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),o=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":J(r),Z(r,s,!0);break;case"textarea":J(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[po]=t,e[fo]=r,Na(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),o=r;break;case"iframe":case"object":case"embed":Fr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Dr.length;o++)Fr(Dr[o],e);o=r;break;case"source":Fr("error",e),o=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),o=r;break;case"details":Fr("toggle",e),o=r;break;case"input":$(e,r),o=Y(e,r),Fr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=M({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Fr("invalid",e)}for(s in ye(n,o),c=o)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Fr("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":J(e),Z(e,r,!1);break;case"textarea":J(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ja(t),null;case 6:if(e&&null!=t.stateNode)ja(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Yi(Ki.current),Yi(Ji.current),hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[po]=t,(s=r.nodeValue!==n)&&null!==(e=ri))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[po]=t,t.stateNode=r}return Ja(t),null;case 13:if(Io(es),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))pi(),fi(),t.flags|=98560,s=!1;else if(s=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(i(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(i(317));s[po]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ja(t),s=!1}else null!==si&&(sc(si),si=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===jl&&(jl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ja(t),null);case 4:return Qi(),Ra(e,t),null===e&&Gr(t.stateNode.containerInfo),Ja(t),null;case 10:return Ai(t.type._context),Ja(t),null;case 19:if(Io(es),null===(s=t.memoizedState))return Ja(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)za(s,!1);else{if(0!==jl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,za(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Co(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Qe()>Gl&&(t.flags|=128,r=!0,za(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ts(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),za(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ii)return Ja(t),null}else 2*Qe()-s.renderingStartTime>Gl&&1073741824!==n&&(t.flags|=128,r=!0,za(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qe(),t.sibling=null,n=es.current,Co(es,r?1&n|2:1&n),t):(Ja(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Ja(t),6&t.subtreeFlags&&(t.flags|=8192)):Ja(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ka(e,t){switch(ni(t),t.tag){case 1:return Po(t.type)&&jo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qi(),Io(xo),Io(ko),rs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zi(t),null;case 13:if(Io(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Io(es),null;case 4:return Qi(),null;case 10:return Ai(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Na=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Pa=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Yi(Ji.current);var i,s=null;switch(n){case"input":o=Y(e,o),r=Y(e,r),s=[];break;case"select":o=M({},o,{value:void 0}),r=M({},r,{value:void 0}),s=[];break;case"textarea":o=re(e,o),r=re(e,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var l=o[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},ja=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,$a=!1,Qa="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&el(t,n,i)}o=o.next}while(o!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[po],delete t[fo],delete t[go],delete t[vo],delete t[yo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(a){}switch(n.tag){case 5:$a||Za(n,t);case 6:var r=ul,o=dl;ul=null,hl(e,t,n),dl=o,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),Gt(e)):lo(ul,n.stateNode));break;case 4:r=ul,o=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=o;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,void 0!==s&&(0!==(2&i)||0!==(4&i))&&el(n,t,s),o=o.next}while(o!==r)}hl(e,t,n);break;case 1:if(!$a&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tc(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?($a=(r=$a)||null!==n.memoizedState,hl(e,t,n),$a=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qa),t.forEach(function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));pl(s,a,o),ul=null,dl=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(u){Tc(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Tc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Tc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(g){Tc(e,e.return,g)}}if(4&r&&null!=(o=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Q(o,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(o,h):"dangerouslySetInnerHTML"===d?de(o,h):"children"===d?he(o,h):b(o,d,h,u)}switch(l){case"input":X(o,s);break;case"textarea":ie(o,s);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(o,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(o,!!s.multiple,s.defaultValue,!0):ne(o,!!s.multiple,s.multiple?[]:"",!1))}o[fo]=s}catch(g){Tc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(g){Tc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gt(t.containerInfo)}catch(g){Tc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(o=e.child).flags&&(s=null!==o.memoizedState,o.stateNode.isHidden=s,!s||null!==o.alternate&&null!==o.alternate.memoizedState||(Bl=Qe())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?($a=(u=$a)||d,ml(t,e),$a=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xa=e,d=e.child;null!==d;){for(h=Xa=d;null!==Xa;){switch(f=(p=Xa).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Za(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tc(r,n,g)}}break;case 5:Za(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==f?(f.return=p,Xa=f):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{o=h.stateNode,u?"function"===typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Tc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Tc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(he(o,""),r.flags&=-33),cl(e,al(e),o);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,al(e),s);break;default:throw Error(i(161))}}catch(a){Tc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Xa=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var o=Xa,i=o.child;if(22===o.tag&&r){var s=null!==o.memoizedState||Ya;if(!s){var a=o.alternate,l=null!==a&&null!==a.memoizedState||$a;a=Ya;var c=$a;if(Ya=s,($a=l)&&!c)for(Xa=o;null!==Xa;)l=(s=Xa).child,22===s.tag&&null!==s.memoizedState?El(o):null!==l?(l.return=s,Xa=l):El(o);for(;null!==i;)Xa=i,bl(i,t,n),i=i.sibling;Xa=o,Ya=a,$a=c}_l(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,Xa=i):_l(e)}}function _l(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$a||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$a)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Vi(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vi(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Gt(h)}}}break;default:throw Error(i(163))}$a||512&t.flags&&ol(t)}catch(p){Tc(t,t.return,p)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function wl(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function El(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Tc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(l){Tc(t,o,l)}}var i=t.return;try{ol(t)}catch(l){Tc(t,i,l)}break;case 5:var s=t.return;try{ol(t)}catch(l){Tc(t,s,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Sl,Tl=Math.ceil,Ol=_.ReactCurrentDispatcher,Il=_.ReactCurrentOwner,Cl=_.ReactCurrentBatchConfig,Al=0,kl=null,xl=null,Nl=0,Rl=0,Pl=Oo(0),jl=0,Dl=null,Ul=0,Ml=0,Ll=0,Fl=null,ql=null,Bl=0,Gl=1/0,Hl=null,Vl=!1,zl=null,Jl=null,Wl=!1,Kl=null,Yl=0,$l=0,Ql=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Al)?Qe():-1!==Xl?Xl:Xl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Nl?Nl&-Nl:null!==gi.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,r){if(50<$l)throw $l=0,Ql=null,Error(i(185));vt(e,n,r),0!==(2&Al)&&e===kl||(e===kl&&(0===(2&Al)&&(Ml|=n),4===jl&&ac(e,Nl)),rc(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Gl=Qe()+500,qo&&Ho()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-st(i),a=1<<s,l=o[s];-1===l?0!==(a&n)&&0===(a&r)||(o[s]=pt(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}(e,t);var r=ht(e,e===kl?Nl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){qo=!0,Go(e)}(lc.bind(null,e)):Go(lc.bind(null,e)),so(function(){0===(6&Al)&&Ho()}),n=null;else{switch(_t(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=kc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Xl=-1,Zl=0,0!==(6&Al))throw Error(i(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ht(e,e===kl?Nl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var o=Al;Al|=2;var s=fc();for(kl===e&&Nl===t||(Hl=null,Gl=Qe()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}Ci(),Ol.current=s,Al=o,null!==xl?t=0:(kl=null,Nl=0,t=jl)}if(0!==t){if(2===t&&(0!==(o=ft(e))&&(r=o,t=ic(e,o))),1===t)throw n=Dl,hc(e,0),ac(e,r),rc(e,Qe()),n;if(6===t)ac(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!ar(i(),o))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=gc(e,r))&&(0!==(s=ft(e))&&(r=s,t=ic(e,s))),1===t))throw n=Dl,hc(e,0),ac(e,r),rc(e,Qe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,ql,Hl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Bl+500-Qe())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(wc.bind(null,e,ql,Hl),t);break}wc(e,ql,Hl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>o&&(o=a),r&=~s}if(r=o,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ro(wc.bind(null,e,ql,Hl),r);break}wc(e,ql,Hl);break;default:throw Error(i(329))}}}return rc(e,Qe()),e.callbackNode===n?oc.bind(null,e):null}function ic(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=ql,ql=n,null!==t&&sc(t)),e}function sc(e){null===ql?ql=e:ql.push.apply(ql,e)}function ac(e,t){for(t&=~Ll,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Al))throw Error(i(327));Ec();var t=ht(e,0);if(0===(1&t))return rc(e,Qe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Dl,hc(e,0),ac(e,t),rc(e,Qe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,ql,Hl),rc(e,Qe()),null}function cc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Gl=Qe()+500,qo&&Ho())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&Al)&&Ec();var t=Al;Al|=1;var n=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=n,0===(6&(Al=t))&&Ho()}}function dc(){Rl=Pl.current,Io(Pl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==xl)for(n=xl.return;null!==n;){var r=n;switch(ni(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&jo();break;case 3:Qi(),Io(xo),Io(ko),rs();break;case 5:Zi(r);break;case 4:Qi();break;case 13:case 19:Io(es);break;case 10:Ai(r.type._context);break;case 22:case 23:dc()}n=n.return}if(kl=e,xl=e=Pc(e.current,null),Nl=Rl=t,jl=0,Dl=null,Ll=Ml=Ul=0,ql=Fl=null,null!==Ri){for(t=0;t<Ri.length;t++)if(null!==(r=(n=Ri[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var s=i.next;i.next=o,r.next=s}n.pending=r}Ri=null}return e}function pc(e,t){for(;;){var n=xl;try{if(Ci(),os.current=Xs,us){for(var r=as.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}us=!1}if(ss=0,cs=ls=as=null,ds=!1,hs=0,Il.current=null,null===n||null===n.return){jl=1,Dl=t,xl=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Nl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ga(a);if(null!==f){f.flags&=-257,va(f,a,l,0,t),1&f.mode&&ma(s,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(s,u,t),mc();break e}c=Error(i(426))}else if(ii&&1&l.mode){var v=ga(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),mi(ca(c,l));break e}}s=c=ca(c,l),4!==jl&&(jl=2),null===Fl?Fl=[s]:Fl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Gi(s,pa(0,c,t));break e;case 1:l=c;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Jl||!Jl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Gi(s,fa(s,l,t));break e}}s=s.return}while(null!==s)}_c(n)}catch(_){t=_,xl===n&&null!==n&&(xl=n=n.return);continue}break}}function fc(){var e=Ol.current;return Ol.current=Xs,null===e?Xs:e}function mc(){0!==jl&&3!==jl&&2!==jl||(jl=4),null===kl||0===(268435455&Ul)&&0===(268435455&Ml)||ac(kl,Nl)}function gc(e,t){var n=Al;Al|=2;var r=fc();for(kl===e&&Nl===t||(Hl=null,hc(e,t));;)try{vc();break}catch(o){pc(e,o)}if(Ci(),Al=n,Ol.current=r,null!==xl)throw Error(i(261));return kl=null,Nl=0,jl}function vc(){for(;null!==xl;)bc(xl)}function yc(){for(;null!==xl&&!Ye();)bc(xl)}function bc(e){var t=Sl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?_c(e):xl=t,Il.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wa(n,t,Rl)))return void(xl=n)}else{if(null!==(n=Ka(n,t)))return n.flags&=32767,void(xl=n);if(null===e)return jl=6,void(xl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(xl=t);xl=t=e}while(null!==t);0===jl&&(jl=5)}function wc(e,t,n){var r=bt,o=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,r){do{Ec()}while(null!==Kl);if(0!==(6&Al))throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-st(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,s),e===kl&&(xl=kl=null,Nl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,kc(tt,function(){return Ec(),null})),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Cl.transition,Cl.transition=null;var a=bt;bt=1;var l=Al;Al|=4,Il.current=null,function(e,t){if(eo=Vt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==o&&3!==h.nodeType||(l=a+o),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===o&&(l=a),p===s&&++d===r&&(c=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Vt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(i(163))}}catch(w){Tc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(to),Vt=!!eo,to=eo=null,e.current=n,yl(n,e,o),$e(),Al=l,bt=a,Cl.transition=s}else e.current=n;if(Wl&&(Wl=!1,Kl=e,Yl=o),s=e.pendingLanes,0===s&&(Jl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Vl)throw Vl=!1,e=zl,zl=null,e;0!==(1&Yl)&&0!==e.tag&&Ec(),s=e.pendingLanes,0!==(1&s)?e===Ql?$l++:($l=0,Ql=e):$l=0,Ho()}(e,t,n,r)}finally{Cl.transition=o,bt=r}return null}function Ec(){if(null!==Kl){var e=_t(Yl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Yl=0,0!==(6&Al))throw Error(i(331));var o=Al;for(Al|=4,Xa=e.current;null!==Xa;){var s=Xa,a=s.child;if(0!==(16&Xa.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xa=u;null!==Xa;){var d=Xa;switch(d.tag){case 0:case 11:case 15:nl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Xa=h;else for(;null!==Xa;){var p=(d=Xa).sibling,f=d.return;if(il(d),d===u){Xa=null;break}if(null!==p){p.return=f,Xa=p;break}Xa=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xa=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(s=Xa).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Xa=y;break e}Xa=s.return}}var b=e.current;for(Xa=b;null!==Xa;){var _=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==_)_.return=a,Xa=_;else e:for(a=b;null!==Xa;){if(0!==(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(E){Tc(l,l.return,E)}if(l===a){Xa=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xa=w;break e}Xa=l.return}}if(Al=o,Ho(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(E){}r=!0}return r}finally{bt=n,Cl.transition=t}}return!1}function Sc(e,t,n){e=qi(e,t=pa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Tc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Jl||!Jl.has(r))){t=qi(t,e=fa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Oc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,kl===e&&(Nl&n)===n&&(4===jl||3===jl&&(130023424&Nl)===Nl&&500>Qe()-Bl?hc(e,0):Ll|=n),rc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Di(e,t))&&(vt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Ic(e,n)}function kc(e,t){return We(e,t)}function xc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(e,t,n,r){return new xc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Nc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jc(e,t,n,r,o,s){var a=2;if(r=e,"function"===typeof e)Rc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Dc(n.children,o,s,t);case T:a=8,o|=8;break;case O:return(e=Nc(12,n,t,2|o)).elementType=O,e.lanes=s,e;case k:return(e=Nc(13,n,t,o)).elementType=k,e.lanes=s,e;case x:return(e=Nc(19,n,t,o)).elementType=x,e.lanes=s,e;case P:return Uc(n,o,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:a=10;break e;case C:a=9;break e;case A:a=11;break e;case N:a=14;break e;case R:a=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Nc(a,n,t,o)).elementType=e,t.type=r,t.lanes=s,t}function Dc(e,t,n,r){return(e=Nc(7,e,r,t)).lanes=n,e}function Uc(e,t,n,r){return(e=Nc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Nc(6,e,null,t)).lanes=n,e}function Lc(e,t,n){return(t=Nc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function qc(e,t,n,r,o,i,s,a,l){return e=new Fc(e,t,n,a,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Nc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mi(i),e}function Bc(e){if(!e)return Ao;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Po(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Po(n))return Uo(e,n,t)}return t}function Gc(e,t,n,r,o,i,s,a,l){return(e=qc(n,r,!0,e,0,i,0,a,l)).context=Bc(null),n=e.current,(i=Fi(r=ec(),o=tc(n))).callback=void 0!==t&&null!==t?t:null,qi(n,i,o),e.current.lanes=o,vt(e,o,r),rc(e,r),e}function Hc(e,t,n,r){var o=t.current,i=ec(),s=tc(o);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=qi(o,t,s))&&(nc(e,o,s,i),Bi(e,o,s)),s}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function zc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Jc(e,t){zc(e,t),(e=e.alternate)&&zc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||xo.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:ka(t),fi();break;case 5:Xi(t);break;case 1:Po(t.type)&&Mo(t);break;case 4:$i(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Co(Si,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Co(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ma(e,t,n):(Co(es,1&es.current),null!==(e=Va(e,t,n))?e.sibling:null);Co(es,1&es.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ga(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Co(es,es.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Va(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,ii&&0!==(1048576&t.flags)&&ei(t,Wo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var o=Ro(t,ko.current);xi(t,n),o=gs(null,t,r,e,o,n);var s=vs();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Po(r)?(s=!0,Mo(t)):s=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Mi(t),o.updater=oa,t.stateNode=o,o._reactInternals=t,la(t,r,e,n),t=Aa(null,t,r,!0,s,n)):(t.tag=0,ii&&s&&ti(t),_a(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===N)return 14}return 2}(r),e=na(r,e),o){case 0:t=Ia(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=wa(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,na(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ia(e,t,r,o=t.elementType===r?o:na(r,o),n);case 1:return r=t.type,o=t.pendingProps,Ca(e,t,r,o=t.elementType===r?o:na(r,o),n);case 3:e:{if(ka(t),null===e)throw Error(i(387));r=t.pendingProps,o=(s=t.memoizedState).element,Li(e,t),Hi(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=xa(e,t,r,n,o=ca(Error(i(423)),t));break e}if(r!==o){t=xa(e,t,r,n,o=ca(Error(i(424)),t));break e}for(oi=co(t.stateNode.containerInfo.firstChild),ri=t,ii=!0,si=null,n=Ei(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===o){t=Va(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return Xi(t),null===e&&ui(t),r=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,a=o.children,no(r,o)?a=null:null!==s&&no(r,s)&&(t.flags|=32),Oa(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&ui(t),null;case 13:return Ma(e,t,n);case 4:return $i(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wi(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,wa(e,t,r,o=t.elementType===r?o:na(r,o),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,a=o.value,Co(Si,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===o.children&&!xo.current){t=Va(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Fi(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),ki(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(i(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ki(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}_a(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,xi(t,n),r=r(o=Ni(o)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return o=na(r=t.type,t.pendingProps),Ea(e,t,r,o=na(r.type,o),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:na(r,o),Ha(e,t),t.tag=1,Po(r)?(e=!0,Mo(t)):e=!1,xi(t,n),sa(t,r,o),la(t,r,o,n),Aa(null,t,r,!0,e,n);case 19:return Ga(e,t,n);case 22:return Ta(e,t,n)}throw Error(i(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if("function"===typeof o){var a=o;o=function(){var e=Vc(s);a.call(e)}}Hc(t,s,e,o)}else s=function(e,t,n,r,o){if(o){if("function"===typeof r){var i=r;r=function(){var e=Vc(s);i.call(e)}}var s=Gc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=s,e[mo]=s.current,Gr(8===e.nodeType?e.parentNode:e),uc(),s}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var a=r;r=function(){var e=Vc(l);a.call(e)}}var l=qc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[mo]=l.current,Gr(8===e.nodeType?e.parentNode:e),uc(function(){Hc(t,l,n,r)}),l}(n,t,e,o,r);return Vc(s)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Hc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Hc(null,e,null,null)}),t[mo]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Qe()),0===(6&Al)&&(Gl=Qe()+500,Ho()))}break;case 13:uc(function(){var t=Di(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Jc(e,1)}},Et=function(e){if(13===e.tag){var t=Di(e,134217728);if(null!==t)nc(t,e,134217728,ec());Jc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Di(e,t);if(null!==n)nc(n,e,t,ec());Jc(e,t)}},Tt=function(){return bt},Ot=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Eo(r);if(!o)throw Error(i(90));W(r),X(r,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,ke=uc;var eu={usingClientEntryPoint:!1,Events:[_o,wo,Eo,Ie,Ce,cc]},tu={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=ze(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{ot=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(i(299));var n=!1,r="",o=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=qc(e,1,!1,null,0,n,0,r,o),e[mo]=t.current,Gr(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=ze(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(i(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,o=!1,s="",a=Wc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Gc(t,null,e,1,null!=n?n:null,o,0,s,a),e[mo]=t.current,Gr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Yc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[mo]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},736:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(326).__importDefault(n(374)),o=new RegExp("[,()]");class i extends r.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}regexMatch(e,t){return this.url.searchParams.append(e,"match.".concat(t)),this}regexIMatch(e,t){return this.url.searchParams.append(e,"imatch.".concat(t)),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}isDistinct(e,t){return this.url.searchParams.append(e,"isdistinct.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&o.test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="";"plain"===r?o="pl":"phrase"===r?o="ph":"websearch"===r&&(o="w");const i=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(o,"fts").concat(i,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))}),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?"".concat(n,".or"):"or";return this.url.searchParams.append(r,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}}t.default=i},829:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(326).__importDefault(n(736));t.default=class{constructor(e,t){let{headers:n={},schema:r,fetch:o}=t;this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=o}select(e,t){const{head:n=!1,count:o}=null!==t&&void 0!==t?t:{},i=n?"HEAD":"GET";let s=!1;const a=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e)).join("");return this.url.searchParams.set("select",a),o&&this.headers.append("Prefer","count=".concat(o)),new r.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o;if(t&&this.headers.append("Prefer","count=".concat(t)),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(o=this.fetch)&&void 0!==o?o:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:o,defaultToNull:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;if(this.headers.append("Prefer","resolution=".concat(n?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),o&&this.headers.append("Prefer","count=".concat(o)),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return t&&this.headers.append("Prefer","count=".concat(t)),new r.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new r.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},853:(e,t,n)=>{e.exports=n(234)},887:(e,t,n)=>{n.r(t),n.d(t,{StorageAnalyticsClient:()=>D,StorageApiError:()=>s,StorageClient:()=>ne,StorageError:()=>o,StorageUnknownError:()=>a,StorageVectorsApiError:()=>F,StorageVectorsClient:()=>Z,StorageVectorsError:()=>M,StorageVectorsErrorCode:()=>B,StorageVectorsUnknownError:()=>q,VectorBucketApi:()=>X,VectorBucketScope:()=>ee,VectorDataApi:()=>Q,VectorIndexApi:()=>$,VectorIndexScope:()=>te,isPlainObject:()=>V,isStorageError:()=>i,isStorageVectorsError:()=>L,normalizeToFloat32:()=>z,resolveFetch:()=>G,resolveResponse:()=>H,validateVectorDimension:()=>J});var r=n(326);class o extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function i(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class s extends o{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class a extends o{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const l=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},c=e=>{if(Array.isArray(e))return e.map(e=>c(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,r]=e;const o=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[o]=c(r)}),t},u=e=>{var t;return e.msg||e.message||e.error_description||("string"===typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},d=(e,t,n)=>(0,r.__awaiter)(void 0,void 0,void 0,function*(){const r=yield Response;e instanceof r&&!(null===n||void 0===n?void 0:n.noResolveJson)?e.json().then(n=>{const r=e.status||500,o=(null===n||void 0===n?void 0:n.statusCode)||r+"";t(new s(u(n),r,o))}).catch(e=>{t(new a(u(e),e))}):t(new a(u(e),e))}),h=(e,t,n,r)=>{const o={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),o.body=JSON.stringify(r)):o.body=r,(null===t||void 0===t?void 0:t.duplex)&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),n)):o};function p(e,t,n,o,i,s){return(0,r.__awaiter)(this,void 0,void 0,function*(){return new Promise((r,a)=>{e(n,h(t,o,i,s)).then(e=>{if(!e.ok)throw e;return(null===o||void 0===o?void 0:o.noResolveJson)?e:e.json()}).then(e=>r(e)).catch(e=>d(e,a,o))})})}function f(e,t,n,o){return(0,r.__awaiter)(this,void 0,void 0,function*(){return p(e,"GET",t,n,o)})}function m(e,t,n,o,i){return(0,r.__awaiter)(this,void 0,void 0,function*(){return p(e,"POST",t,o,i,n)})}function g(e,t,n,o,i){return(0,r.__awaiter)(this,void 0,void 0,function*(){return p(e,"PUT",t,o,i,n)})}function v(e,t,n,o,i){return(0,r.__awaiter)(this,void 0,void 0,function*(){return p(e,"DELETE",t,o,i,n)})}class y{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}}var b;b=Symbol.toStringTag;const _=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[b]="BlobDownloadBuilder",this.promise=null}asStream(){return new y(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(i(e))return{data:null,error:e};throw e}})}},w={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},E={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class S{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=l(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,o){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{let r;const i=Object.assign(Object.assign({},E),o);let s=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const a=i.metadata;if("undefined"!==typeof Blob&&n instanceof Blob)r=new FormData,r.append("cacheControl",i.cacheControl),a&&r.append("metadata",this.encodeMetadata(a)),r.append("",n);else if("undefined"!==typeof FormData&&n instanceof FormData)r=n,r.has("cacheControl")||r.append("cacheControl",i.cacheControl),a&&!r.has("metadata")&&r.append("metadata",this.encodeMetadata(a));else{r=n,s["cache-control"]="max-age=".concat(i.cacheControl),s["content-type"]=i.contentType,a&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(a)));("undefined"!==typeof ReadableStream&&r instanceof ReadableStream||r&&"object"===typeof r&&"pipe"in r&&"function"===typeof r.pipe)&&!i.duplex&&(i.duplex="half")}(null===o||void 0===o?void 0:o.headers)&&(s=Object.assign(Object.assign({},s),o.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?g:m)(this.fetch,"".concat(this.url,"/object/").concat(c),r,Object.assign({headers:s},(null===i||void 0===i?void 0:i.duplex)?{duplex:i.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(i(r))return{data:null,error:r};throw r}})}upload(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,o){return(0,r.__awaiter)(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),s=this._getFinalPath(r),a=new URL(this.url+"/object/upload/sign/".concat(s));a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:E.upsert},o),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]="max-age=".concat(t.cacheControl),i["content-type"]=t.contentType);return{data:{path:r,fullPath:(yield g(this.fetch,a.toString(),e,{headers:i})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(i(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(r["x-upsert"]="true");const i=yield m(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(n),{},{headers:r}),s=new URL(this.url+i.url),a=s.searchParams.get("token");if(!a)throw new o("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(i(n))return{data:null,error:n};throw n}})}update(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield m(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(i(r))return{data:null,error:r};throw r}})}copy(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield m(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(i(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),o=yield m(this.fetch,"".concat(this.url,"/object/sign/").concat(r),Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return o={signedUrl:encodeURI("".concat(this.url).concat(o.signedURL).concat(i))},{data:o,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(i(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{const r=yield m(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),o=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(o)):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(i(r))return{data:null,error:r};throw r}})}download(e,t){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),o=r?"?".concat(r):"",i=this._getFinalPath(e);return new _(()=>f(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(i).concat(o),{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield f(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:c(e),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(i(n))return{data:null,error:n};throw n}})}exists(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,o){return(0,r.__awaiter)(this,void 0,void 0,function*(){return p(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),o)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(i(n)&&n instanceof a){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],o=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==o&&r.push(o);const i="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",s=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==s&&r.push(s);let a=r.join("&");return""!==a&&(a="?".concat(a)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(i,"/public/").concat(n).concat(a))}}}remove(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield v(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(i(t))return{data:null,error:t};throw t}})}list(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},w),t),{prefix:e||""});return{data:yield m(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(i(r))return{data:null,error:r};throw r}})}listV2(e,t){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield m(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(i(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const T="2.86.2",O={"X-Client-Info":"storage-js/".concat(T)};class I{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const o=new URL(e);if(null===r||void 0===r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."))}this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},O),t),this.fetch=l(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield f(this.fetch,"".concat(this.url,"/bucket").concat(t),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(i(t))return{data:null,error:t};throw t}})}getBucket(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield f(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(i(t))return{data:null,error:t};throw t}})}createBucket(e){return(0,r.__awaiter)(this,arguments,void 0,function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return function*(){try{return{data:yield m(t.fetch,"".concat(t.url,"/bucket"),{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(i(r))return{data:null,error:r};throw r}}()})}updateBucket(e,t){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield g(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(i(n))return{data:null,error:n};throw n}})}emptyBucket(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield m(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(i(t))return{data:null,error:t};throw t}})}deleteBucket(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield v(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(i(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var C=n(555),A=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&!0===(null===(n=t.icebergType)||void 0===n?void 0:n.includes("CommitState"))}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};function k(e){var t;const n=null!==(t=e.fetchImpl)&&void 0!==t?t:globalThis.fetch;return{async request(t){let{method:r,path:o,query:i,body:s,headers:a}=t;const l=function(e,t,n){const r=new URL(t,e);if(n)for(const[o,i]of Object.entries(n))void 0!==i&&r.searchParams.set(o,i);return r.toString()}(e.baseUrl,o,i),c=await async function(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:"Bearer ".concat(e.token)}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}(e.auth),u=await n(l,{method:r,headers:(0,C.A)((0,C.A)((0,C.A)({},s?{"Content-Type":"application/json"}:{}),c),a),body:s?JSON.stringify(s):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),p=h&&d?JSON.parse(d):d;if(!u.ok){var f;const e=h?p:void 0,t=null===e||void 0===e?void 0:e.error;throw new A(null!==(f=null===t||void 0===t?void 0:t.message)&&void 0!==f?f:"Request failed with status ".concat(u.status),{status:u.status,icebergType:null===t||void 0===t?void 0:t.type,icebergCode:null===t||void 0===t?void 0:t.code,details:e})}return{status:u.status,headers:u.headers,data:p}}}}function x(e){return e.join("\x1f")}var N=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:x(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces"),query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:null===t||void 0===t?void 0:t.properties};return(await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces"),body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:"".concat(this.prefix,"/namespaces/").concat(x(e.namespace))})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(x(e.namespace))})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:"".concat(this.prefix,"/namespaces/").concat(x(e.namespace))}),!0}catch(t){if(t instanceof A&&404===t.status)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof A&&409===n.status)return;throw n}}};function R(e){return e.join("\x1f")}var P=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(R(e.namespace),"/tables")})).data.identifiers}async createTable(e,t){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces/").concat(R(e.namespace),"/tables"),body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces/").concat(R(e.namespace),"/tables/").concat(e.name),body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){var n;await this.client.request({method:"DELETE",path:"".concat(this.prefix,"/namespaces/").concat(R(e.namespace),"/tables/").concat(e.name),query:{purgeRequested:String(null!==(n=null===t||void 0===t?void 0:t.purge)&&void 0!==n&&n)}})}async loadTable(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(R(e.namespace),"/tables/").concat(e.name),headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:"".concat(this.prefix,"/namespaces/").concat(R(e.namespace),"/tables/").concat(e.name),headers:t}),!0}catch(n){if(n instanceof A&&404===n.status)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof A&&409===n.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},j=class{constructor(e){var t;let n="v1";e.catalogName&&(n+="/".concat(e.catalogName));const r=e.baseUrl.endsWith("/")?e.baseUrl:"".concat(e.baseUrl,"/");this.client=k({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=null===(t=e.accessDelegation)||void 0===t?void 0:t.join(","),this.namespaceOps=new N(this.client,n),this.tableOps=new P(this.client,n,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class D{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},O),t),this.fetch=l(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield m(this.fetch,"".concat(this.url,"/bucket"),{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(i(t))return{data:null,error:t};throw t}})}listBuckets(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{const t=new URLSearchParams;void 0!==(null===e||void 0===e?void 0:e.limit)&&t.set("limit",e.limit.toString()),void 0!==(null===e||void 0===e?void 0:e.offset)&&t.set("offset",e.offset.toString()),(null===e||void 0===e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null===e||void 0===e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null===e||void 0===e?void 0:e.search)&&t.set("search",e.search);const n=t.toString(),r=n?"".concat(this.url,"/bucket?").concat(n):"".concat(this.url,"/bucket");return{data:yield f(this.fetch,r,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(i(t))return{data:null,error:t};throw t}})}deleteBucket(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield v(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(i(t))return{data:null,error:t};throw t}})}from(e){if(!(e=>!(!e||"string"!==typeof e)&&(!(0===e.length||e.length>100)&&(e.trim()===e&&(!e.includes("/")&&!e.includes("\\")&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e)))))(e))throw new o("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new j({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>(0,r.__awaiter)(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const U={"X-Client-Info":"storage-js/".concat(T),"Content-Type":"application/json"};class M extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function L(e){return"object"===typeof e&&null!==e&&"__isStorageVectorsError"in e}class F extends M{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class q extends M{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var B;!function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"}(B||(B={}));const G=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},H=()=>Response,V=e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},z=e=>Array.from(new Float32Array(e)),J=(e,t)=>{if(void 0!==t&&e.float32.length!==t)throw new Error("Vector dimension mismatch: expected ".concat(t,", got ").concat(e.float32.length))},W=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e);function K(e,t,n,o,i,s){return(0,r.__awaiter)(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,((e,t,n,r)=>{const o={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&r?(V(r)?(o.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),o.body=JSON.stringify(r)):o.body=r,Object.assign(Object.assign({},o),n)):o})(t,o,i,s)).then(e=>{if(!e.ok)throw e;if(null===o||void 0===o?void 0:o.noResolveJson)return e;const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>a(e)).catch(e=>((e,t,n)=>(0,r.__awaiter)(void 0,void 0,void 0,function*(){if(e&&"object"===typeof e&&"status"in e&&"ok"in e&&"number"===typeof e.status&&!(null===n||void 0===n?void 0:n.noResolveJson)){const n=e.status||500,r=e;if("function"===typeof r.json)r.json().then(e=>{const r=(null===e||void 0===e?void 0:e.statusCode)||(null===e||void 0===e?void 0:e.code)||n+"";t(new F(W(e),n,r))}).catch(()=>{const e=n+"",o=r.statusText||"HTTP ".concat(n," error");t(new F(o,n,e))});else{const e=n+"",o=r.statusText||"HTTP ".concat(n," error");t(new F(o,n,e))}}else t(new q(W(e),e))}))(e,l,o))})})}function Y(e,t,n,o,i){return(0,r.__awaiter)(this,void 0,void 0,function*(){return K(e,"POST",t,o,i,n)})}class ${constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},U),t),this.fetch=G(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield Y(this.fetch,"".concat(this.url,"/CreateIndex"),e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(L(t))return{data:null,error:t};throw t}})}getIndex(e,t){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Y(this.fetch,"".concat(this.url,"/GetIndex"),{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(L(n))return{data:null,error:n};throw n}})}listIndexes(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Y(this.fetch,"".concat(this.url,"/ListIndexes"),e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(L(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield Y(this.fetch,"".concat(this.url,"/DeleteIndex"),{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(L(n))return{data:null,error:n};throw n}})}}class Q{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},U),t),this.fetch=G(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Y(this.fetch,"".concat(this.url,"/PutVectors"),e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(L(t))return{data:null,error:t};throw t}})}getVectors(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Y(this.fetch,"".concat(this.url,"/GetVectors"),e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(L(t))return{data:null,error:t};throw t}})}listVectors(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and ".concat(e.segmentCount-1))}return{data:yield Y(this.fetch,"".concat(this.url,"/ListVectors"),e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(L(t))return{data:null,error:t};throw t}})}queryVectors(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Y(this.fetch,"".concat(this.url,"/QueryVectors"),e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(L(t))return{data:null,error:t};throw t}})}deleteVectors(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Y(this.fetch,"".concat(this.url,"/DeleteVectors"),e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(L(t))return{data:null,error:t};throw t}})}}class X{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},U),t),this.fetch=G(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield Y(this.fetch,"".concat(this.url,"/CreateVectorBucket"),{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(L(t))return{data:null,error:t};throw t}})}getBucket(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Y(this.fetch,"".concat(this.url,"/GetVectorBucket"),{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(L(t))return{data:null,error:t};throw t}})}listBuckets(){return(0,r.__awaiter)(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){try{return{data:yield Y(e.fetch,"".concat(e.url,"/ListVectorBuckets"),t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(L(n))return{data:null,error:n};throw n}}()})}deleteBucket(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield Y(this.fetch,"".concat(this.url,"/DeleteVectorBucket"),{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(L(t))return{data:null,error:t};throw t}})}}class Z extends X{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t.headers||{},t.fetch)}from(e){return new ee(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return(0,r.__awaiter)(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return(0,r.__awaiter)(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return(0,r.__awaiter)(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){return e.listBuckets.call(t,n)}()})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return(0,r.__awaiter)(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class ee extends ${constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,r.__awaiter)(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,r.__awaiter)(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){return e.listIndexes.call(t,Object.assign(Object.assign({},n),{vectorBucketName:t.vectorBucketName}))}()})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,r.__awaiter)(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,r.__awaiter)(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new te(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class te extends Q{constructor(e,t,n,r,o){super(e,t,o),this.vectorBucketName=n,this.indexName=r}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,r.__awaiter)(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,r.__awaiter)(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,r.__awaiter)(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){return e.listVectors.call(t,Object.assign(Object.assign({},n),{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}()})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,r.__awaiter)(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,r.__awaiter)(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class ne extends I{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new S(this.url,this.headers,e,this.fetch)}get vectors(){return new Z(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new D(this.url+"/iceberg",this.headers,this.fetch)}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},980:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const r=n(326),o=r.__importDefault(n(210));t.PostgrestClient=o.default;const i=r.__importDefault(n(829));t.PostgrestQueryBuilder=i.default;const s=r.__importDefault(n(736));t.PostgrestFilterBuilder=s.default;const a=r.__importDefault(n(374));t.PostgrestTransformBuilder=a.default;const l=r.__importDefault(n(286));t.PostgrestBuilder=l.default;const c=r.__importDefault(n(611));t.PostgrestError=c.default,t.default={PostgrestClient:o.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&o&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>s[e]=()=>r[e]);return s.default=()=>r,n.d(i,s),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r=n(555),o=n(43),i=n(391);let s,a;function l(e,t,n,r){var o,i;if(!(null===e||void 0===e?void 0:e.baseUrl)){const e={geminiUrl:s,vertexUrl:a};return t?null!==(o=e.vertexUrl)&&void 0!==o?o:n:null!==(i=e.geminiUrl)&&void 0!==i?i:r}return e.baseUrl}class c{}function u(e,t){return e.replace(/\{([^}]+)\}/g,(e,n)=>{if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n];return void 0!==e&&null!==e?String(e):""}throw new Error("Key '".concat(n,"' not found in valueMap."))})}function d(e,t,n){for(let i=0;i<t.length-1;i++){const r=t[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(!(o in e)){if(!Array.isArray(n))throw new Error("Value must be a list given an array path ".concat(r));e[o]=Array.from({length:n.length},()=>({}))}if(Array.isArray(e[o])){const r=e[o];if(Array.isArray(n))for(let e=0;e<r.length;e++){d(r[e],t.slice(i+1),n[e])}else for(const e of r)d(e,t.slice(i+1),n)}return}if(r.endsWith("[0]")){const o=r.slice(0,-3);o in e||(e[o]=[{}]);return void d(e[o][0],t.slice(i+1),n)}e[r]&&"object"===typeof e[r]||(e[r]={}),e=e[r]}const r=t[t.length-1],o=e[r];if(void 0!==o){if(!n||"object"===typeof n&&0===Object.keys(n).length)return;if(n===o)return;if("object"!==typeof o||"object"!==typeof n||null===o||null===n)throw new Error("Cannot set value for an existing key. Key: ".concat(r));Object.assign(o,n)}else if("_self"!==r||"object"!==typeof n||null===n||Array.isArray(n))e[r]=n;else{const t=n;Object.assign(e,t)}}function h(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;try{if(1===t.length&&"_self"===t[0])return e;for(let r=0;r<t.length;r++){if("object"!==typeof e||null===e)return n;const o=t[r];if(o.endsWith("[]")){const i=o.slice(0,-2);if(i in e){const o=e[i];return Array.isArray(o)?o.map(e=>h(e,t.slice(r+1),n)):n}return n}e=e[o]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function p(e,t,n,r,o){if(r>=t.length)return;if("object"!==typeof e||null===e)return;const i=t[r];if(i.endsWith("[]")){const s=i.slice(0,-2),a=e;if(s in a&&Array.isArray(a[s]))for(const e of a[s])p(e,t,n,r+1,o)}else if("*"===i){if("object"===typeof e&&null!==e&&!Array.isArray(e)){const t=e,i=Object.keys(t).filter(e=>!e.startsWith("_")&&!o.has(e)),s={};for(const e of i)s[e]=t[e];for(const[e,o]of Object.entries(s)){const i=[];for(const t of n.slice(r))"*"===t?i.push(e):i.push(t);d(t,i,o)}for(const e of i)delete t[e]}}else{i in e&&p(e[i],t,n,r+1,o)}}function f(e){if("string"!==typeof e)throw new Error("fromImageBytes must be a string");return e}function m(e){const t={},n=h(e,["name"]);null!=n&&d(t,["name"],n);const r=h(e,["metadata"]);null!=r&&d(t,["metadata"],r);const o=h(e,["done"]);null!=o&&d(t,["done"],o);const i=h(e,["error"]);null!=i&&d(t,["error"],i);const s=h(e,["response","generateVideoResponse"]);return null!=s&&d(t,["response"],function(e){const t={},n=h(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["video"]);null!=n&&d(t,["video"],function(e){const t={},n=h(e,["uri"]);null!=n&&d(t,["uri"],n);const r=h(e,["encodedVideo"]);null!=r&&d(t,["videoBytes"],f(r));const o=h(e,["encoding"]);null!=o&&d(t,["mimeType"],o);return t}(n));return t}(e))),d(t,["generatedVideos"],e)}const r=h(e,["raiMediaFilteredCount"]);null!=r&&d(t,["raiMediaFilteredCount"],r);const o=h(e,["raiMediaFilteredReasons"]);null!=o&&d(t,["raiMediaFilteredReasons"],o);return t}(s)),t}function g(e){const t={},n=h(e,["name"]);null!=n&&d(t,["name"],n);const r=h(e,["metadata"]);null!=r&&d(t,["metadata"],r);const o=h(e,["done"]);null!=o&&d(t,["done"],o);const i=h(e,["error"]);null!=i&&d(t,["error"],i);const s=h(e,["response"]);return null!=s&&d(t,["response"],function(e){const t={},n=h(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["_self"]);null!=n&&d(t,["video"],function(e){const t={},n=h(e,["gcsUri"]);null!=n&&d(t,["uri"],n);const r=h(e,["bytesBase64Encoded"]);null!=r&&d(t,["videoBytes"],f(r));const o=h(e,["mimeType"]);null!=o&&d(t,["mimeType"],o);return t}(n));return t}(e))),d(t,["generatedVideos"],e)}const r=h(e,["raiMediaFilteredCount"]);null!=r&&d(t,["raiMediaFilteredCount"],r);const o=h(e,["raiMediaFilteredReasons"]);null!=o&&d(t,["raiMediaFilteredReasons"],o);return t}(s)),t}function v(e){const t={},n=h(e,["name"]);null!=n&&d(t,["name"],n);const r=h(e,["metadata"]);null!=r&&d(t,["metadata"],r);const o=h(e,["done"]);null!=o&&d(t,["done"],o);const i=h(e,["error"]);null!=i&&d(t,["error"],i);const s=h(e,["response"]);return null!=s&&d(t,["response"],function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["parent"]);null!=r&&d(t,["parent"],r);const o=h(e,["documentName"]);null!=o&&d(t,["documentName"],o);return t}(s)),t}function y(e){const t={},n=h(e,["name"]);null!=n&&d(t,["name"],n);const r=h(e,["metadata"]);null!=r&&d(t,["metadata"],r);const o=h(e,["done"]);null!=o&&d(t,["done"],o);const i=h(e,["error"]);null!=i&&d(t,["error"],i);const s=h(e,["response"]);return null!=s&&d(t,["response"],function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["parent"]);null!=r&&d(t,["parent"],r);const o=h(e,["documentName"]);null!=o&&d(t,["documentName"],o);return t}(s)),t}var b,_,w,E,S,T,O,I,C,A,k,x,N,R,P,j,D,U,M,L,F,q,B,G,H,V,z,J,W,K,Y,$,Q,X,Z,ee,te,ne,re,oe,ie,se,ae,le,ce,ue,de,he,pe,fe,me,ge,ve,ye,be,_e;!function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"}(b||(b={})),function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"}(_||(_={})),function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"}(w||(w={})),function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"}(E||(E={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(S||(S={})),function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"}(T||(T={})),function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"}(O||(O={})),function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"}(I||(I={})),function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"}(C||(C={})),function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.HIGH="HIGH"}(A||(A={})),function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"}(k||(k={})),function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"}(x||(x={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"}(N||(N={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"}(R||(R={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(P||(P={})),function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"}(j||(j={})),function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"}(D||(D={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"}(U||(U={})),function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"}(M||(M={})),function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"}(L||(L={})),function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"}(F||(F={})),function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"}(q||(q={})),function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"}(B||(B={})),function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"}(G||(G={})),function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"}(H||(H={})),function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"}(V||(V={})),function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"}(z||(z={})),function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"}(J||(J={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(W||(W={})),function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"}(K||(K={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"}(Y||(Y={})),function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}($||($={})),function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"}(Q||(Q={})),function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"}(X||(X={})),function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"}(Z||(Z={})),function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"}(ee||(ee={})),function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"}(te||(te={})),function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"}(ne||(ne={})),function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"}(re||(re={})),function(e){e.ASSET="ASSET",e.STYLE="STYLE"}(oe||(oe={})),function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"}(ie||(ie={})),function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"}(se||(se={})),function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"}(ae||(ae={})),function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"}(le||(le={})),function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"}(ce||(ce={})),function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"}(ue||(ue={})),function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"}(de||(de={})),function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"}(he||(he={})),function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"}(pe||(pe={})),function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"}(fe||(fe={})),function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"}(me||(me={})),function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"}(ge||(ge={})),function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"}(ve||(ve={})),function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"}(ye||(ye={})),function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"}(be||(be={}));class we{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ee{get text(){var e,t,n,r,o,i,s,a;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let l="",c=!1;const u=[];for(const d of null!==(a=null===(s=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===s?void 0:s.parts)&&void 0!==a?a:[]){for(const[e,t]of Object.entries(d))"text"===e||"thought"===e||"thoughtSignature"===e||null===t&&void 0===t||u.push(e);if("string"===typeof d.text){if("boolean"===typeof d.thought&&d.thought)continue;c=!0,l+=d.text}}return u.length>0&&console.warn("there are non-text parts ".concat(u," in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.")),c?l:void 0}get data(){var e,t,n,r,o,i,s,a;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let l="";const c=[];for(const u of null!==(a=null===(s=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===s?void 0:s.parts)&&void 0!==a?a:[]){for(const[e,t]of Object.entries(u))"inlineData"===e||null===t&&void 0===t||c.push(e);u.inlineData&&"string"===typeof u.inlineData.data&&(l+=atob(u.inlineData.data))}return c.length>0&&console.warn("there are non-data parts ".concat(c," in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.")),l.length>0?btoa(l):void 0}get functionCalls(){var e,t,n,r,o,i,s,a;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const l=null===(a=null===(s=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===s?void 0:s.parts)||void 0===a?void 0:a.filter(e=>e.functionCall).map(e=>e.functionCall).filter(e=>void 0!==e);return 0!==(null===l||void 0===l?void 0:l.length)?l:void 0}get executableCode(){var e,t,n,r,o,i,s,a,l;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const c=null===(a=null===(s=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===s?void 0:s.parts)||void 0===a?void 0:a.filter(e=>e.executableCode).map(e=>e.executableCode).filter(e=>void 0!==e);return 0!==(null===c||void 0===c?void 0:c.length)?null===(l=null===c||void 0===c?void 0:c[0])||void 0===l?void 0:l.code:void 0}get codeExecutionResult(){var e,t,n,r,o,i,s,a,l;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const c=null===(a=null===(s=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===s?void 0:s.parts)||void 0===a?void 0:a.filter(e=>e.codeExecutionResult).map(e=>e.codeExecutionResult).filter(e=>void 0!==e);return 0!==(null===c||void 0===c?void 0:c.length)?null===(l=null===c||void 0===c?void 0:c[0])||void 0===l?void 0:l.output:void 0}}class Se{}class Te{}class Oe{}class Ie{}class Ce{}class Ae{}class ke{}class xe{}class Ne{}class Re{}class Pe{_fromAPIResponse(e){let{apiResponse:t,_isVertexAI:n}=e;const r=new Pe;let o;const i=t;return o=n?g(i):m(i),Object.assign(r,o),r}}class je{}class De{}class Ue{}class Me{}class Le{}class Fe{}class qe{_fromAPIResponse(e){let{apiResponse:t,_isVertexAI:n}=e;const r=new qe,o=v(t);return Object.assign(r,o),r}}class Be{}class Ge{}class He{}class Ve{}class ze{get text(){var e,t,n;let r="",o=!1;const i=[];for(const s of null!==(n=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==n?n:[]){for(const[e,t]of Object.entries(s))"text"!==e&&"thought"!==e&&null!==t&&i.push(e);if("string"===typeof s.text){if("boolean"===typeof s.thought&&s.thought)continue;o=!0,r+=s.text}}return i.length>0&&console.warn("there are non-text parts ".concat(i," in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.")),o?r:void 0}get data(){var e,t,n;let r="";const o=[];for(const i of null!==(n=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==n?n:[]){for(const[e,t]of Object.entries(i))"inlineData"!==e&&null!==t&&o.push(e);i.inlineData&&"string"===typeof i.inlineData.data&&(r+=atob(i.inlineData.data))}return o.length>0&&console.warn("there are non-data parts ".concat(o," in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.")),r.length>0?btoa(r):void 0}}class Je{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class We{_fromAPIResponse(e){let{apiResponse:t,_isVertexAI:n}=e;const r=new We,o=y(t);return Object.assign(r,o),r}}function Ke(e,t){if(!t||"string"!==typeof t)throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return"publishers/".concat(e[0],"/models/").concat(e[1])}return"publishers/google/models/".concat(t)}return t.startsWith("models/")||t.startsWith("tunedModels/")?t:"models/".concat(t)}function Ye(e,t){const n=Ke(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?"projects/".concat(e.getProject(),"/locations/").concat(e.getLocation(),"/").concat(n):n.startsWith("models/")&&e.isVertexAI()?"projects/".concat(e.getProject(),"/locations/").concat(e.getLocation(),"/publishers/google/").concat(n):n:""}function $e(e){return Array.isArray(e)?e.map(e=>Qe(e)):[Qe(e)]}function Qe(e){if("object"===typeof e&&null!==e)return e;throw new Error("Could not parse input as Blob. Unsupported blob type: ".concat(typeof e))}function Xe(e){const t=Qe(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error("Unsupported mime type: ".concat(t.mimeType))}function Ze(e){const t=Qe(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error("Unsupported mime type: ".concat(t.mimeType))}function et(e){if(null===e||void 0===e)throw new Error("PartUnion is required");if("object"===typeof e)return e;if("string"===typeof e)return{text:e};throw new Error("Unsupported part type: ".concat(typeof e))}function tt(e){if(null===e||void 0===e||Array.isArray(e)&&0===e.length)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(e=>et(e)):[et(e)]}function nt(e){return null!==e&&void 0!==e&&"object"===typeof e&&"parts"in e&&Array.isArray(e.parts)}function rt(e){return null!==e&&void 0!==e&&"object"===typeof e&&"functionCall"in e}function ot(e){return null!==e&&void 0!==e&&"object"===typeof e&&"functionResponse"in e}function it(e){if(null===e||void 0===e)throw new Error("ContentUnion is required");return nt(e)?e:{role:"user",parts:tt(e)}}function st(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const t=it(e);return t.parts&&t.parts.length>0&&void 0!==t.parts[0].text?[t.parts[0].text]:[]});if(e.isVertexAI()){const e=it(t);return e.parts&&e.parts.length>0&&void 0!==e.parts[0].text?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>it(e)):[it(t)]}function at(e){if(null===e||void 0===e||Array.isArray(e)&&0===e.length)throw new Error("contents are required");if(!Array.isArray(e)){if(rt(e)||ot(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[it(e)]}const t=[],n=[],r=nt(e[0]);for(const o of e){const e=nt(o);if(e!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(e)t.push(o);else{if(rt(o)||ot(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||t.push({role:"user",parts:tt(n)}),t}function lt(e){const t={},n=["items"],r=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=e.anyOf;null!=i&&2==i.length&&("null"===i[0].type?(t.nullable=!0,e=i[1]):"null"===i[1].type&&(t.nullable=!0,e=i[0])),e.type instanceof Array&&function(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(e=>"null"!==e);if(1===n.length)t.type=Object.values(E).includes(n[0].toUpperCase())?n[0].toUpperCase():E.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const e of n)t.anyOf.push({type:Object.values(E).includes(e.toUpperCase())?e.toUpperCase():E.TYPE_UNSPECIFIED})}}(e.type,t);for(const[s,a]of Object.entries(e))if(null!=a)if("type"==s){if("null"===a)throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(E).includes(a.toUpperCase())?a.toUpperCase():E.TYPE_UNSPECIFIED}else if(n.includes(s))t[s]=lt(a);else if(r.includes(s)){const e=[];for(const n of a)"null"!=n.type?e.push(lt(n)):t.nullable=!0;t[s]=e}else if(o.includes(s)){const e={};for(const[t,n]of Object.entries(a))e[t]=lt(n);t[s]=e}else{if("additionalProperties"===s)continue;t[s]=a}return t}function ct(e){return lt(e)}function ut(e){if("object"===typeof e)return e;if("string"===typeof e)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error("Unsupported speechConfig type: ".concat(typeof e))}function dt(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function ht(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=lt(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=lt(t.response));return e}function pt(e){if(void 0===e||null===e)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function ft(e,t){if("string"!==typeof t)throw new Error("name must be a string");return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const o=!t.startsWith("".concat(n,"/"))&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?"projects/".concat(e.getProject(),"/").concat(t):t.startsWith("".concat(n,"/"))?"projects/".concat(e.getProject(),"/locations/").concat(e.getLocation(),"/").concat(t):o?"projects/".concat(e.getProject(),"/locations/").concat(e.getLocation(),"/").concat(n,"/").concat(t):t:o?"".concat(n,"/").concat(t):t}(e,t,"cachedContents")}function mt(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function gt(e){return f(e)}function vt(e){var t;let n;var r;if(null!==(r=e)&&void 0!==r&&"object"===typeof r&&"name"in r&&(n=e.name),(!function(e){return null!==e&&void 0!==e&&"object"===typeof e&&"uri"in e}(e)||(n=e.uri,void 0!==n))&&(!function(e){return null!==e&&void 0!==e&&"object"===typeof e&&"video"in e}(e)||(n=null===(t=e.video)||void 0===t?void 0:t.uri,void 0!==n))){if("string"===typeof e&&(n=e),void 0===n)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const e=n.split("files/")[1].match(/[a-z0-9]+/);if(null===e)throw new Error("Could not extract file name from URI ".concat(n));n=e[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function yt(e,t){let n;return n=e.isVertexAI()?t?"publishers/google/models":"models":t?"models":"tunedModels",n}function bt(e){for(const t of["models","tunedModels","publisherModels"])if(_t(e,t))return e[t];return[]}function _t(e,t){return null!==e&&"object"===typeof e&&t in e}function wt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior);return{functionDeclarations:[r]}}function Et(e,t){let n;if("string"===typeof t)if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else{if(!t.startsWith("bq://"))throw new Error("Unsupported string source for Vertex AI: ".concat(t));n={format:"bigquery",bigqueryUri:t}}else{if(!t.startsWith("files/"))throw new Error("Unsupported string source for Gemini API: ".concat(t));n={fileName:t}}else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||1!==r)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||1!==o)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function St(e){if("object"!==typeof e||null===e)return{};const t=e,n=t.inlinedResponses;if("object"!==typeof n||null===n)return e;const r=n.inlinedResponses;if(!Array.isArray(r)||0===r.length)return e;let o=!1;for(const i of r){if("object"!==typeof i||null===i)continue;const e=i.response;if("object"!==typeof e||null===e)continue;if(void 0!==e.embedding){o=!0;break}}return o&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Tt(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error("Invalid batch job name: ".concat(n,"."))}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error("Invalid batch job name: ".concat(n,"."))}function Ot(e){return"BATCH_STATE_UNSPECIFIED"===e?"JOB_STATE_UNSPECIFIED":"BATCH_STATE_PENDING"===e?"JOB_STATE_PENDING":"BATCH_STATE_RUNNING"===e?"JOB_STATE_RUNNING":"BATCH_STATE_SUCCEEDED"===e?"JOB_STATE_SUCCEEDED":"BATCH_STATE_FAILED"===e?"JOB_STATE_FAILED":"BATCH_STATE_CANCELLED"===e?"JOB_STATE_CANCELLED":"BATCH_STATE_EXPIRED"===e?"JOB_STATE_EXPIRED":e}function It(e){const t={},n=h(e,["responsesFile"]);null!=n&&d(t,["fileName"],n);const r=h(e,["inlinedResponses","inlinedResponses"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["response"]);null!=n&&d(t,["response"],function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["content"]);null!=n&&d(t,["content"],n);const r=h(e,["citationMetadata"]);null!=r&&d(t,["citationMetadata"],function(e){const t={},n=h(e,["citationSources"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["citations"],e)}return t}(r));const o=h(e,["tokenCount"]);null!=o&&d(t,["tokenCount"],o);const i=h(e,["finishReason"]);null!=i&&d(t,["finishReason"],i);const s=h(e,["avgLogprobs"]);null!=s&&d(t,["avgLogprobs"],s);const a=h(e,["groundingMetadata"]);null!=a&&d(t,["groundingMetadata"],a);const l=h(e,["index"]);null!=l&&d(t,["index"],l);const c=h(e,["logprobsResult"]);null!=c&&d(t,["logprobsResult"],c);const u=h(e,["safetyRatings"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["safetyRatings"],e)}const p=h(e,["urlContextMetadata"]);null!=p&&d(t,["urlContextMetadata"],p);return t}(e))),d(t,["candidates"],e)}const o=h(e,["modelVersion"]);null!=o&&d(t,["modelVersion"],o);const i=h(e,["promptFeedback"]);null!=i&&d(t,["promptFeedback"],i);const s=h(e,["responseId"]);null!=s&&d(t,["responseId"],s);const a=h(e,["usageMetadata"]);null!=a&&d(t,["usageMetadata"],a);return t}(n));const r=h(e,["error"]);null!=r&&d(t,["error"],r);return t}(e))),d(t,["inlinedResponses"],e)}const o=h(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["inlinedEmbedContentResponses"],e)}return t}function Ct(e){const t={},n=h(e,["name"]);null!=n&&d(t,["name"],n);const r=h(e,["metadata","displayName"]);null!=r&&d(t,["displayName"],r);const o=h(e,["metadata","state"]);null!=o&&d(t,["state"],Ot(o));const i=h(e,["metadata","createTime"]);null!=i&&d(t,["createTime"],i);const s=h(e,["metadata","endTime"]);null!=s&&d(t,["endTime"],s);const a=h(e,["metadata","updateTime"]);null!=a&&d(t,["updateTime"],a);const l=h(e,["metadata","model"]);null!=l&&d(t,["model"],l);const c=h(e,["metadata","output"]);return null!=c&&d(t,["dest"],It(St(c))),t}function At(e){const t={},n=h(e,["name"]);null!=n&&d(t,["name"],n);const r=h(e,["displayName"]);null!=r&&d(t,["displayName"],r);const o=h(e,["state"]);null!=o&&d(t,["state"],Ot(o));const i=h(e,["error"]);null!=i&&d(t,["error"],i);const s=h(e,["createTime"]);null!=s&&d(t,["createTime"],s);const a=h(e,["startTime"]);null!=a&&d(t,["startTime"],a);const l=h(e,["endTime"]);null!=l&&d(t,["endTime"],l);const c=h(e,["updateTime"]);null!=c&&d(t,["updateTime"],c);const u=h(e,["model"]);null!=u&&d(t,["model"],u);const p=h(e,["inputConfig"]);null!=p&&d(t,["src"],function(e){const t={},n=h(e,["instancesFormat"]);null!=n&&d(t,["format"],n);const r=h(e,["gcsSource","uris"]);null!=r&&d(t,["gcsUri"],r);const o=h(e,["bigquerySource","inputUri"]);null!=o&&d(t,["bigqueryUri"],o);return t}(p));const f=h(e,["outputConfig"]);null!=f&&d(t,["dest"],function(e){const t={},n=h(e,["predictionsFormat"]);null!=n&&d(t,["format"],n);const r=h(e,["gcsDestination","outputUriPrefix"]);null!=r&&d(t,["gcsUri"],r);const o=h(e,["bigqueryDestination","outputUri"]);return null!=o&&d(t,["bigqueryUri"],o),t}(St(f)));const m=h(e,["completionStats"]);return null!=m&&d(t,["completionStats"],m),t}function kt(e,t){const n={};if(void 0!==h(t,["format"]))throw new Error("format parameter is not supported in Gemini API.");if(void 0!==h(t,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==h(t,["bigqueryUri"]))throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=h(t,["fileName"]);null!=r&&d(n,["fileName"],r);const o=h(t,["inlinedRequests"]);if(null!=o){let t=o;Array.isArray(t)&&(t=t.map(t=>function(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["request","model"],Ke(e,r));const o=h(t,["contents"]);if(null!=o){let e=at(o);Array.isArray(e)&&(e=e.map(e=>xt(e))),d(n,["request","contents"],e)}const i=h(t,["metadata"]);null!=i&&d(n,["metadata"],i);const s=h(t,["config"]);null!=s&&d(n,["request","generationConfig"],function(e,t,n){const r={},o=h(t,["systemInstruction"]);void 0!==n&&null!=o&&d(n,["systemInstruction"],xt(it(o)));const i=h(t,["temperature"]);null!=i&&d(r,["temperature"],i);const s=h(t,["topP"]);null!=s&&d(r,["topP"],s);const a=h(t,["topK"]);null!=a&&d(r,["topK"],a);const l=h(t,["candidateCount"]);null!=l&&d(r,["candidateCount"],l);const c=h(t,["maxOutputTokens"]);null!=c&&d(r,["maxOutputTokens"],c);const u=h(t,["stopSequences"]);null!=u&&d(r,["stopSequences"],u);const p=h(t,["responseLogprobs"]);null!=p&&d(r,["responseLogprobs"],p);const f=h(t,["logprobs"]);null!=f&&d(r,["logprobs"],f);const m=h(t,["presencePenalty"]);null!=m&&d(r,["presencePenalty"],m);const g=h(t,["frequencyPenalty"]);null!=g&&d(r,["frequencyPenalty"],g);const v=h(t,["seed"]);null!=v&&d(r,["seed"],v);const y=h(t,["responseMimeType"]);null!=y&&d(r,["responseMimeType"],y);const b=h(t,["responseSchema"]);null!=b&&d(r,["responseSchema"],ct(b));const _=h(t,["responseJsonSchema"]);null!=_&&d(r,["responseJsonSchema"],_);if(void 0!==h(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==h(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=h(t,["safetySettings"]);if(void 0!==n&&null!=w){let e=w;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["category"]);null!=n&&d(t,["category"],n);if(void 0!==h(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const r=h(e,["threshold"]);null!=r&&d(t,["threshold"],r);return t}(e))),d(n,["safetySettings"],e)}const E=h(t,["tools"]);if(void 0!==n&&null!=E){let e=pt(E);Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["functionDeclarations"],e)}if(void 0!==h(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(e,["googleSearchRetrieval"]);null!=r&&d(t,["googleSearchRetrieval"],r);const o=h(e,["computerUse"]);null!=o&&d(t,["computerUse"],o);const i=h(e,["fileSearch"]);null!=i&&d(t,["fileSearch"],i);const s=h(e,["codeExecution"]);null!=s&&d(t,["codeExecution"],s);if(void 0!==h(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(e,["googleMaps"]);null!=a&&d(t,["googleMaps"],function(e){const t={};if(void 0!==h(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(e,["enableWidget"]);null!=n&&d(t,["enableWidget"],n);return t}(a));const l=h(e,["googleSearch"]);null!=l&&d(t,["googleSearch"],function(e){const t={};if(void 0!==h(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==h(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(e,["timeRangeFilter"]);null!=n&&d(t,["timeRangeFilter"],n);return t}(l));const c=h(e,["urlContext"]);null!=c&&d(t,["urlContext"],c);return t}(ht(e)))),d(n,["tools"],e)}const S=h(t,["toolConfig"]);void 0!==n&&null!=S&&d(n,["toolConfig"],function(e){const t={},n=h(e,["functionCallingConfig"]);null!=n&&d(t,["functionCallingConfig"],function(e){const t={},n=h(e,["mode"]);null!=n&&d(t,["mode"],n);const r=h(e,["allowedFunctionNames"]);null!=r&&d(t,["allowedFunctionNames"],r);if(void 0!==h(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(n));const r=h(e,["retrievalConfig"]);null!=r&&d(t,["retrievalConfig"],r);return t}(S));if(void 0!==h(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const T=h(t,["cachedContent"]);void 0!==n&&null!=T&&d(n,["cachedContent"],ft(e,T));const O=h(t,["responseModalities"]);null!=O&&d(r,["responseModalities"],O);const I=h(t,["mediaResolution"]);null!=I&&d(r,["mediaResolution"],I);const C=h(t,["speechConfig"]);null!=C&&d(r,["speechConfig"],ut(C));if(void 0!==h(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const A=h(t,["thinkingConfig"]);null!=A&&d(r,["thinkingConfig"],A);const k=h(t,["imageConfig"]);null!=k&&d(r,["imageConfig"],function(e){const t={},n=h(e,["aspectRatio"]);null!=n&&d(t,["aspectRatio"],n);const r=h(e,["imageSize"]);null!=r&&d(t,["imageSize"],r);if(void 0!==h(e,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==h(e,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}(k));return r}(e,s,h(n,["request"],{})));return n}(e,t))),d(n,["requests","requests"],t)}return n}function xt(e){const t={},n=h(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["mediaResolution"]);null!=n&&d(t,["mediaResolution"],n);const r=h(e,["codeExecutionResult"]);null!=r&&d(t,["codeExecutionResult"],r);const o=h(e,["executableCode"]);null!=o&&d(t,["executableCode"],o);const i=h(e,["fileData"]);null!=i&&d(t,["fileData"],function(e){const t={};if(void 0!==h(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);null!=n&&d(t,["fileUri"],n);const r=h(e,["mimeType"]);null!=r&&d(t,["mimeType"],r);return t}(i));const s=h(e,["functionCall"]);null!=s&&d(t,["functionCall"],function(e){const t={},n=h(e,["id"]);null!=n&&d(t,["id"],n);const r=h(e,["args"]);null!=r&&d(t,["args"],r);const o=h(e,["name"]);null!=o&&d(t,["name"],o);if(void 0!==h(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==h(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(s));const a=h(e,["functionResponse"]);null!=a&&d(t,["functionResponse"],a);const l=h(e,["inlineData"]);null!=l&&d(t,["inlineData"],function(e){const t={},n=h(e,["data"]);if(null!=n&&d(t,["data"],n),void 0!==h(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=h(e,["mimeType"]);return null!=r&&d(t,["mimeType"],r),t}(l));const c=h(e,["text"]);null!=c&&d(t,["text"],c);const u=h(e,["thought"]);null!=u&&d(t,["thought"],u);const p=h(e,["thoughtSignature"]);null!=p&&d(t,["thoughtSignature"],p);const f=h(e,["videoMetadata"]);null!=f&&d(t,["videoMetadata"],f);return t}(e))),d(t,["parts"],e)}const r=h(e,["role"]);return null!=r&&d(t,["role"],r),t}function Nt(e,t){const n=h(e,["displayName"]);void 0!==t&&null!=n&&d(t,["displayName"],n);const r=h(e,["dest"]);return void 0!==t&&null!=r&&d(t,["outputConfig"],function(e){const t={},n=h(e,["format"]);null!=n&&d(t,["predictionsFormat"],n);const r=h(e,["gcsUri"]);null!=r&&d(t,["gcsDestination","outputUriPrefix"],r);const o=h(e,["bigqueryUri"]);if(null!=o&&d(t,["bigqueryDestination","outputUri"],o),void 0!==h(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==h(e,["inlinedResponses"]))throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==h(e,["inlinedEmbedContentResponses"]))throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}(function(e){if("string"!==typeof e)return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error("Unsupported destination: ".concat(t))}(r))),{}}function Rt(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","model"],Ke(e,r));const o=h(t,["src"]);null!=o&&d(n,["batch","inputConfig"],kt(e,Et(e,o)));const i=h(t,["config"]);return null!=i&&function(e,t){const n=h(e,["displayName"]);if(void 0!==t&&null!=n&&d(t,["batch","displayName"],n),void 0!==h(e,["dest"]))throw new Error("dest parameter is not supported in Gemini API.")}(i,n),n}function Pt(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["model"],Ke(e,r));const o=h(t,["src"]);null!=o&&d(n,["inputConfig"],function(e){const t={},n=h(e,["format"]);null!=n&&d(t,["instancesFormat"],n);const r=h(e,["gcsUri"]);null!=r&&d(t,["gcsSource","uris"],r);const o=h(e,["bigqueryUri"]);if(null!=o&&d(t,["bigquerySource","inputUri"],o),void 0!==h(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==h(e,["inlinedRequests"]))throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}(Et(e,o)));const i=h(t,["config"]);return null!=i&&Nt(i,n),n}function jt(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","model"],Ke(e,r));const o=h(t,["src"]);null!=o&&d(n,["batch","inputConfig"],function(e,t){const n={},r=h(t,["fileName"]);null!=r&&d(n,["file_name"],r);const o=h(t,["inlinedRequests"]);null!=o&&d(n,["requests"],function(e,t){const n={},r=h(t,["contents"]);if(null!=r){let t=st(e,r);Array.isArray(t)&&(t=t.map(e=>e)),d(n,["requests[]","request","content"],t)}const o=h(t,["config"]);null!=o&&(d(n,["_self"],function(e,t){const n={},r=h(e,["taskType"]);void 0!==t&&null!=r&&d(t,["requests[]","taskType"],r);const o=h(e,["title"]);void 0!==t&&null!=o&&d(t,["requests[]","title"],o);const i=h(e,["outputDimensionality"]);void 0!==t&&null!=i&&d(t,["requests[]","outputDimensionality"],i);if(void 0!==h(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==h(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}(o,n)),function(e,t){for(const[n,r]of Object.entries(t)){const t=n.split("."),o=r.split("."),i=new Set;let s=-1;for(let e=0;e<t.length;e++)if("*"===t[e]){s=e;break}if(-1!==s&&o.length>s)for(let e=s;e<o.length;e++){const t=o[e];"*"===t||t.endsWith("[]")||t.endsWith("[0]")||i.add(t)}p(e,t,o,0,i)}}(n,{"requests[].*":"requests[].request.*"}));return n}(e,o));return n}(e,o));const i=h(t,["config"]);return null!=i&&function(e,t){const n=h(e,["displayName"]);void 0!==t&&null!=n&&d(t,["batch","displayName"],n)}(i,n),n}function Dt(e){const t={},n=h(e,["config"]);return null!=n&&function(e,t){const n=h(e,["pageSize"]);void 0!==t&&null!=n&&d(t,["_query","pageSize"],n);const r=h(e,["pageToken"]);if(void 0!==t&&null!=r&&d(t,["_query","pageToken"],r),void 0!==h(e,["filter"]))throw new Error("filter parameter is not supported in Gemini API.")}(n,t),t}function Ut(e){const t={},n=h(e,["config"]);return null!=n&&function(e,t){const n=h(e,["pageSize"]);void 0!==t&&null!=n&&d(t,["_query","pageSize"],n);const r=h(e,["pageToken"]);void 0!==t&&null!=r&&d(t,["_query","pageToken"],r);const o=h(e,["filter"]);void 0!==t&&null!=o&&d(t,["_query","filter"],o)}(n,t),t}!function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"}(_e||(_e={}));class Mt{constructor(e,t,n,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,r)}init(e,t,n){var r,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=null===t||void 0===t?void 0:t.sdkHttpResponse,this.idxInternal=0;let i={config:{}};i=n&&0!==Object.keys(n).length?"object"===typeof n?Object.assign({},n):n:{config:{}},i.config&&(i.config.pageToken=t.nextPageToken),this.paramsInternal=i,this.pageInternalSize=null!==(o=null===(r=i.config)||void 0===r?void 0:r.pageSize)&&void 0!==o?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength){if(!this.hasNextPage())return{value:void 0,done:!0};await this.nextPage()}const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return void 0!==(null===(e=this.params.config)||void 0===e?void 0:e.pageToken)}}class Lt extends c{constructor(e){var t;super(),t=this,this.apiClient=e,this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)},this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Mt(_e.PAGED_ITEM_BATCH_JOBS,e=>t.listInternal(e),await t.listInternal(e),e)}}createInlinedGenerateContentRequest(e){const t=Rt(this.apiClient,e),n=u("{model}:batchGenerateContent",t._url),r=t.batch.inputConfig.requests,o=r.requests,i=[];for(const s of o){const e=Object.assign({},s);if(e.systemInstruction){const t=e.systemInstruction;delete e.systemInstruction;const n=e.request;n.systemInstruction=t,e.request=n}i.push(e)}return r.requests=i,delete t.config,delete t._url,delete t._query,{path:n,body:t}}getGcsUri(e){return"string"===typeof e?e.startsWith("gs://")?e:void 0:!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0?e.gcsUri[0]:void 0}getBigqueryUri(e){return"string"===typeof e?e.startsWith("bq://")?e:void 0:Array.isArray(e)?void 0:e.bigqueryUri}formatDestination(e,t){const n=t?Object.assign({},t):{},r=Date.now().toString();if(n.displayName||(n.displayName="genaiBatchJob_".concat(r)),void 0===n.dest){const t=this.getGcsUri(e),o=this.getBigqueryUri(e);if(t)t.endsWith(".jsonl")?n.dest="".concat(t.slice(0,-6),"/dest"):n.dest="".concat(t,"_dest_").concat(r);else{if(!o)throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.");n.dest="".concat(o,"_dest_").concat(r)}}return n}async createInternal(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=Pt(this.apiClient,e);return s=u("batchPredictionJobs",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>At(e))}{const t=Rt(this.apiClient,e);return s=u("{model}:batchGenerateContent",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>Ct(e))}}async createEmbeddingsInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=jt(this.apiClient,e);return o=u("{model}:asyncBatchEmbedContent",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>Ct(e))}}async get(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=h(t,["name"]);return null!=r&&d(n,["_url","name"],Tt(e,r)),n}(this.apiClient,e);return s=u("batchPredictionJobs/{name}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>At(e))}{const t=function(e,t){const n={},r=h(t,["name"]);return null!=r&&d(n,["_url","name"],Tt(e,r)),n}(this.apiClient,e);return s=u("batches/{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>Ct(e))}}async cancel(e){var t,n,r,o;let i="",s={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=h(t,["name"]);return null!=r&&d(n,["_url","name"],Tt(e,r)),n}(this.apiClient,e);i=u("batchPredictionJobs/{name}:cancel",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}else{const t=function(e,t){const n={},r=h(t,["name"]);return null!=r&&d(n,["_url","name"],Tt(e,r)),n}(this.apiClient,e);i=u("batches/{name}:cancel",t._url),s=t._query,delete t._url,delete t._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal})}}async listInternal(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=Ut(e);return s=u("batchPredictionJobs",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);null!=r&&d(t,["nextPageToken"],r);const o=h(e,["batchPredictionJobs"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>At(e))),d(t,["batchJobs"],e)}return t}(e),n=new Ve;return Object.assign(n,t),n})}{const t=Dt(e);return s=u("batches",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);null!=r&&d(t,["nextPageToken"],r);const o=h(e,["operations"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>Ct(e))),d(t,["batchJobs"],e)}return t}(e),n=new Ve;return Object.assign(n,t),n})}}async delete(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=h(t,["name"]);return null!=r&&d(n,["_url","name"],Tt(e,r)),n}(this.apiClient,e);return s=u("batchPredictionJobs/{name}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["name"]);null!=r&&d(t,["name"],r);const o=h(e,["done"]);null!=o&&d(t,["done"],o);const i=h(e,["error"]);return null!=i&&d(t,["error"],i),t}(e))}{const t=function(e,t){const n={},r=h(t,["name"]);return null!=r&&d(n,["_url","name"],Tt(e,r)),n}(this.apiClient,e);return s=u("batches/{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["name"]);null!=r&&d(t,["name"],r);const o=h(e,["done"]);null!=o&&d(t,["done"],o);const i=h(e,["error"]);return null!=i&&d(t,["error"],i),t}(e))}}}function Ft(e){const t={},n=h(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["mediaResolution"]);null!=n&&d(t,["mediaResolution"],n);const r=h(e,["codeExecutionResult"]);null!=r&&d(t,["codeExecutionResult"],r);const o=h(e,["executableCode"]);null!=o&&d(t,["executableCode"],o);const i=h(e,["fileData"]);null!=i&&d(t,["fileData"],function(e){const t={};if(void 0!==h(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);null!=n&&d(t,["fileUri"],n);const r=h(e,["mimeType"]);null!=r&&d(t,["mimeType"],r);return t}(i));const s=h(e,["functionCall"]);null!=s&&d(t,["functionCall"],function(e){const t={},n=h(e,["id"]);null!=n&&d(t,["id"],n);const r=h(e,["args"]);null!=r&&d(t,["args"],r);const o=h(e,["name"]);null!=o&&d(t,["name"],o);if(void 0!==h(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==h(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(s));const a=h(e,["functionResponse"]);null!=a&&d(t,["functionResponse"],a);const l=h(e,["inlineData"]);null!=l&&d(t,["inlineData"],function(e){const t={},n=h(e,["data"]);if(null!=n&&d(t,["data"],n),void 0!==h(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=h(e,["mimeType"]);return null!=r&&d(t,["mimeType"],r),t}(l));const c=h(e,["text"]);null!=c&&d(t,["text"],c);const u=h(e,["thought"]);null!=u&&d(t,["thought"],u);const p=h(e,["thoughtSignature"]);null!=p&&d(t,["thoughtSignature"],p);const f=h(e,["videoMetadata"]);null!=f&&d(t,["videoMetadata"],f);return t}(e))),d(t,["parts"],e)}const r=h(e,["role"]);return null!=r&&d(t,["role"],r),t}function qt(e,t){const n=h(e,["ttl"]);void 0!==t&&null!=n&&d(t,["ttl"],n);const r=h(e,["expireTime"]);void 0!==t&&null!=r&&d(t,["expireTime"],r);const o=h(e,["displayName"]);void 0!==t&&null!=o&&d(t,["displayName"],o);const i=h(e,["contents"]);if(void 0!==t&&null!=i){let e=at(i);Array.isArray(e)&&(e=e.map(e=>Ft(e))),d(t,["contents"],e)}const s=h(e,["systemInstruction"]);void 0!==t&&null!=s&&d(t,["systemInstruction"],Ft(it(s)));const a=h(e,["tools"]);if(void 0!==t&&null!=a){let e=a;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["functionDeclarations"],e)}if(void 0!==h(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(e,["googleSearchRetrieval"]);null!=r&&d(t,["googleSearchRetrieval"],r);const o=h(e,["computerUse"]);null!=o&&d(t,["computerUse"],o);const i=h(e,["fileSearch"]);null!=i&&d(t,["fileSearch"],i);const s=h(e,["codeExecution"]);null!=s&&d(t,["codeExecution"],s);if(void 0!==h(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(e,["googleMaps"]);null!=a&&d(t,["googleMaps"],function(e){const t={};if(void 0!==h(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(e,["enableWidget"]);null!=n&&d(t,["enableWidget"],n);return t}(a));const l=h(e,["googleSearch"]);null!=l&&d(t,["googleSearch"],function(e){const t={};if(void 0!==h(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==h(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(e,["timeRangeFilter"]);null!=n&&d(t,["timeRangeFilter"],n);return t}(l));const c=h(e,["urlContext"]);null!=c&&d(t,["urlContext"],c);return t}(e))),d(t,["tools"],e)}const l=h(e,["toolConfig"]);if(void 0!==t&&null!=l&&d(t,["toolConfig"],function(e){const t={},n=h(e,["functionCallingConfig"]);null!=n&&d(t,["functionCallingConfig"],function(e){const t={},n=h(e,["mode"]);null!=n&&d(t,["mode"],n);const r=h(e,["allowedFunctionNames"]);null!=r&&d(t,["allowedFunctionNames"],r);if(void 0!==h(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(n));const r=h(e,["retrievalConfig"]);null!=r&&d(t,["retrievalConfig"],r);return t}(l)),void 0!==h(e,["kmsKeyName"]))throw new Error("kmsKeyName parameter is not supported in Gemini API.");return{}}function Bt(e,t){const n=h(e,["ttl"]);void 0!==t&&null!=n&&d(t,["ttl"],n);const r=h(e,["expireTime"]);void 0!==t&&null!=r&&d(t,["expireTime"],r);const o=h(e,["displayName"]);void 0!==t&&null!=o&&d(t,["displayName"],o);const i=h(e,["contents"]);if(void 0!==t&&null!=i){let e=at(i);Array.isArray(e)&&(e=e.map(e=>e)),d(t,["contents"],e)}const s=h(e,["systemInstruction"]);void 0!==t&&null!=s&&d(t,["systemInstruction"],it(s));const a=h(e,["tools"]);if(void 0!==t&&null!=a){let e=a;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==h(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(e,["description"]);null!=n&&d(t,["description"],n);const r=h(e,["name"]);null!=r&&d(t,["name"],r);const o=h(e,["parameters"]);null!=o&&d(t,["parameters"],o);const i=h(e,["parametersJsonSchema"]);null!=i&&d(t,["parametersJsonSchema"],i);const s=h(e,["response"]);null!=s&&d(t,["response"],s);const a=h(e,["responseJsonSchema"]);null!=a&&d(t,["responseJsonSchema"],a);return t}(e))),d(t,["functionDeclarations"],e)}const r=h(e,["retrieval"]);null!=r&&d(t,["retrieval"],r);const o=h(e,["googleSearchRetrieval"]);null!=o&&d(t,["googleSearchRetrieval"],o);const i=h(e,["computerUse"]);null!=i&&d(t,["computerUse"],i);if(void 0!==h(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=h(e,["codeExecution"]);null!=s&&d(t,["codeExecution"],s);const a=h(e,["enterpriseWebSearch"]);null!=a&&d(t,["enterpriseWebSearch"],a);const l=h(e,["googleMaps"]);null!=l&&d(t,["googleMaps"],l);const c=h(e,["googleSearch"]);null!=c&&d(t,["googleSearch"],c);const u=h(e,["urlContext"]);null!=u&&d(t,["urlContext"],u);return t}(e))),d(t,["tools"],e)}const l=h(e,["toolConfig"]);void 0!==t&&null!=l&&d(t,["toolConfig"],l);const c=h(e,["kmsKeyName"]);return void 0!==t&&null!=c&&d(t,["encryption_spec","kmsKeyName"],c),{}}function Gt(e){const t={},n=h(e,["config"]);return null!=n&&function(e,t){const n=h(e,["pageSize"]);void 0!==t&&null!=n&&d(t,["_query","pageSize"],n);const r=h(e,["pageToken"]);void 0!==t&&null!=r&&d(t,["_query","pageToken"],r)}(n,t),t}function Ht(e){const t={},n=h(e,["config"]);return null!=n&&function(e,t){const n=h(e,["pageSize"]);void 0!==t&&null!=n&&d(t,["_query","pageSize"],n);const r=h(e,["pageToken"]);void 0!==t&&null!=r&&d(t,["_query","pageToken"],r)}(n,t),t}function Vt(e,t){const n={},r=h(t,["name"]);null!=r&&d(n,["_url","name"],ft(e,r));const o=h(t,["config"]);return null!=o&&function(e,t){const n=h(e,["ttl"]);void 0!==t&&null!=n&&d(t,["ttl"],n);const r=h(e,["expireTime"]);void 0!==t&&null!=r&&d(t,["expireTime"],r)}(o,n),n}function zt(e,t){const n={},r=h(t,["name"]);null!=r&&d(n,["_url","name"],ft(e,r));const o=h(t,["config"]);return null!=o&&function(e,t){const n=h(e,["ttl"]);void 0!==t&&null!=n&&d(t,["ttl"],n);const r=h(e,["expireTime"]);void 0!==t&&null!=r&&d(t,["expireTime"],r)}(o,n),n}class Jt extends c{constructor(e){var t;super(),t=this,this.apiClient=e,this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Mt(_e.PAGED_ITEM_CACHED_CONTENTS,e=>t.listInternal(e),await t.listInternal(e),e)}}async create(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["model"],Ye(e,r));const o=h(t,["config"]);return null!=o&&Bt(o,n),n}(this.apiClient,e);return s=u("cachedContents",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>e)}{const t=function(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["model"],Ye(e,r));const o=h(t,["config"]);return null!=o&&qt(o,n),n}(this.apiClient,e);return s=u("cachedContents",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>e)}}async get(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=h(t,["name"]);return null!=r&&d(n,["_url","name"],ft(e,r)),n}(this.apiClient,e);return s=u("{name}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>e)}{const t=function(e,t){const n={},r=h(t,["name"]);return null!=r&&d(n,["_url","name"],ft(e,r)),n}(this.apiClient,e);return s=u("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>e)}}async delete(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=h(t,["name"]);return null!=r&&d(n,["_url","name"],ft(e,r)),n}(this.apiClient,e);return s=u("{name}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);return null!=n&&d(t,["sdkHttpResponse"],n),t}(e),n=new De;return Object.assign(n,t),n})}{const t=function(e,t){const n={},r=h(t,["name"]);return null!=r&&d(n,["_url","name"],ft(e,r)),n}(this.apiClient,e);return s=u("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);return null!=n&&d(t,["sdkHttpResponse"],n),t}(e),n=new De;return Object.assign(n,t),n})}}async update(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=zt(this.apiClient,e);return s=u("{name}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>e)}{const t=Vt(this.apiClient,e);return s=u("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>e)}}async listInternal(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=Ht(e);return s=u("cachedContents",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);null!=r&&d(t,["nextPageToken"],r);const o=h(e,["cachedContents"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["cachedContents"],e)}return t}(e),n=new Ue;return Object.assign(n,t),n})}{const t=Gt(e);return s=u("cachedContents",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);null!=r&&d(t,["nextPageToken"],r);const o=h(e,["cachedContents"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["cachedContents"],e)}return t}(e),n=new Ue;return Object.assign(n,t),n})}}}function Wt(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kt(e){return this instanceof Kt?(this.v=e,this):new Kt(e)}function Yt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r=Object.create(("function"===typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||a(e,t)})},t&&(r[e]=t(r[e])))}function a(e,t){try{(n=o[e](t)).value instanceof Kt?Promise.resolve(n.value.v).then(l,c):u(i[0][2],n)}catch(r){u(i[0][3],r)}var n}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function $t(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=Wt(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,o,(t=e[n](t)).done,t.value)})}}}function Qt(e){var t;if(void 0==e.candidates||0===e.candidates.length)return!1;const n=null===(t=e.candidates[0])||void 0===t?void 0:t.content;return void 0!==n&&Xt(n)}function Xt(e){if(void 0===e.parts||0===e.parts.length)return!1;for(const t of e.parts)if(void 0===t||0===Object.keys(t).length)return!1;return!0}function Zt(e){if(void 0===e||0===e.length)return[];const t=[],n=e.length;let r=0;for(;r<n;)if("user"===e[r].role)t.push(e[r]),r++;else{const o=[];let i=!0;for(;r<n&&"model"===e[r].role;)o.push(e[r]),i&&!Xt(e[r])&&(i=!1),r++;i?t.push(...o):t.pop()}return t}"function"===typeof SuppressedError&&SuppressedError;class en{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new tn(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class tn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];this.apiClient=e,this.modelsModule=t,this.model=n,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),function(e){if(0!==e.length)for(const t of e)if("user"!==t.role&&"model"!==t.role)throw new Error("Role must be user or model, but got ".concat(t.role,"."))}(o)}async sendMessage(e){var t;await this.sendPromise;const n=it(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});return this.sendPromise=(async()=>{var e,t,o;const i=await r,s=null===(t=null===(e=i.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content,a=i.automaticFunctionCallingHistory,l=this.getHistory(!0).length;let c=[];null!=a&&(c=null!==(o=a.slice(l))&&void 0!==o?o:[]);const u=s?[s]:[];this.recordHistory(n,u,c)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const n=it(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,n)}getHistory(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?Zt(this.history):this.history;return structuredClone(e)}processStreamResponse(e,t){var n,r;return Yt(this,arguments,function*(){var o,i,s,a;const l=[];try{for(var c,u=!0,d=$t(e);!(o=(c=yield Kt(d.next())).done);u=!0){a=c.value,u=!1;const e=a;if(Qt(e)){const t=null===(r=null===(n=e.candidates)||void 0===n?void 0:n[0])||void 0===r?void 0:r.content;void 0!==t&&l.push(t)}yield yield Kt(e)}}catch(h){i={error:h}}finally{try{u||o||!(s=d.return)||(yield Kt(s.call(d)))}finally{if(i)throw i.error}}this.recordHistory(t,l)})}recordHistory(e,t,n){let r=[];t.length>0&&t.every(e=>void 0!==e.role)?r=t:r.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...Zt(n)):this.history.push(e),this.history.push(...r)}}class nn extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,nn.prototype)}}function rn(e){const t={},n=h(e,["config"]);return null!=n&&function(e,t){const n=h(e,["pageSize"]);void 0!==t&&null!=n&&d(t,["_query","pageSize"],n);const r=h(e,["pageToken"]);void 0!==t&&null!=r&&d(t,["_query","pageToken"],r)}(n,t),t}class on extends c{constructor(e){var t;super(),t=this,this.apiClient=e,this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Mt(_e.PAGED_ITEM_FILES,e=>t.listInternal(e),await t.listInternal(e),e)}}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(e=>e)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=rn(e);return o=u("files",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);null!=r&&d(t,["nextPageToken"],r);const o=h(e,["files"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["files"],e)}return t}(e),n=new Be;return Object.assign(n,t),n})}}async createInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=h(e,["file"]);return null!=n&&d(t,["file"],n),t}(e);return o=u("upload/v1beta/files",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);return null!=n&&d(t,["sdkHttpResponse"],n),t}(e),n=new Ge;return Object.assign(n,t),n})}}async get(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=h(e,["name"]);return null!=n&&d(t,["_url","file"],vt(n)),t}(e);return o=u("files/{file}",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>e)}}async delete(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=h(e,["name"]);return null!=n&&d(t,["_url","file"],vt(n)),t}(e);return o=u("files/{file}",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);return null!=n&&d(t,["sdkHttpResponse"],n),t}(e),n=new He;return Object.assign(n,t),n})}}}function sn(e){const t={},n=h(e,["data"]);if(null!=n&&d(t,["data"],n),void 0!==h(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=h(e,["mimeType"]);return null!=r&&d(t,["mimeType"],r),t}function an(e){const t={},n=h(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["mediaResolution"]);null!=n&&d(t,["mediaResolution"],n);const r=h(e,["codeExecutionResult"]);null!=r&&d(t,["codeExecutionResult"],r);const o=h(e,["executableCode"]);null!=o&&d(t,["executableCode"],o);const i=h(e,["fileData"]);null!=i&&d(t,["fileData"],function(e){const t={};if(void 0!==h(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);null!=n&&d(t,["fileUri"],n);const r=h(e,["mimeType"]);null!=r&&d(t,["mimeType"],r);return t}(i));const s=h(e,["functionCall"]);null!=s&&d(t,["functionCall"],function(e){const t={},n=h(e,["id"]);null!=n&&d(t,["id"],n);const r=h(e,["args"]);null!=r&&d(t,["args"],r);const o=h(e,["name"]);null!=o&&d(t,["name"],o);if(void 0!==h(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==h(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(s));const a=h(e,["functionResponse"]);null!=a&&d(t,["functionResponse"],a);const l=h(e,["inlineData"]);null!=l&&d(t,["inlineData"],sn(l));const c=h(e,["text"]);null!=c&&d(t,["text"],c);const u=h(e,["thought"]);null!=u&&d(t,["thought"],u);const p=h(e,["thoughtSignature"]);null!=p&&d(t,["thoughtSignature"],p);const f=h(e,["videoMetadata"]);null!=f&&d(t,["videoMetadata"],f);return t}(e))),d(t,["parts"],e)}const r=h(e,["role"]);return null!=r&&d(t,["role"],r),t}function ln(e,t){const n=h(e,["generationConfig"]);void 0!==t&&null!=n&&d(t,["setup","generationConfig"],n);const r=h(e,["responseModalities"]);void 0!==t&&null!=r&&d(t,["setup","generationConfig","responseModalities"],r);const o=h(e,["temperature"]);void 0!==t&&null!=o&&d(t,["setup","generationConfig","temperature"],o);const i=h(e,["topP"]);void 0!==t&&null!=i&&d(t,["setup","generationConfig","topP"],i);const s=h(e,["topK"]);void 0!==t&&null!=s&&d(t,["setup","generationConfig","topK"],s);const a=h(e,["maxOutputTokens"]);void 0!==t&&null!=a&&d(t,["setup","generationConfig","maxOutputTokens"],a);const l=h(e,["mediaResolution"]);void 0!==t&&null!=l&&d(t,["setup","generationConfig","mediaResolution"],l);const c=h(e,["seed"]);void 0!==t&&null!=c&&d(t,["setup","generationConfig","seed"],c);const u=h(e,["speechConfig"]);void 0!==t&&null!=u&&d(t,["setup","generationConfig","speechConfig"],dt(u));const p=h(e,["thinkingConfig"]);void 0!==t&&null!=p&&d(t,["setup","generationConfig","thinkingConfig"],p);const f=h(e,["enableAffectiveDialog"]);void 0!==t&&null!=f&&d(t,["setup","generationConfig","enableAffectiveDialog"],f);const m=h(e,["systemInstruction"]);void 0!==t&&null!=m&&d(t,["setup","systemInstruction"],an(it(m)));const g=h(e,["tools"]);if(void 0!==t&&null!=g){let e=pt(g);Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["functionDeclarations"],e)}if(void 0!==h(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(e,["googleSearchRetrieval"]);null!=r&&d(t,["googleSearchRetrieval"],r);const o=h(e,["computerUse"]);null!=o&&d(t,["computerUse"],o);const i=h(e,["fileSearch"]);null!=i&&d(t,["fileSearch"],i);const s=h(e,["codeExecution"]);null!=s&&d(t,["codeExecution"],s);if(void 0!==h(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(e,["googleMaps"]);null!=a&&d(t,["googleMaps"],function(e){const t={};if(void 0!==h(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(e,["enableWidget"]);return null!=n&&d(t,["enableWidget"],n),t}(a));const l=h(e,["googleSearch"]);null!=l&&d(t,["googleSearch"],function(e){const t={};if(void 0!==h(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==h(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(e,["timeRangeFilter"]);return null!=n&&d(t,["timeRangeFilter"],n),t}(l));const c=h(e,["urlContext"]);null!=c&&d(t,["urlContext"],c);return t}(ht(e)))),d(t,["setup","tools"],e)}const v=h(e,["sessionResumption"]);void 0!==t&&null!=v&&d(t,["setup","sessionResumption"],function(e){const t={},n=h(e,["handle"]);null!=n&&d(t,["handle"],n);if(void 0!==h(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}(v));const y=h(e,["inputAudioTranscription"]);void 0!==t&&null!=y&&d(t,["setup","inputAudioTranscription"],y);const b=h(e,["outputAudioTranscription"]);void 0!==t&&null!=b&&d(t,["setup","outputAudioTranscription"],b);const _=h(e,["realtimeInputConfig"]);void 0!==t&&null!=_&&d(t,["setup","realtimeInputConfig"],_);const w=h(e,["contextWindowCompression"]);void 0!==t&&null!=w&&d(t,["setup","contextWindowCompression"],w);const E=h(e,["proactivity"]);return void 0!==t&&null!=E&&d(t,["setup","proactivity"],E),{}}function cn(e,t){const n=h(e,["generationConfig"]);void 0!==t&&null!=n&&d(t,["setup","generationConfig"],function(e){const t={},n=h(e,["modelSelectionConfig"]);null!=n&&d(t,["modelConfig"],n);const r=h(e,["responseJsonSchema"]);null!=r&&d(t,["responseJsonSchema"],r);const o=h(e,["audioTimestamp"]);null!=o&&d(t,["audioTimestamp"],o);const i=h(e,["candidateCount"]);null!=i&&d(t,["candidateCount"],i);const s=h(e,["enableAffectiveDialog"]);null!=s&&d(t,["enableAffectiveDialog"],s);const a=h(e,["frequencyPenalty"]);null!=a&&d(t,["frequencyPenalty"],a);const l=h(e,["logprobs"]);null!=l&&d(t,["logprobs"],l);const c=h(e,["maxOutputTokens"]);null!=c&&d(t,["maxOutputTokens"],c);const u=h(e,["mediaResolution"]);null!=u&&d(t,["mediaResolution"],u);const p=h(e,["presencePenalty"]);null!=p&&d(t,["presencePenalty"],p);const f=h(e,["responseLogprobs"]);null!=f&&d(t,["responseLogprobs"],f);const m=h(e,["responseMimeType"]);null!=m&&d(t,["responseMimeType"],m);const g=h(e,["responseModalities"]);null!=g&&d(t,["responseModalities"],g);const v=h(e,["responseSchema"]);null!=v&&d(t,["responseSchema"],v);const y=h(e,["routingConfig"]);null!=y&&d(t,["routingConfig"],y);const b=h(e,["seed"]);null!=b&&d(t,["seed"],b);const _=h(e,["speechConfig"]);null!=_&&d(t,["speechConfig"],pn(_));const w=h(e,["stopSequences"]);null!=w&&d(t,["stopSequences"],w);const E=h(e,["temperature"]);null!=E&&d(t,["temperature"],E);const S=h(e,["thinkingConfig"]);null!=S&&d(t,["thinkingConfig"],S);const T=h(e,["topK"]);null!=T&&d(t,["topK"],T);const O=h(e,["topP"]);if(null!=O&&d(t,["topP"],O),void 0!==h(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(n));const r=h(e,["responseModalities"]);void 0!==t&&null!=r&&d(t,["setup","generationConfig","responseModalities"],r);const o=h(e,["temperature"]);void 0!==t&&null!=o&&d(t,["setup","generationConfig","temperature"],o);const i=h(e,["topP"]);void 0!==t&&null!=i&&d(t,["setup","generationConfig","topP"],i);const s=h(e,["topK"]);void 0!==t&&null!=s&&d(t,["setup","generationConfig","topK"],s);const a=h(e,["maxOutputTokens"]);void 0!==t&&null!=a&&d(t,["setup","generationConfig","maxOutputTokens"],a);const l=h(e,["mediaResolution"]);void 0!==t&&null!=l&&d(t,["setup","generationConfig","mediaResolution"],l);const c=h(e,["seed"]);void 0!==t&&null!=c&&d(t,["setup","generationConfig","seed"],c);const u=h(e,["speechConfig"]);void 0!==t&&null!=u&&d(t,["setup","generationConfig","speechConfig"],pn(dt(u)));const p=h(e,["thinkingConfig"]);void 0!==t&&null!=p&&d(t,["setup","generationConfig","thinkingConfig"],p);const f=h(e,["enableAffectiveDialog"]);void 0!==t&&null!=f&&d(t,["setup","generationConfig","enableAffectiveDialog"],f);const m=h(e,["systemInstruction"]);void 0!==t&&null!=m&&d(t,["setup","systemInstruction"],it(m));const g=h(e,["tools"]);if(void 0!==t&&null!=g){let e=pt(g);Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==h(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(e,["description"]);null!=n&&d(t,["description"],n);const r=h(e,["name"]);null!=r&&d(t,["name"],r);const o=h(e,["parameters"]);null!=o&&d(t,["parameters"],o);const i=h(e,["parametersJsonSchema"]);null!=i&&d(t,["parametersJsonSchema"],i);const s=h(e,["response"]);null!=s&&d(t,["response"],s);const a=h(e,["responseJsonSchema"]);return null!=a&&d(t,["responseJsonSchema"],a),t}(e))),d(t,["functionDeclarations"],e)}const r=h(e,["retrieval"]);null!=r&&d(t,["retrieval"],r);const o=h(e,["googleSearchRetrieval"]);null!=o&&d(t,["googleSearchRetrieval"],o);const i=h(e,["computerUse"]);null!=i&&d(t,["computerUse"],i);if(void 0!==h(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=h(e,["codeExecution"]);null!=s&&d(t,["codeExecution"],s);const a=h(e,["enterpriseWebSearch"]);null!=a&&d(t,["enterpriseWebSearch"],a);const l=h(e,["googleMaps"]);null!=l&&d(t,["googleMaps"],l);const c=h(e,["googleSearch"]);null!=c&&d(t,["googleSearch"],c);const u=h(e,["urlContext"]);null!=u&&d(t,["urlContext"],u);return t}(ht(e)))),d(t,["setup","tools"],e)}const v=h(e,["sessionResumption"]);void 0!==t&&null!=v&&d(t,["setup","sessionResumption"],v);const y=h(e,["inputAudioTranscription"]);void 0!==t&&null!=y&&d(t,["setup","inputAudioTranscription"],y);const b=h(e,["outputAudioTranscription"]);void 0!==t&&null!=b&&d(t,["setup","outputAudioTranscription"],b);const _=h(e,["realtimeInputConfig"]);void 0!==t&&null!=_&&d(t,["setup","realtimeInputConfig"],_);const w=h(e,["contextWindowCompression"]);void 0!==t&&null!=w&&d(t,["setup","contextWindowCompression"],w);const E=h(e,["proactivity"]);return void 0!==t&&null!=E&&d(t,["setup","proactivity"],E),{}}function un(e){const t={},n=h(e,["media"]);if(null!=n){let e=$e(n);Array.isArray(e)&&(e=e.map(e=>sn(e))),d(t,["mediaChunks"],e)}const r=h(e,["audio"]);null!=r&&d(t,["audio"],sn(Ze(r)));const o=h(e,["audioStreamEnd"]);null!=o&&d(t,["audioStreamEnd"],o);const i=h(e,["video"]);null!=i&&d(t,["video"],sn(Xe(i)));const s=h(e,["text"]);null!=s&&d(t,["text"],s);const a=h(e,["activityStart"]);null!=a&&d(t,["activityStart"],a);const l=h(e,["activityEnd"]);return null!=l&&d(t,["activityEnd"],l),t}function dn(e){const t={},n=h(e,["media"]);if(null!=n){let e=$e(n);Array.isArray(e)&&(e=e.map(e=>e)),d(t,["mediaChunks"],e)}const r=h(e,["audio"]);null!=r&&d(t,["audio"],Ze(r));const o=h(e,["audioStreamEnd"]);null!=o&&d(t,["audioStreamEnd"],o);const i=h(e,["video"]);null!=i&&d(t,["video"],Xe(i));const s=h(e,["text"]);null!=s&&d(t,["text"],s);const a=h(e,["activityStart"]);null!=a&&d(t,["activityStart"],a);const l=h(e,["activityEnd"]);return null!=l&&d(t,["activityEnd"],l),t}function hn(e){const t={},n=h(e,["setupComplete"]);null!=n&&d(t,["setupComplete"],n);const r=h(e,["serverContent"]);null!=r&&d(t,["serverContent"],r);const o=h(e,["toolCall"]);null!=o&&d(t,["toolCall"],o);const i=h(e,["toolCallCancellation"]);null!=i&&d(t,["toolCallCancellation"],i);const s=h(e,["usageMetadata"]);null!=s&&d(t,["usageMetadata"],function(e){const t={},n=h(e,["promptTokenCount"]);null!=n&&d(t,["promptTokenCount"],n);const r=h(e,["cachedContentTokenCount"]);null!=r&&d(t,["cachedContentTokenCount"],r);const o=h(e,["candidatesTokenCount"]);null!=o&&d(t,["responseTokenCount"],o);const i=h(e,["toolUsePromptTokenCount"]);null!=i&&d(t,["toolUsePromptTokenCount"],i);const s=h(e,["thoughtsTokenCount"]);null!=s&&d(t,["thoughtsTokenCount"],s);const a=h(e,["totalTokenCount"]);null!=a&&d(t,["totalTokenCount"],a);const l=h(e,["promptTokensDetails"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["promptTokensDetails"],e)}const c=h(e,["cacheTokensDetails"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["cacheTokensDetails"],e)}const u=h(e,["candidatesTokensDetails"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["responseTokensDetails"],e)}const p=h(e,["toolUsePromptTokensDetails"]);if(null!=p){let e=p;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["toolUsePromptTokensDetails"],e)}const f=h(e,["trafficType"]);null!=f&&d(t,["trafficType"],f);return t}(s));const a=h(e,["goAway"]);null!=a&&d(t,["goAway"],a);const l=h(e,["sessionResumptionUpdate"]);return null!=l&&d(t,["sessionResumptionUpdate"],l),t}function pn(e){const t={},n=h(e,["languageCode"]);null!=n&&d(t,["languageCode"],n);const r=h(e,["voiceConfig"]);if(null!=r&&d(t,["voiceConfig"],r),void 0!==h(e,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function fn(e){const t={},n=h(e,["content"]);null!=n&&d(t,["content"],n);const r=h(e,["citationMetadata"]);null!=r&&d(t,["citationMetadata"],function(e){const t={},n=h(e,["citationSources"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["citations"],e)}return t}(r));const o=h(e,["tokenCount"]);null!=o&&d(t,["tokenCount"],o);const i=h(e,["finishReason"]);null!=i&&d(t,["finishReason"],i);const s=h(e,["avgLogprobs"]);null!=s&&d(t,["avgLogprobs"],s);const a=h(e,["groundingMetadata"]);null!=a&&d(t,["groundingMetadata"],a);const l=h(e,["index"]);null!=l&&d(t,["index"],l);const c=h(e,["logprobsResult"]);null!=c&&d(t,["logprobsResult"],c);const u=h(e,["safetyRatings"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["safetyRatings"],e)}const p=h(e,["urlContextMetadata"]);return null!=p&&d(t,["urlContextMetadata"],p),t}function mn(e){const t={},n=h(e,["values"]);null!=n&&d(t,["values"],n);const r=h(e,["statistics"]);return null!=r&&d(t,["statistics"],function(e){const t={},n=h(e,["truncated"]);null!=n&&d(t,["truncated"],n);const r=h(e,["token_count"]);null!=r&&d(t,["tokenCount"],r);return t}(r)),t}function gn(e){const t={},n=h(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["mediaResolution"]);null!=n&&d(t,["mediaResolution"],n);const r=h(e,["codeExecutionResult"]);null!=r&&d(t,["codeExecutionResult"],r);const o=h(e,["executableCode"]);null!=o&&d(t,["executableCode"],o);const i=h(e,["fileData"]);null!=i&&d(t,["fileData"],function(e){const t={};if(void 0!==h(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);null!=n&&d(t,["fileUri"],n);const r=h(e,["mimeType"]);null!=r&&d(t,["mimeType"],r);return t}(i));const s=h(e,["functionCall"]);null!=s&&d(t,["functionCall"],function(e){const t={},n=h(e,["id"]);null!=n&&d(t,["id"],n);const r=h(e,["args"]);null!=r&&d(t,["args"],r);const o=h(e,["name"]);null!=o&&d(t,["name"],o);if(void 0!==h(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==h(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(s));const a=h(e,["functionResponse"]);null!=a&&d(t,["functionResponse"],a);const l=h(e,["inlineData"]);null!=l&&d(t,["inlineData"],function(e){const t={},n=h(e,["data"]);if(null!=n&&d(t,["data"],n),void 0!==h(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=h(e,["mimeType"]);return null!=r&&d(t,["mimeType"],r),t}(l));const c=h(e,["text"]);null!=c&&d(t,["text"],c);const u=h(e,["thought"]);null!=u&&d(t,["thought"],u);const p=h(e,["thoughtSignature"]);null!=p&&d(t,["thoughtSignature"],p);const f=h(e,["videoMetadata"]);null!=f&&d(t,["videoMetadata"],f);return t}(e))),d(t,["parts"],e)}const r=h(e,["role"]);return null!=r&&d(t,["role"],r),t}function vn(e,t){const n=h(e,["systemInstruction"]);void 0!==t&&null!=n&&d(t,["systemInstruction"],it(n));const r=h(e,["tools"]);if(void 0!==t&&null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>Qn(e))),d(t,["tools"],e)}const o=h(e,["generationConfig"]);return void 0!==t&&null!=o&&d(t,["generationConfig"],function(e){const t={},n=h(e,["modelSelectionConfig"]);null!=n&&d(t,["modelConfig"],n);const r=h(e,["responseJsonSchema"]);null!=r&&d(t,["responseJsonSchema"],r);const o=h(e,["audioTimestamp"]);null!=o&&d(t,["audioTimestamp"],o);const i=h(e,["candidateCount"]);null!=i&&d(t,["candidateCount"],i);const s=h(e,["enableAffectiveDialog"]);null!=s&&d(t,["enableAffectiveDialog"],s);const a=h(e,["frequencyPenalty"]);null!=a&&d(t,["frequencyPenalty"],a);const l=h(e,["logprobs"]);null!=l&&d(t,["logprobs"],l);const c=h(e,["maxOutputTokens"]);null!=c&&d(t,["maxOutputTokens"],c);const u=h(e,["mediaResolution"]);null!=u&&d(t,["mediaResolution"],u);const p=h(e,["presencePenalty"]);null!=p&&d(t,["presencePenalty"],p);const f=h(e,["responseLogprobs"]);null!=f&&d(t,["responseLogprobs"],f);const m=h(e,["responseMimeType"]);null!=m&&d(t,["responseMimeType"],m);const g=h(e,["responseModalities"]);null!=g&&d(t,["responseModalities"],g);const v=h(e,["responseSchema"]);null!=v&&d(t,["responseSchema"],v);const y=h(e,["routingConfig"]);null!=y&&d(t,["routingConfig"],y);const b=h(e,["seed"]);null!=b&&d(t,["seed"],b);const _=h(e,["speechConfig"]);null!=_&&d(t,["speechConfig"],$n(_));const w=h(e,["stopSequences"]);null!=w&&d(t,["stopSequences"],w);const E=h(e,["temperature"]);null!=E&&d(t,["temperature"],E);const S=h(e,["thinkingConfig"]);null!=S&&d(t,["thinkingConfig"],S);const T=h(e,["topK"]);null!=T&&d(t,["topK"],T);const O=h(e,["topP"]);null!=O&&d(t,["topP"],O);if(void 0!==h(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(o)),{}}function yn(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","model"],Ke(e,r));const o=h(t,["contents"]);if(null!=o){let e=at(o);Array.isArray(e)&&(e=e.map(e=>gn(e))),d(n,["contents"],e)}const i=h(t,["config"]);return null!=i&&function(e){if(void 0!==h(e,["systemInstruction"]))throw new Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==h(e,["tools"]))throw new Error("tools parameter is not supported in Gemini API.");if(void 0!==h(e,["generationConfig"]))throw new Error("generationConfig parameter is not supported in Gemini API.")}(i),n}function bn(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","model"],Ke(e,r));const o=h(t,["prompt"]);null!=o&&d(n,["instances[0]","prompt"],o);const i=h(t,["referenceImages"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["referenceImage"]);null!=n&&d(t,["referenceImage"],qn(n));const r=h(e,["referenceId"]);null!=r&&d(t,["referenceId"],r);const o=h(e,["referenceType"]);null!=o&&d(t,["referenceType"],o);const i=h(e,["maskImageConfig"]);null!=i&&d(t,["maskImageConfig"],function(e){const t={},n=h(e,["maskMode"]);null!=n&&d(t,["maskMode"],n);const r=h(e,["segmentationClasses"]);null!=r&&d(t,["maskClasses"],r);const o=h(e,["maskDilation"]);null!=o&&d(t,["dilation"],o);return t}(i));const s=h(e,["controlImageConfig"]);null!=s&&d(t,["controlImageConfig"],function(e){const t={},n=h(e,["controlType"]);null!=n&&d(t,["controlType"],n);const r=h(e,["enableControlImageComputation"]);return null!=r&&d(t,["computeControl"],r),t}(s));const a=h(e,["styleImageConfig"]);null!=a&&d(t,["styleImageConfig"],a);const l=h(e,["subjectImageConfig"]);null!=l&&d(t,["subjectImageConfig"],l);return t}(e))),d(n,["instances[0]","referenceImages"],e)}const s=h(t,["config"]);return null!=s&&function(e,t){const n=h(e,["outputGcsUri"]);void 0!==t&&null!=n&&d(t,["parameters","storageUri"],n);const r=h(e,["negativePrompt"]);void 0!==t&&null!=r&&d(t,["parameters","negativePrompt"],r);const o=h(e,["numberOfImages"]);void 0!==t&&null!=o&&d(t,["parameters","sampleCount"],o);const i=h(e,["aspectRatio"]);void 0!==t&&null!=i&&d(t,["parameters","aspectRatio"],i);const s=h(e,["guidanceScale"]);void 0!==t&&null!=s&&d(t,["parameters","guidanceScale"],s);const a=h(e,["seed"]);void 0!==t&&null!=a&&d(t,["parameters","seed"],a);const l=h(e,["safetyFilterLevel"]);void 0!==t&&null!=l&&d(t,["parameters","safetySetting"],l);const c=h(e,["personGeneration"]);void 0!==t&&null!=c&&d(t,["parameters","personGeneration"],c);const u=h(e,["includeSafetyAttributes"]);void 0!==t&&null!=u&&d(t,["parameters","includeSafetyAttributes"],u);const p=h(e,["includeRaiReason"]);void 0!==t&&null!=p&&d(t,["parameters","includeRaiReason"],p);const f=h(e,["language"]);void 0!==t&&null!=f&&d(t,["parameters","language"],f);const m=h(e,["outputMimeType"]);void 0!==t&&null!=m&&d(t,["parameters","outputOptions","mimeType"],m);const g=h(e,["outputCompressionQuality"]);void 0!==t&&null!=g&&d(t,["parameters","outputOptions","compressionQuality"],g);const v=h(e,["addWatermark"]);void 0!==t&&null!=v&&d(t,["parameters","addWatermark"],v);const y=h(e,["labels"]);void 0!==t&&null!=y&&d(t,["labels"],y);const b=h(e,["editMode"]);void 0!==t&&null!=b&&d(t,["parameters","editMode"],b);const _=h(e,["baseSteps"]);void 0!==t&&null!=_&&d(t,["parameters","editConfig","baseSteps"],_)}(s,n),n}function _n(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","model"],Ke(e,r));const o=h(t,["contents"]);if(null!=o){let t=st(e,o);Array.isArray(t)&&(t=t.map(e=>e)),d(n,["requests[]","content"],t)}const i=h(t,["config"]);null!=i&&function(e,t){const n=h(e,["taskType"]);void 0!==t&&null!=n&&d(t,["requests[]","taskType"],n);const r=h(e,["title"]);void 0!==t&&null!=r&&d(t,["requests[]","title"],r);const o=h(e,["outputDimensionality"]);if(void 0!==t&&null!=o&&d(t,["requests[]","outputDimensionality"],o),void 0!==h(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==h(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.")}(i,n);const s=h(t,["model"]);return void 0!==s&&d(n,["requests[]","model"],Ke(e,s)),n}function wn(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","model"],Ke(e,r));const o=h(t,["contents"]);if(null!=o){let t=st(e,o);Array.isArray(t)&&(t=t.map(e=>e)),d(n,["instances[]","content"],t)}const i=h(t,["config"]);return null!=i&&function(e,t){const n=h(e,["taskType"]);void 0!==t&&null!=n&&d(t,["instances[]","task_type"],n);const r=h(e,["title"]);void 0!==t&&null!=r&&d(t,["instances[]","title"],r);const o=h(e,["outputDimensionality"]);void 0!==t&&null!=o&&d(t,["parameters","outputDimensionality"],o);const i=h(e,["mimeType"]);void 0!==t&&null!=i&&d(t,["instances[]","mimeType"],i);const s=h(e,["autoTruncate"]);void 0!==t&&null!=s&&d(t,["parameters","autoTruncate"],s)}(i,n),n}function En(e,t,n){const r={},o=h(t,["systemInstruction"]);void 0!==n&&null!=o&&d(n,["systemInstruction"],gn(it(o)));const i=h(t,["temperature"]);null!=i&&d(r,["temperature"],i);const s=h(t,["topP"]);null!=s&&d(r,["topP"],s);const a=h(t,["topK"]);null!=a&&d(r,["topK"],a);const l=h(t,["candidateCount"]);null!=l&&d(r,["candidateCount"],l);const c=h(t,["maxOutputTokens"]);null!=c&&d(r,["maxOutputTokens"],c);const u=h(t,["stopSequences"]);null!=u&&d(r,["stopSequences"],u);const p=h(t,["responseLogprobs"]);null!=p&&d(r,["responseLogprobs"],p);const f=h(t,["logprobs"]);null!=f&&d(r,["logprobs"],f);const m=h(t,["presencePenalty"]);null!=m&&d(r,["presencePenalty"],m);const g=h(t,["frequencyPenalty"]);null!=g&&d(r,["frequencyPenalty"],g);const v=h(t,["seed"]);null!=v&&d(r,["seed"],v);const y=h(t,["responseMimeType"]);null!=y&&d(r,["responseMimeType"],y);const b=h(t,["responseSchema"]);null!=b&&d(r,["responseSchema"],ct(b));const _=h(t,["responseJsonSchema"]);if(null!=_&&d(r,["responseJsonSchema"],_),void 0!==h(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==h(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=h(t,["safetySettings"]);if(void 0!==n&&null!=w){let e=w;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["category"]);null!=n&&d(t,["category"],n);if(void 0!==h(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const r=h(e,["threshold"]);null!=r&&d(t,["threshold"],r);return t}(e))),d(n,["safetySettings"],e)}const E=h(t,["tools"]);if(void 0!==n&&null!=E){let e=pt(E);Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["functionDeclarations"],e)}if(void 0!==h(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(e,["googleSearchRetrieval"]);null!=r&&d(t,["googleSearchRetrieval"],r);const o=h(e,["computerUse"]);null!=o&&d(t,["computerUse"],o);const i=h(e,["fileSearch"]);null!=i&&d(t,["fileSearch"],i);const s=h(e,["codeExecution"]);null!=s&&d(t,["codeExecution"],s);if(void 0!==h(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(e,["googleMaps"]);null!=a&&d(t,["googleMaps"],function(e){const t={};if(void 0!==h(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(e,["enableWidget"]);null!=n&&d(t,["enableWidget"],n);return t}(a));const l=h(e,["googleSearch"]);null!=l&&d(t,["googleSearch"],function(e){const t={};if(void 0!==h(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==h(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(e,["timeRangeFilter"]);null!=n&&d(t,["timeRangeFilter"],n);return t}(l));const c=h(e,["urlContext"]);null!=c&&d(t,["urlContext"],c);return t}(ht(e)))),d(n,["tools"],e)}const S=h(t,["toolConfig"]);if(void 0!==n&&null!=S&&d(n,["toolConfig"],function(e){const t={},n=h(e,["functionCallingConfig"]);null!=n&&d(t,["functionCallingConfig"],function(e){const t={},n=h(e,["mode"]);null!=n&&d(t,["mode"],n);const r=h(e,["allowedFunctionNames"]);if(null!=r&&d(t,["allowedFunctionNames"],r),void 0!==h(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(n));const r=h(e,["retrievalConfig"]);null!=r&&d(t,["retrievalConfig"],r);return t}(S)),void 0!==h(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const T=h(t,["cachedContent"]);void 0!==n&&null!=T&&d(n,["cachedContent"],ft(e,T));const O=h(t,["responseModalities"]);null!=O&&d(r,["responseModalities"],O);const I=h(t,["mediaResolution"]);null!=I&&d(r,["mediaResolution"],I);const C=h(t,["speechConfig"]);if(null!=C&&d(r,["speechConfig"],ut(C)),void 0!==h(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const A=h(t,["thinkingConfig"]);null!=A&&d(r,["thinkingConfig"],A);const k=h(t,["imageConfig"]);return null!=k&&d(r,["imageConfig"],function(e){const t={},n=h(e,["aspectRatio"]);null!=n&&d(t,["aspectRatio"],n);const r=h(e,["imageSize"]);null!=r&&d(t,["imageSize"],r);if(void 0!==h(e,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==h(e,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}(k)),r}function Sn(e,t,n){const r={},o=h(t,["systemInstruction"]);void 0!==n&&null!=o&&d(n,["systemInstruction"],it(o));const i=h(t,["temperature"]);null!=i&&d(r,["temperature"],i);const s=h(t,["topP"]);null!=s&&d(r,["topP"],s);const a=h(t,["topK"]);null!=a&&d(r,["topK"],a);const l=h(t,["candidateCount"]);null!=l&&d(r,["candidateCount"],l);const c=h(t,["maxOutputTokens"]);null!=c&&d(r,["maxOutputTokens"],c);const u=h(t,["stopSequences"]);null!=u&&d(r,["stopSequences"],u);const p=h(t,["responseLogprobs"]);null!=p&&d(r,["responseLogprobs"],p);const f=h(t,["logprobs"]);null!=f&&d(r,["logprobs"],f);const m=h(t,["presencePenalty"]);null!=m&&d(r,["presencePenalty"],m);const g=h(t,["frequencyPenalty"]);null!=g&&d(r,["frequencyPenalty"],g);const v=h(t,["seed"]);null!=v&&d(r,["seed"],v);const y=h(t,["responseMimeType"]);null!=y&&d(r,["responseMimeType"],y);const b=h(t,["responseSchema"]);null!=b&&d(r,["responseSchema"],ct(b));const _=h(t,["responseJsonSchema"]);null!=_&&d(r,["responseJsonSchema"],_);const w=h(t,["routingConfig"]);null!=w&&d(r,["routingConfig"],w);const E=h(t,["modelSelectionConfig"]);null!=E&&d(r,["modelConfig"],E);const S=h(t,["safetySettings"]);if(void 0!==n&&null!=S){let e=S;Array.isArray(e)&&(e=e.map(e=>e)),d(n,["safetySettings"],e)}const T=h(t,["tools"]);if(void 0!==n&&null!=T){let e=pt(T);Array.isArray(e)&&(e=e.map(e=>Qn(ht(e)))),d(n,["tools"],e)}const O=h(t,["toolConfig"]);void 0!==n&&null!=O&&d(n,["toolConfig"],O);const I=h(t,["labels"]);void 0!==n&&null!=I&&d(n,["labels"],I);const C=h(t,["cachedContent"]);void 0!==n&&null!=C&&d(n,["cachedContent"],ft(e,C));const A=h(t,["responseModalities"]);null!=A&&d(r,["responseModalities"],A);const k=h(t,["mediaResolution"]);null!=k&&d(r,["mediaResolution"],k);const x=h(t,["speechConfig"]);null!=x&&d(r,["speechConfig"],$n(ut(x)));const N=h(t,["audioTimestamp"]);null!=N&&d(r,["audioTimestamp"],N);const R=h(t,["thinkingConfig"]);null!=R&&d(r,["thinkingConfig"],R);const P=h(t,["imageConfig"]);return null!=P&&d(r,["imageConfig"],function(e){const t={},n=h(e,["aspectRatio"]);null!=n&&d(t,["aspectRatio"],n);const r=h(e,["imageSize"]);null!=r&&d(t,["imageSize"],r);const o=h(e,["outputMimeType"]);null!=o&&d(t,["imageOutputOptions","mimeType"],o);const i=h(e,["outputCompressionQuality"]);null!=i&&d(t,["imageOutputOptions","compressionQuality"],i);return t}(P)),r}function Tn(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","model"],Ke(e,r));const o=h(t,["contents"]);if(null!=o){let e=at(o);Array.isArray(e)&&(e=e.map(e=>gn(e))),d(n,["contents"],e)}const i=h(t,["config"]);return null!=i&&d(n,["generationConfig"],En(e,i,n)),n}function On(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","model"],Ke(e,r));const o=h(t,["contents"]);if(null!=o){let e=at(o);Array.isArray(e)&&(e=e.map(e=>e)),d(n,["contents"],e)}const i=h(t,["config"]);return null!=i&&d(n,["generationConfig"],Sn(e,i,n)),n}function In(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>fn(e))),d(t,["candidates"],e)}const o=h(e,["modelVersion"]);null!=o&&d(t,["modelVersion"],o);const i=h(e,["promptFeedback"]);null!=i&&d(t,["promptFeedback"],i);const s=h(e,["responseId"]);null!=s&&d(t,["responseId"],s);const a=h(e,["usageMetadata"]);return null!=a&&d(t,["usageMetadata"],a),t}function Cn(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["candidates"],e)}const o=h(e,["createTime"]);null!=o&&d(t,["createTime"],o);const i=h(e,["modelVersion"]);null!=i&&d(t,["modelVersion"],i);const s=h(e,["promptFeedback"]);null!=s&&d(t,["promptFeedback"],s);const a=h(e,["responseId"]);null!=a&&d(t,["responseId"],a);const l=h(e,["usageMetadata"]);return null!=l&&d(t,["usageMetadata"],l),t}function An(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","model"],Ke(e,r));const o=h(t,["prompt"]);null!=o&&d(n,["instances[0]","prompt"],o);const i=h(t,["config"]);return null!=i&&function(e,t){if(void 0!==h(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==h(e,["negativePrompt"]))throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=h(e,["numberOfImages"]);void 0!==t&&null!=n&&d(t,["parameters","sampleCount"],n);const r=h(e,["aspectRatio"]);void 0!==t&&null!=r&&d(t,["parameters","aspectRatio"],r);const o=h(e,["guidanceScale"]);if(void 0!==t&&null!=o&&d(t,["parameters","guidanceScale"],o),void 0!==h(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const i=h(e,["safetyFilterLevel"]);void 0!==t&&null!=i&&d(t,["parameters","safetySetting"],i);const s=h(e,["personGeneration"]);void 0!==t&&null!=s&&d(t,["parameters","personGeneration"],s);const a=h(e,["includeSafetyAttributes"]);void 0!==t&&null!=a&&d(t,["parameters","includeSafetyAttributes"],a);const l=h(e,["includeRaiReason"]);void 0!==t&&null!=l&&d(t,["parameters","includeRaiReason"],l);const c=h(e,["language"]);void 0!==t&&null!=c&&d(t,["parameters","language"],c);const u=h(e,["outputMimeType"]);void 0!==t&&null!=u&&d(t,["parameters","outputOptions","mimeType"],u);const p=h(e,["outputCompressionQuality"]);if(void 0!==t&&null!=p&&d(t,["parameters","outputOptions","compressionQuality"],p),void 0!==h(e,["addWatermark"]))throw new Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==h(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const f=h(e,["imageSize"]);if(void 0!==t&&null!=f&&d(t,["parameters","sampleImageSize"],f),void 0!==h(e,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.")}(i,n),n}function kn(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","model"],Ke(e,r));const o=h(t,["prompt"]);null!=o&&d(n,["instances[0]","prompt"],o);const i=h(t,["config"]);return null!=i&&function(e,t){const n=h(e,["outputGcsUri"]);void 0!==t&&null!=n&&d(t,["parameters","storageUri"],n);const r=h(e,["negativePrompt"]);void 0!==t&&null!=r&&d(t,["parameters","negativePrompt"],r);const o=h(e,["numberOfImages"]);void 0!==t&&null!=o&&d(t,["parameters","sampleCount"],o);const i=h(e,["aspectRatio"]);void 0!==t&&null!=i&&d(t,["parameters","aspectRatio"],i);const s=h(e,["guidanceScale"]);void 0!==t&&null!=s&&d(t,["parameters","guidanceScale"],s);const a=h(e,["seed"]);void 0!==t&&null!=a&&d(t,["parameters","seed"],a);const l=h(e,["safetyFilterLevel"]);void 0!==t&&null!=l&&d(t,["parameters","safetySetting"],l);const c=h(e,["personGeneration"]);void 0!==t&&null!=c&&d(t,["parameters","personGeneration"],c);const u=h(e,["includeSafetyAttributes"]);void 0!==t&&null!=u&&d(t,["parameters","includeSafetyAttributes"],u);const p=h(e,["includeRaiReason"]);void 0!==t&&null!=p&&d(t,["parameters","includeRaiReason"],p);const f=h(e,["language"]);void 0!==t&&null!=f&&d(t,["parameters","language"],f);const m=h(e,["outputMimeType"]);void 0!==t&&null!=m&&d(t,["parameters","outputOptions","mimeType"],m);const g=h(e,["outputCompressionQuality"]);void 0!==t&&null!=g&&d(t,["parameters","outputOptions","compressionQuality"],g);const v=h(e,["addWatermark"]);void 0!==t&&null!=v&&d(t,["parameters","addWatermark"],v);const y=h(e,["labels"]);void 0!==t&&null!=y&&d(t,["labels"],y);const b=h(e,["imageSize"]);void 0!==t&&null!=b&&d(t,["parameters","sampleImageSize"],b);const _=h(e,["enhancePrompt"]);void 0!==t&&null!=_&&d(t,["parameters","enhancePrompt"],_)}(i,n),n}function xn(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["_self"]);null!=n&&d(t,["image"],function(e){const t={},n=h(e,["bytesBase64Encoded"]);null!=n&&d(t,["imageBytes"],gt(n));const r=h(e,["mimeType"]);null!=r&&d(t,["mimeType"],r);return t}(n));const r=h(e,["raiFilteredReason"]);null!=r&&d(t,["raiFilteredReason"],r);const o=h(e,["_self"]);null!=o&&d(t,["safetyAttributes"],Jn(o));return t}(e))),d(t,["generatedImages"],e)}const o=h(e,["positivePromptSafetyAttributes"]);return null!=o&&d(t,["positivePromptSafetyAttributes"],Jn(o)),t}function Nn(e,t){const n=h(e,["numberOfVideos"]);if(void 0!==t&&null!=n&&d(t,["parameters","sampleCount"],n),void 0!==h(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==h(e,["fps"]))throw new Error("fps parameter is not supported in Gemini API.");const r=h(e,["durationSeconds"]);if(void 0!==t&&null!=r&&d(t,["parameters","durationSeconds"],r),void 0!==h(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const o=h(e,["aspectRatio"]);void 0!==t&&null!=o&&d(t,["parameters","aspectRatio"],o);const i=h(e,["resolution"]);void 0!==t&&null!=i&&d(t,["parameters","resolution"],i);const s=h(e,["personGeneration"]);if(void 0!==t&&null!=s&&d(t,["parameters","personGeneration"],s),void 0!==h(e,["pubsubTopic"]))throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=h(e,["negativePrompt"]);void 0!==t&&null!=a&&d(t,["parameters","negativePrompt"],a);const l=h(e,["enhancePrompt"]);if(void 0!==t&&null!=l&&d(t,["parameters","enhancePrompt"],l),void 0!==h(e,["generateAudio"]))throw new Error("generateAudio parameter is not supported in Gemini API.");const c=h(e,["lastFrame"]);void 0!==t&&null!=c&&d(t,["instances[0]","lastFrame"],Fn(c));const u=h(e,["referenceImages"]);if(void 0!==t&&null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["image"]);null!=n&&d(t,["image"],Fn(n));const r=h(e,["referenceType"]);null!=r&&d(t,["referenceType"],r);return t}(e))),d(t,["instances[0]","referenceImages"],e)}if(void 0!==h(e,["mask"]))throw new Error("mask parameter is not supported in Gemini API.");if(void 0!==h(e,["compressionQuality"]))throw new Error("compressionQuality parameter is not supported in Gemini API.");return{}}function Rn(e,t){const n=h(e,["numberOfVideos"]);void 0!==t&&null!=n&&d(t,["parameters","sampleCount"],n);const r=h(e,["outputGcsUri"]);void 0!==t&&null!=r&&d(t,["parameters","storageUri"],r);const o=h(e,["fps"]);void 0!==t&&null!=o&&d(t,["parameters","fps"],o);const i=h(e,["durationSeconds"]);void 0!==t&&null!=i&&d(t,["parameters","durationSeconds"],i);const s=h(e,["seed"]);void 0!==t&&null!=s&&d(t,["parameters","seed"],s);const a=h(e,["aspectRatio"]);void 0!==t&&null!=a&&d(t,["parameters","aspectRatio"],a);const l=h(e,["resolution"]);void 0!==t&&null!=l&&d(t,["parameters","resolution"],l);const c=h(e,["personGeneration"]);void 0!==t&&null!=c&&d(t,["parameters","personGeneration"],c);const u=h(e,["pubsubTopic"]);void 0!==t&&null!=u&&d(t,["parameters","pubsubTopic"],u);const p=h(e,["negativePrompt"]);void 0!==t&&null!=p&&d(t,["parameters","negativePrompt"],p);const f=h(e,["enhancePrompt"]);void 0!==t&&null!=f&&d(t,["parameters","enhancePrompt"],f);const m=h(e,["generateAudio"]);void 0!==t&&null!=m&&d(t,["parameters","generateAudio"],m);const g=h(e,["lastFrame"]);void 0!==t&&null!=g&&d(t,["instances[0]","lastFrame"],qn(g));const v=h(e,["referenceImages"]);if(void 0!==t&&null!=v){let e=v;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["image"]);null!=n&&d(t,["image"],qn(n));const r=h(e,["referenceType"]);null!=r&&d(t,["referenceType"],r);return t}(e))),d(t,["instances[0]","referenceImages"],e)}const y=h(e,["mask"]);void 0!==t&&null!=y&&d(t,["instances[0]","mask"],function(e){const t={},n=h(e,["image"]);null!=n&&d(t,["_self"],qn(n));const r=h(e,["maskMode"]);null!=r&&d(t,["maskMode"],r);return t}(y));const b=h(e,["compressionQuality"]);return void 0!==t&&null!=b&&d(t,["parameters","compressionQuality"],b),{}}function Pn(e){const t={},n=h(e,["name"]);null!=n&&d(t,["name"],n);const r=h(e,["metadata"]);null!=r&&d(t,["metadata"],r);const o=h(e,["done"]);null!=o&&d(t,["done"],o);const i=h(e,["error"]);null!=i&&d(t,["error"],i);const s=h(e,["response","generateVideoResponse"]);return null!=s&&d(t,["response"],function(e){const t={},n=h(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["video"]);null!=n&&d(t,["video"],function(e){const t={},n=h(e,["uri"]);null!=n&&d(t,["uri"],n);const r=h(e,["encodedVideo"]);null!=r&&d(t,["videoBytes"],gt(r));const o=h(e,["encoding"]);null!=o&&d(t,["mimeType"],o);return t}(n));return t}(e))),d(t,["generatedVideos"],e)}const r=h(e,["raiMediaFilteredCount"]);null!=r&&d(t,["raiMediaFilteredCount"],r);const o=h(e,["raiMediaFilteredReasons"]);null!=o&&d(t,["raiMediaFilteredReasons"],o);return t}(s)),t}function jn(e){const t={},n=h(e,["name"]);null!=n&&d(t,["name"],n);const r=h(e,["metadata"]);null!=r&&d(t,["metadata"],r);const o=h(e,["done"]);null!=o&&d(t,["done"],o);const i=h(e,["error"]);null!=i&&d(t,["error"],i);const s=h(e,["response"]);return null!=s&&d(t,["response"],function(e){const t={},n=h(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["_self"]);null!=n&&d(t,["video"],function(e){const t={},n=h(e,["gcsUri"]);null!=n&&d(t,["uri"],n);const r=h(e,["bytesBase64Encoded"]);null!=r&&d(t,["videoBytes"],gt(r));const o=h(e,["mimeType"]);null!=o&&d(t,["mimeType"],o);return t}(n));return t}(e))),d(t,["generatedVideos"],e)}const r=h(e,["raiMediaFilteredCount"]);null!=r&&d(t,["raiMediaFilteredCount"],r);const o=h(e,["raiMediaFilteredReasons"]);null!=o&&d(t,["raiMediaFilteredReasons"],o);return t}(s)),t}function Dn(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","model"],Ke(e,r));const o=h(t,["prompt"]);null!=o&&d(n,["instances[0]","prompt"],o);const i=h(t,["image"]);null!=i&&d(n,["instances[0]","image"],Fn(i));const s=h(t,["video"]);null!=s&&d(n,["instances[0]","video"],tr(s));const a=h(t,["source"]);null!=a&&function(e,t){const n={},r=h(e,["prompt"]);void 0!==t&&null!=r&&d(t,["instances[0]","prompt"],r);const o=h(e,["image"]);void 0!==t&&null!=o&&d(t,["instances[0]","image"],Fn(o));const i=h(e,["video"]);void 0!==t&&null!=i&&d(t,["instances[0]","video"],tr(i))}(a,n);const l=h(t,["config"]);return null!=l&&Nn(l,n),n}function Un(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","model"],Ke(e,r));const o=h(t,["prompt"]);null!=o&&d(n,["instances[0]","prompt"],o);const i=h(t,["image"]);null!=i&&d(n,["instances[0]","image"],qn(i));const s=h(t,["video"]);null!=s&&d(n,["instances[0]","video"],nr(s));const a=h(t,["source"]);null!=a&&function(e,t){const n={},r=h(e,["prompt"]);void 0!==t&&null!=r&&d(t,["instances[0]","prompt"],r);const o=h(e,["image"]);void 0!==t&&null!=o&&d(t,["instances[0]","image"],qn(o));const i=h(e,["video"]);void 0!==t&&null!=i&&d(t,["instances[0]","video"],nr(i))}(a,n);const l=h(t,["config"]);return null!=l&&Rn(l,n),n}function Mn(e){const t={},n=h(e,["_self"]);null!=n&&d(t,["image"],Ln(n));const r=h(e,["raiFilteredReason"]);null!=r&&d(t,["raiFilteredReason"],r);const o=h(e,["_self"]);null!=o&&d(t,["safetyAttributes"],Wn(o));const i=h(e,["prompt"]);return null!=i&&d(t,["enhancedPrompt"],i),t}function Ln(e){const t={},n=h(e,["gcsUri"]);null!=n&&d(t,["gcsUri"],n);const r=h(e,["bytesBase64Encoded"]);null!=r&&d(t,["imageBytes"],gt(r));const o=h(e,["mimeType"]);return null!=o&&d(t,["mimeType"],o),t}function Fn(e){const t={};if(void 0!==h(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const n=h(e,["imageBytes"]);null!=n&&d(t,["bytesBase64Encoded"],gt(n));const r=h(e,["mimeType"]);return null!=r&&d(t,["mimeType"],r),t}function qn(e){const t={},n=h(e,["gcsUri"]);null!=n&&d(t,["gcsUri"],n);const r=h(e,["imageBytes"]);null!=r&&d(t,["bytesBase64Encoded"],gt(r));const o=h(e,["mimeType"]);return null!=o&&d(t,["mimeType"],o),t}function Bn(e,t){const n={},r=h(t,["config"]);return null!=r&&function(e,t,n){const r=h(t,["pageSize"]);void 0!==n&&null!=r&&d(n,["_query","pageSize"],r);const o=h(t,["pageToken"]);void 0!==n&&null!=o&&d(n,["_query","pageToken"],o);const i=h(t,["filter"]);void 0!==n&&null!=i&&d(n,["_query","filter"],i);const s=h(t,["queryBase"]);void 0!==n&&null!=s&&d(n,["_url","models_url"],yt(e,s))}(e,r,n),n}function Gn(e,t){const n={},r=h(t,["config"]);return null!=r&&function(e,t,n){const r=h(t,["pageSize"]);void 0!==n&&null!=r&&d(n,["_query","pageSize"],r);const o=h(t,["pageToken"]);void 0!==n&&null!=o&&d(n,["_query","pageToken"],o);const i=h(t,["filter"]);void 0!==n&&null!=i&&d(n,["_query","filter"],i);const s=h(t,["queryBase"]);void 0!==n&&null!=s&&d(n,["_url","models_url"],yt(e,s))}(e,r,n),n}function Hn(e){const t={},n=h(e,["name"]);null!=n&&d(t,["name"],n);const r=h(e,["displayName"]);null!=r&&d(t,["displayName"],r);const o=h(e,["description"]);null!=o&&d(t,["description"],o);const i=h(e,["version"]);null!=i&&d(t,["version"],i);const s=h(e,["_self"]);null!=s&&d(t,["tunedModelInfo"],function(e){const t={},n=h(e,["baseModel"]);null!=n&&d(t,["baseModel"],n);const r=h(e,["createTime"]);null!=r&&d(t,["createTime"],r);const o=h(e,["updateTime"]);null!=o&&d(t,["updateTime"],o);return t}(s));const a=h(e,["inputTokenLimit"]);null!=a&&d(t,["inputTokenLimit"],a);const l=h(e,["outputTokenLimit"]);null!=l&&d(t,["outputTokenLimit"],l);const c=h(e,["supportedGenerationMethods"]);null!=c&&d(t,["supportedActions"],c);const u=h(e,["temperature"]);null!=u&&d(t,["temperature"],u);const p=h(e,["maxTemperature"]);null!=p&&d(t,["maxTemperature"],p);const f=h(e,["topP"]);null!=f&&d(t,["topP"],f);const m=h(e,["topK"]);null!=m&&d(t,["topK"],m);const g=h(e,["thinking"]);return null!=g&&d(t,["thinking"],g),t}function Vn(e){const t={},n=h(e,["name"]);null!=n&&d(t,["name"],n);const r=h(e,["displayName"]);null!=r&&d(t,["displayName"],r);const o=h(e,["description"]);null!=o&&d(t,["description"],o);const i=h(e,["versionId"]);null!=i&&d(t,["version"],i);const s=h(e,["deployedModels"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["endpoint"]);null!=n&&d(t,["name"],n);const r=h(e,["deployedModelId"]);return null!=r&&d(t,["deployedModelId"],r),t}(e))),d(t,["endpoints"],e)}const a=h(e,["labels"]);null!=a&&d(t,["labels"],a);const l=h(e,["_self"]);null!=l&&d(t,["tunedModelInfo"],function(e){const t={},n=h(e,["labels","google-vertex-llm-tuning-base-model-id"]);null!=n&&d(t,["baseModel"],n);const r=h(e,["createTime"]);null!=r&&d(t,["createTime"],r);const o=h(e,["updateTime"]);null!=o&&d(t,["updateTime"],o);return t}(l));const c=h(e,["defaultCheckpointId"]);null!=c&&d(t,["defaultCheckpointId"],c);const u=h(e,["checkpoints"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["checkpoints"],e)}return t}function zn(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","model"],Ke(e,r));const o=h(t,["source"]);null!=o&&function(e,t){const n={},r=h(e,["prompt"]);void 0!==t&&null!=r&&d(t,["instances[0]","prompt"],r);const o=h(e,["personImage"]);void 0!==t&&null!=o&&d(t,["instances[0]","personImage","image"],qn(o));const i=h(e,["productImages"]);if(void 0!==t&&null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["productImage"]);return null!=n&&d(t,["image"],qn(n)),t}(e))),d(t,["instances[0]","productImages"],e)}}(o,n);const i=h(t,["config"]);return null!=i&&function(e,t){const n=h(e,["numberOfImages"]);void 0!==t&&null!=n&&d(t,["parameters","sampleCount"],n);const r=h(e,["baseSteps"]);void 0!==t&&null!=r&&d(t,["parameters","baseSteps"],r);const o=h(e,["outputGcsUri"]);void 0!==t&&null!=o&&d(t,["parameters","storageUri"],o);const i=h(e,["seed"]);void 0!==t&&null!=i&&d(t,["parameters","seed"],i);const s=h(e,["safetyFilterLevel"]);void 0!==t&&null!=s&&d(t,["parameters","safetySetting"],s);const a=h(e,["personGeneration"]);void 0!==t&&null!=a&&d(t,["parameters","personGeneration"],a);const l=h(e,["addWatermark"]);void 0!==t&&null!=l&&d(t,["parameters","addWatermark"],l);const c=h(e,["outputMimeType"]);void 0!==t&&null!=c&&d(t,["parameters","outputOptions","mimeType"],c);const u=h(e,["outputCompressionQuality"]);void 0!==t&&null!=u&&d(t,["parameters","outputOptions","compressionQuality"],u);const p=h(e,["enhancePrompt"]);void 0!==t&&null!=p&&d(t,["parameters","enhancePrompt"],p);const f=h(e,["labels"]);void 0!==t&&null!=f&&d(t,["labels"],f)}(i,n),n}function Jn(e){const t={},n=h(e,["safetyAttributes","categories"]);null!=n&&d(t,["categories"],n);const r=h(e,["safetyAttributes","scores"]);null!=r&&d(t,["scores"],r);const o=h(e,["contentType"]);return null!=o&&d(t,["contentType"],o),t}function Wn(e){const t={},n=h(e,["safetyAttributes","categories"]);null!=n&&d(t,["categories"],n);const r=h(e,["safetyAttributes","scores"]);null!=r&&d(t,["scores"],r);const o=h(e,["contentType"]);return null!=o&&d(t,["contentType"],o),t}function Kn(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","model"],Ke(e,r));const o=h(t,["source"]);null!=o&&function(e,t){const n={},r=h(e,["prompt"]);void 0!==t&&null!=r&&d(t,["instances[0]","prompt"],r);const o=h(e,["image"]);void 0!==t&&null!=o&&d(t,["instances[0]","image"],qn(o));const i=h(e,["scribbleImage"]);void 0!==t&&null!=i&&d(t,["instances[0]","scribble"],function(e){const t={},n=h(e,["image"]);return null!=n&&d(t,["image"],qn(n)),t}(i))}(o,n);const i=h(t,["config"]);return null!=i&&function(e,t){const n=h(e,["mode"]);void 0!==t&&null!=n&&d(t,["parameters","mode"],n);const r=h(e,["maxPredictions"]);void 0!==t&&null!=r&&d(t,["parameters","maxPredictions"],r);const o=h(e,["confidenceThreshold"]);void 0!==t&&null!=o&&d(t,["parameters","confidenceThreshold"],o);const i=h(e,["maskDilation"]);void 0!==t&&null!=i&&d(t,["parameters","maskDilation"],i);const s=h(e,["binaryColorThreshold"]);void 0!==t&&null!=s&&d(t,["parameters","binaryColorThreshold"],s);const a=h(e,["labels"]);void 0!==t&&null!=a&&d(t,["labels"],a)}(i,n),n}function Yn(e){const t={},n=h(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["_self"]);null!=n&&d(t,["mask"],Ln(n));const r=h(e,["labels"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["labels"],e)}return t}(e))),d(t,["generatedMasks"],e)}return t}function $n(e){const t={},n=h(e,["languageCode"]);null!=n&&d(t,["languageCode"],n);const r=h(e,["voiceConfig"]);if(null!=r&&d(t,["voiceConfig"],r),void 0!==h(e,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function Qn(e){const t={},n=h(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==h(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(e,["description"]);null!=n&&d(t,["description"],n);const r=h(e,["name"]);null!=r&&d(t,["name"],r);const o=h(e,["parameters"]);null!=o&&d(t,["parameters"],o);const i=h(e,["parametersJsonSchema"]);null!=i&&d(t,["parametersJsonSchema"],i);const s=h(e,["response"]);null!=s&&d(t,["response"],s);const a=h(e,["responseJsonSchema"]);return null!=a&&d(t,["responseJsonSchema"],a),t}(e))),d(t,["functionDeclarations"],e)}const r=h(e,["retrieval"]);null!=r&&d(t,["retrieval"],r);const o=h(e,["googleSearchRetrieval"]);null!=o&&d(t,["googleSearchRetrieval"],o);const i=h(e,["computerUse"]);if(null!=i&&d(t,["computerUse"],i),void 0!==h(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=h(e,["codeExecution"]);null!=s&&d(t,["codeExecution"],s);const a=h(e,["enterpriseWebSearch"]);null!=a&&d(t,["enterpriseWebSearch"],a);const l=h(e,["googleMaps"]);null!=l&&d(t,["googleMaps"],l);const c=h(e,["googleSearch"]);null!=c&&d(t,["googleSearch"],c);const u=h(e,["urlContext"]);return null!=u&&d(t,["urlContext"],u),t}function Xn(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","name"],Ke(e,r));const o=h(t,["config"]);return null!=o&&function(e,t){const n=h(e,["displayName"]);void 0!==t&&null!=n&&d(t,["displayName"],n);const r=h(e,["description"]);void 0!==t&&null!=r&&d(t,["description"],r);const o=h(e,["defaultCheckpointId"]);void 0!==t&&null!=o&&d(t,["defaultCheckpointId"],o)}(o,n),n}function Zn(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","model"],Ke(e,r));const o=h(t,["config"]);return null!=o&&function(e,t){const n=h(e,["displayName"]);void 0!==t&&null!=n&&d(t,["displayName"],n);const r=h(e,["description"]);void 0!==t&&null!=r&&d(t,["description"],r);const o=h(e,["defaultCheckpointId"]);void 0!==t&&null!=o&&d(t,["defaultCheckpointId"],o)}(o,n),n}function er(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","model"],Ke(e,r));const o=h(t,["image"]);null!=o&&d(n,["instances[0]","image"],qn(o));const i=h(t,["upscaleFactor"]);null!=i&&d(n,["parameters","upscaleConfig","upscaleFactor"],i);const s=h(t,["config"]);return null!=s&&function(e,t){const n=h(e,["outputGcsUri"]);void 0!==t&&null!=n&&d(t,["parameters","storageUri"],n);const r=h(e,["safetyFilterLevel"]);void 0!==t&&null!=r&&d(t,["parameters","safetySetting"],r);const o=h(e,["personGeneration"]);void 0!==t&&null!=o&&d(t,["parameters","personGeneration"],o);const i=h(e,["includeRaiReason"]);void 0!==t&&null!=i&&d(t,["parameters","includeRaiReason"],i);const s=h(e,["outputMimeType"]);void 0!==t&&null!=s&&d(t,["parameters","outputOptions","mimeType"],s);const a=h(e,["outputCompressionQuality"]);void 0!==t&&null!=a&&d(t,["parameters","outputOptions","compressionQuality"],a);const l=h(e,["enhanceInputImage"]);void 0!==t&&null!=l&&d(t,["parameters","upscaleConfig","enhanceInputImage"],l);const c=h(e,["imagePreservationFactor"]);void 0!==t&&null!=c&&d(t,["parameters","upscaleConfig","imagePreservationFactor"],c);const u=h(e,["labels"]);void 0!==t&&null!=u&&d(t,["labels"],u);const p=h(e,["numberOfImages"]);void 0!==t&&null!=p&&d(t,["parameters","sampleCount"],p);const f=h(e,["mode"]);void 0!==t&&null!=f&&d(t,["parameters","mode"],f)}(s,n),n}function tr(e){const t={},n=h(e,["uri"]);null!=n&&d(t,["uri"],n);const r=h(e,["videoBytes"]);null!=r&&d(t,["encodedVideo"],gt(r));const o=h(e,["mimeType"]);return null!=o&&d(t,["encoding"],o),t}function nr(e){const t={},n=h(e,["uri"]);null!=n&&d(t,["gcsUri"],n);const r=h(e,["videoBytes"]);null!=r&&d(t,["bytesBase64Encoded"],gt(r));const o=h(e,["mimeType"]);return null!=o&&d(t,["mimeType"],o),t}const rr="x-goog-api-client",or="google-genai-sdk/".concat("1.30.0"),ir=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class sr{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=null!==(t=this.clientOptions.apiVersion)&&void 0!==t?t:"v1beta1",r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=null!==(n=this.clientOptions.apiVersion)&&void 0!==n?n:"v1beta",r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?"https://".concat(this.clientOptions.location,"-aiplatform.googleapis.com/"):"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:(this.clientOptions.project=void 0,this.clientOptions.location=void 0)}isVertexAI(){var e;return null!==(e=this.clientOptions.vertexai)&&void 0!==e&&e}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||void 0===e.baseUrl||void 0===e.apiVersion)throw new Error("HTTP options are not correctly set.");const t=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&""!==e.apiVersion&&t.push(e.apiVersion),t.join("/")}getBaseResourcePath(){return"projects/".concat(this.clientOptions.project,"/locations/").concat(this.clientOptions.location)}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol="http:"==t.protocol?"ws":"wss",t.toString()}setBaseUrl(e){if(!this.clientOptions.httpOptions)throw new Error("HTTP options are not correctly set.");this.clientOptions.httpOptions.baseUrl=e}constructUrl(e,t,n){const r=[this.getRequestUrlInternal(t)];n&&r.push(this.getBaseResourcePath()),""!==e&&r.push(e);return new URL("".concat(r.join("/")))}shouldPrependVertexProjectPath(e){return!this.clientOptions.apiKey&&(!!this.clientOptions.vertexai&&(!e.path.startsWith("projects/")&&("GET"!==e.httpMethod||!e.path.startsWith("publishers/google/models"))))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[i,s]of Object.entries(e.queryParams))r.searchParams.append(i,String(s));let o={};if("GET"===e.httpMethod){if(e.body&&"{}"!==e.body)throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(t))"object"===typeof o?n[r]=Object.assign(Object.assign({},n[r]),o):void 0!==o&&(n[r]=o);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,n);r.searchParams.has("alt")&&"sse"===r.searchParams.get("alt")||r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n,r){if(t&&t.timeout||r){const n=new AbortController,o=n.signal;if(t.timeout&&(null===t||void 0===t?void 0:t.timeout)>0){const e=setTimeout(()=>n.abort(),t.timeout);e&&"function"===typeof e.unref&&e.unref()}r&&r.addEventListener("abort",()=>{n.abort()}),e.signal=o}return t&&null!==t.extraBody&&function(e,t){if(!t||0===Object.keys(t).length)return;if(e.body instanceof Blob)return void console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let n={};if("string"===typeof e.body&&e.body.length>0)try{const t=JSON.parse(e.body);if("object"!==typeof t||null===t||Array.isArray(t))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");n=t}catch(i){return void console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.")}function r(e,t){const n=Object.assign({},e);for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o)){const e=t[o],i=n[o];e&&"object"===typeof e&&!Array.isArray(e)&&i&&"object"===typeof i&&!Array.isArray(i)?n[o]=r(i,e):(i&&e&&typeof i!==typeof e&&console.warn('includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "'.concat(o,'". Original type: ').concat(typeof i,", New type: ").concat(typeof e,". Overwriting.")),n[o]=e)}return n}const o=r(n,t);e.body=JSON.stringify(o)}(e,t.extraBody),e.headers=await this.getHeadersInternal(t,n),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await ar(e),new we(e))).catch(e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await ar(e),this.processStreamResponse(e))).catch(e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))})}processStreamResponse(e){var t;return Yt(this,arguments,function*(){const n=null===(t=null===e||void 0===e?void 0:e.body)||void 0===t?void 0:t.getReader(),r=new TextDecoder("utf-8");if(!n)throw new Error("Response body is empty");try{let t="";for(;;){const{done:i,value:s}=yield Kt(n.read());if(i){if(t.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const a=r.decode(s,{stream:!0});try{const e=JSON.parse(a);if("error"in e){const t=JSON.parse(JSON.stringify(e.error)),n=t.status,r=t.code,o="got status: ".concat(n,". ").concat(JSON.stringify(e));if(r>=400&&r<600){throw new nn({message:o,status:r})}}}catch(o){if("ApiError"===o.name)throw o}t+=a;let l=t.match(ir);for(;l;){const n=l[1];try{const r=new Response(n,{headers:null===e||void 0===e?void 0:e.headers,status:null===e||void 0===e?void 0:e.status,statusText:null===e||void 0===e?void 0:e.statusText});yield yield Kt(new we(r)),t=t.slice(l[0].length),l=t.match(ir)}catch(o){throw new Error("exception parsing stream chunk ".concat(n,". ").concat(o))}}}}finally{n.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(e=>{throw new Error("exception ".concat(e," sending request"))})}getDefaultHeaders(){const e={},t=or+" "+this.clientOptions.userAgentExtra;return e["User-Agent"]=t,e[rr]=t,e["Content-Type"]="application/json",e}async getHeadersInternal(e,t){const n=new Headers;if(e&&e.headers){for(const[t,r]of Object.entries(e.headers))n.append(t,r);e.timeout&&e.timeout>0&&n.append("X-Server-Timeout",String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,t),n}getFileName(e){var t;let n="";return"string"===typeof e&&(n=e.replace(/[/\\]+$/,""),n=null!==(t=n.split(/[/\\]/).pop())&&void 0!==t?t:""),n}async uploadFile(e,t){var n;const r={};null!=t&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name="files/".concat(r.name));const o=this.clientOptions.uploader,i=await o.stat(e);r.sizeBytes=String(i.size);const s=null!==(n=null===t||void 0===t?void 0:t.mimeType)&&void 0!==n?n:i.type;if(void 0===s||""===s)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=s;const a={file:r},l=this.getFileName(e),c=u("upload/v1beta/files",a._url),d=await this.fetchUploadUrl(c,r.sizeBytes,r.mimeType,l,a,null===t||void 0===t?void 0:t.httpOptions);return o.upload(e,d,this)}async uploadFileToFileSearchStore(e,t,n){var r;const o=this.clientOptions.uploader,i=await o.stat(t),s=String(i.size),a=null!==(r=null===n||void 0===n?void 0:n.mimeType)&&void 0!==r?r:i.type;if(void 0===a||""===a)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const l="upload/v1beta/".concat(e,":uploadToFileSearchStore"),c=this.getFileName(t),u={};(null===n||void 0===n?void 0:n.customMetadata)&&(u.customMetadata=n.customMetadata),(null===n||void 0===n?void 0:n.chunkingConfig)&&(u.chunkingConfig=n.chunkingConfig);const d=await this.fetchUploadUrl(l,s,a,c,u,null===n||void 0===n?void 0:n.httpOptions);return o.uploadToFileSearchStore(t,d,this)}async downloadFile(e){const t=this.clientOptions.downloader;await t.download(e,this)}async fetchUploadUrl(e,t,n,r,o,i){var s;let a={};a=i||{apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(t),"X-Goog-Upload-Header-Content-Type":"".concat(n)},r?{"X-Goog-Upload-File-Name":r}:{})};const l=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:a});if(!l||!(null===l||void 0===l?void 0:l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=null===(s=null===l||void 0===l?void 0:l.headers)||void 0===s?void 0:s["x-goog-upload-url"];if(void 0===c)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function ar(e){var t;if(void 0===e)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;r=(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.includes("application/json"))?await e.json():{error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(r);if(n>=400&&n<600){throw new nn({message:o,status:n})}throw new Error(o)}}let lr=!1;function cr(e){for(const t of e){if(dr(t))return!0;if("object"===typeof t&&"inputSchema"in t)return!0}return lr}function ur(e){var t;const n=null!==(t=e[rr])&&void 0!==t?t:"";e[rr]=(n+" ".concat("mcp_used/unknown")).trimStart()}function dr(e){return null!==e&&"object"===typeof e&&e instanceof pr}function hr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return Yt(this,arguments,function*(){let n,r=0;for(;r<t;){const t=yield Kt(e.listTools({cursor:n}));for(const e of t.tools)yield yield Kt(e),r++;if(!t.nextCursor)break;n=t.nextCursor}})}class pr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new pr(e,t)}async initialize(){var e,t,n,r;if(this.mcpTools.length>0)return;const o={},i=[];for(const u of this.mcpClients)try{for(var s,a=!0,l=(t=void 0,$t(hr(u)));!(e=(s=await l.next()).done);a=!0){r=s.value,a=!1;const e=r;i.push(e);const t=e.name;if(o[t])throw new Error("Duplicate function name ".concat(t," found in MCP tools. Please ensure function names are unique."));o[t]=u}}catch(c){t={error:c}}finally{try{a||e||!(n=l.return)||await n.call(l)}finally{if(t)throw t.error}}this.mcpTools=i,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[],r=new Set;for(const o of e){const e=o.name;if(r.has(e))throw new Error("Duplicate function name ".concat(e," found in MCP tools. Please ensure function names are unique."));r.add(e);const i=wt(o,t);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const e=this.functionNameToMcpClient[n.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const o=await e.callTool({name:n.name,arguments:n.args},void 0,r);t.push({functionResponse:{name:n.name,response:o.isError?{error:o}:o}})}return t}}class fr{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),i=function(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}(this.apiClient.getDefaultHeaders()),s=this.apiClient.getApiKey(),a="".concat(r,"/ws/google.ai.generativelanguage.").concat(o,".GenerativeService.BidiGenerateMusic?key=").concat(s);let l=()=>{};const c=new Promise(e=>{l=e}),u=e.callbacks,d=(this.apiClient,{onopen:function(){l({})},onmessage:e=>{!async function(e,t,n){const r=new Je;let o;o=n.data instanceof Blob?JSON.parse(await n.data.text()):JSON.parse(n.data),Object.assign(r,o),t(r)}(0,u.onmessage,e)},onerror:null!==(t=null===u||void 0===u?void 0:u.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null===u||void 0===u?void 0:u.onclose)&&void 0!==n?n:function(e){}}),h=this.webSocketFactory.create(a,function(e){const t={};return e.forEach((e,n)=>{t[n]=e}),t}(i),d);h.connect(),await c;const p={setup:{model:Ke(this.apiClient,e.model)}};return h.send(JSON.stringify(p)),new mr(h,this.apiClient)}}class mr{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||0===Object.keys(e.weightedPrompts).length)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=function(e){const t={},n=h(e,["weightedPrompts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["weightedPrompts"],e)}return t}(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=function(e){const t={},n=h(e,["musicGenerationConfig"]);return null!=n&&d(t,["musicGenerationConfig"],n),t}(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(be.PLAY)}pause(){this.sendPlaybackControl(be.PAUSE)}stop(){this.sendPlaybackControl(be.STOP)}resetContext(){this.sendPlaybackControl(be.RESET_CONTEXT)}close(){this.conn.close()}}class gr{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new fr(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,r,o,i,s;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let c;const u=this.apiClient.getHeaders();e.config&&e.config.tools&&cr(e.config.tools)&&ur(u);const p=function(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}(u);if(this.apiClient.isVertexAI())c="".concat(a,"/ws/google.cloud.aiplatform.").concat(l,".LlmBidiService/BidiGenerateContent"),await this.auth.addAuthHeaders(p,c);else{const e=this.apiClient.getApiKey();let t="BidiGenerateContent",n="key";(null===e||void 0===e?void 0:e.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==l&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),t="BidiGenerateContentConstrained",n="access_token"),c="".concat(a,"/ws/google.ai.generativelanguage.").concat(l,".GenerativeService.").concat(t,"?").concat(n,"=").concat(e)}let f=()=>{};const m=new Promise(e=>{f=e}),g=e.callbacks,v=this.apiClient,y={onopen:function(){var e;null===(e=null===g||void 0===g?void 0:g.onopen)||void 0===e||e.call(g),f({})},onmessage:e=>{!async function(e,t,n){const r=new ze;let o;o=n.data instanceof Blob?await n.data.text():n.data instanceof ArrayBuffer?(new TextDecoder).decode(n.data):n.data;const i=JSON.parse(o);if(e.isVertexAI()){const e=hn(i);Object.assign(r,e)}else{const e=i;Object.assign(r,e)}t(r)}(v,g.onmessage,e)},onerror:null!==(t=null===g||void 0===g?void 0:g.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null===g||void 0===g?void 0:g.onclose)&&void 0!==n?n:function(e){}},b=this.webSocketFactory.create(c,function(e){const t={};return e.forEach((e,n)=>{t[n]=e}),t}(p),y);b.connect(),await m;let _=Ke(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&_.startsWith("publishers/")){const e=this.apiClient.getProject(),t=this.apiClient.getLocation();_="projects/".concat(e,"/locations/").concat(t,"/")+_}let w={};this.apiClient.isVertexAI()&&void 0===(null===(r=e.config)||void 0===r?void 0:r.responseModalities)&&(void 0===e.config?e.config={responseModalities:[L.AUDIO]}:e.config.responseModalities=[L.AUDIO]),(null===(o=e.config)||void 0===o?void 0:o.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const E=null!==(s=null===(i=e.config)||void 0===i?void 0:i.tools)&&void 0!==s?s:[],S=[];for(const d of E)if(this.isCallableTool(d)){const e=d;S.push(await e.tool())}else S.push(d);S.length>0&&(e.config.tools=S);const T={model:_,config:e.config,callbacks:e.callbacks};return w=this.apiClient.isVertexAI()?function(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["setup","model"],Ke(e,r));const o=h(t,["config"]);return null!=o&&d(n,["config"],cn(o,n)),n}(this.apiClient,T):function(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["setup","model"],Ke(e,r));const o=h(t,["config"]);return null!=o&&d(n,["config"],ln(o,n)),n}(this.apiClient,T),delete w.config,b.send(JSON.stringify(w)),new yr(b,this.apiClient)}isCallableTool(e){return"callTool"in e&&"function"===typeof e.callTool}}const vr={turnComplete:!0};class yr{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(null!==t.turns&&void 0!==t.turns){let r=[];try{r=at(t.turns),e.isVertexAI()||(r=r.map(e=>gn(e)))}catch(n){throw new Error('Failed to parse client content "turns", type: \''.concat(typeof t.turns,"'"))}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(null==t.functionResponses)throw new Error("functionResponses is required.");if(n=Array.isArray(t.functionResponses)?t.functionResponses:[t.functionResponses],0===n.length)throw new Error("functionResponses is required.");for(const r of n){if("object"!==typeof r||null===r||!("name"in r)||!("response"in r))throw new Error("Could not parse function response, type '".concat(typeof r,"'."));if(!e.isVertexAI()&&!("id"in r))throw new Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},vr),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};t=this.apiClient.isVertexAI()?{realtimeInput:dn(e)}:{realtimeInput:un(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(null==e.functionResponses)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function br(e){var t,n,r;if(null===(t=null===e||void 0===e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.disable)return!0;let o=!1;for(const s of null!==(n=null===e||void 0===e?void 0:e.tools)&&void 0!==n?n:[])if(_r(s)){o=!0;break}if(!o)return!0;const i=null===(r=null===e||void 0===e?void 0:e.automaticFunctionCalling)||void 0===r?void 0:r.maximumRemoteCalls;return!!(i&&(i<0||!Number.isInteger(i))||0==i)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0)}function _r(e){return"callTool"in e&&"function"===typeof e.callTool}function wr(e){var t;const n=[];return(null===(t=null===e||void 0===e?void 0:e.config)||void 0===t?void 0:t.tools)?(e.config.tools.forEach((e,t)=>{if(_r(e))return;const r=e;r.functionDeclarations&&r.functionDeclarations.length>0&&n.push(t)}),n):n}function Er(e){var t;return!(null===(t=null===e||void 0===e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.ignoreCallHistory)}class Sr extends c{constructor(e){super(),this.apiClient=e,this.generateContent=async e=>{var t,n,r,o,i;const s=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.config)||void 0===t?void 0:t.tools)||void 0===n?void 0:n.some(e=>_r(e)))&&void 0!==r&&r}(e)||br(e.config))return await this.generateContentInternal(s);const a=wr(e);if(a.length>0){const e=a.map(e=>"tools[".concat(e,"]")).join(", ");throw new Error("Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ".concat(e,"."))}let l,c;const u=at(s.contents),d=null!==(r=null===(n=null===(t=s.config)||void 0===t?void 0:t.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==r?r:10;let h=0;for(;h<d&&(l=await this.generateContentInternal(s),l.functionCalls&&0!==l.functionCalls.length);){const t=l.candidates[0].content,n=[];for(const r of null!==(i=null===(o=e.config)||void 0===o?void 0:o.tools)&&void 0!==i?i:[])if(_r(r)){const e=r,t=await e.callTool(l.functionCalls);n.push(...t)}h++,c={role:"user",parts:n},s.contents=at(s.contents),s.contents.push(t),s.contents.push(c),Er(s.config)&&(u.push(t),u.push(c))}return Er(s.config)&&(l.automaticFunctionCallingHistory=u),l},this.generateContentStream=async e=>{var t,n,r,o,i;if(this.maybeMoveToResponseJsonSchem(e),br(e.config)){const t=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(t)}const s=wr(e);if(s.length>0){const e=s.map(e=>"tools[".concat(e,"]")).join(", ");throw new Error("Incompatible tools found at ".concat(e,'. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.'))}const a=null===(r=null===(n=null===(t=null===e||void 0===e?void 0:e.config)||void 0===t?void 0:t.toolConfig)||void 0===n?void 0:n.functionCallingConfig)||void 0===r?void 0:r.streamFunctionCallArguments,l=null===(i=null===(o=null===e||void 0===e?void 0:e.config)||void 0===o?void 0:o.automaticFunctionCalling)||void 0===i?void 0:i.disable;if(a&&!l)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(e=>{var t;let n;const r=[];if(null===e||void 0===e?void 0:e.generatedImages)for(const i of e.generatedImages)i&&(null===i||void 0===i?void 0:i.safetyAttributes)&&"Positive Prompt"===(null===(t=null===i||void 0===i?void 0:i.safetyAttributes)||void 0===t?void 0:t.contentType)?n=null===i||void 0===i?void 0:i.safetyAttributes:r.push(i);let o;return o=n?{generatedImages:r,positivePromptSafetyAttributes:n,sdkHttpResponse:e.sdkHttpResponse}:{generatedImages:r,sdkHttpResponse:e.sdkHttpResponse},o}),this.list=async e=>{var t;const n={config:Object.assign(Object.assign({},{queryBase:!0}),null===e||void 0===e?void 0:e.config)};if(this.apiClient.isVertexAI()&&!n.config.queryBase){if(null===(t=n.config)||void 0===t?void 0:t.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");n.config.filter="labels.tune-type:*"}return new Mt(_e.PAGED_ITEM_MODELS,e=>this.listInternal(e),await this.listInternal(n),n)},this.editImage=async e=>{const t={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(t.referenceImages=e.referenceImages.map(e=>e.toReferenceImageAPI())),await this.editImageInternal(t)},this.upscaleImage=async e=>{let t={numberOfImages:1,mode:"upscale"};e.config&&(t=Object.assign(Object.assign({},t),e.config));const n={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:t};return await this.upscaleImageInternal(n)},this.generateVideos=async e=>{var t,n,r,o,i,s;if((e.prompt||e.image||e.video)&&e.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||((null===(t=e.video)||void 0===t?void 0:t.uri)&&(null===(n=e.video)||void 0===n?void 0:n.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:(null===(o=null===(r=e.source)||void 0===r?void 0:r.video)||void 0===o?void 0:o.uri)&&(null===(s=null===(i=e.source)||void 0===i?void 0:i.video)||void 0===s?void 0:s.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,n,r;const o=null===(t=e.config)||void 0===t?void 0:t.tools;if(!o)return e;const i=await Promise.all(o.map(async e=>{if(_r(e)){const t=e;return await t.tool()}return e})),s={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(s.config.tools=i,e.config&&e.config.tools&&cr(e.config.tools)){const t=null!==(r=null===(n=e.config.httpOptions)||void 0===n?void 0:n.headers)&&void 0!==r?r:{};let o=Object.assign({},t);0===Object.keys(o).length&&(o=this.apiClient.getDefaultHeaders()),ur(o),s.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:o})}return s}async initAfcToolsMap(e){var t,n,r;const o=new Map;for(const i of null!==(n=null===(t=e.config)||void 0===t?void 0:t.tools)&&void 0!==n?n:[])if(_r(i)){const e=i,t=await e.tool();for(const n of null!==(r=t.functionDeclarations)&&void 0!==r?r:[]){if(!n.name)throw new Error("Function declaration name is required.");if(o.has(n.name))throw new Error("Duplicate tool declaration name: ".concat(n.name));o.set(n.name,e)}}return o}async processAfcStream(e){var t,n,r;const o=null!==(r=null===(n=null===(t=e.config)||void 0===t?void 0:t.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==r?r:10;let i=!1,s=0;return function(e,t,n){var r,a;return Yt(this,arguments,function*(){for(var l,c,u,d;s<o;){i&&(s++,i=!1);const g=yield Kt(e.processParamsMaybeAddMcpUsage(n)),v=yield Kt(e.generateContentStreamInternal(g)),y=[],b=[];try{for(var h,p=!0,f=(c=void 0,$t(v));!(l=(h=yield Kt(f.next())).done);p=!0){d=h.value,p=!1;const e=d;if(yield yield Kt(e),e.candidates&&(null===(r=e.candidates[0])||void 0===r?void 0:r.content)){b.push(e.candidates[0].content);for(const n of null!==(a=e.candidates[0].content.parts)&&void 0!==a?a:[])if(s<o&&n.functionCall){if(!n.functionCall.name)throw new Error("Function call name was not returned by the model.");if(!t.has(n.functionCall.name))throw new Error("Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ".concat(t.keys(),", mising tool: ").concat(n.functionCall.name));{const e=yield Kt(t.get(n.functionCall.name).callTool([n.functionCall]));y.push(...e)}}}}}catch(m){c={error:m}}finally{try{p||l||!(u=f.return)||(yield Kt(u.call(f)))}finally{if(c)throw c.error}}if(!(y.length>0))break;{i=!0;const e=new Ee;e.candidates=[{content:{role:"user",parts:y}}],yield yield Kt(e);const t=[];t.push(...b),t.push({role:"user",parts:y});const r=at(n.contents).concat(t);n.contents=r}}})}(this,await this.initAfcToolsMap(e),e)}async generateContentInternal(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=On(this.apiClient,e);return s=u("{model}:generateContent",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=Cn(e),n=new Ee;return Object.assign(n,t),n})}{const t=Tn(this.apiClient,e);return s=u("{model}:generateContent",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=In(e),n=new Ee;return Object.assign(n,t),n})}}async generateContentStreamInternal(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=On(this.apiClient,e);s=u("{model}:streamGenerateContent?alt=sse",r._url),a=r._query,delete r._url,delete r._query;return i=this.apiClient.requestStream({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}),i.then(function(e){return Yt(this,arguments,function*(){var t,n,r,o;try{for(var i,s=!0,a=$t(e);!(t=(i=yield Kt(a.next())).done);s=!0){o=i.value,s=!1;const e=o,t=Cn(yield Kt(e.json()));t.sdkHttpResponse={headers:e.headers};const n=new Ee;Object.assign(n,t),yield yield Kt(n)}}catch(l){n={error:l}}finally{try{s||t||!(r=a.return)||(yield Kt(r.call(a)))}finally{if(n)throw n.error}}})})}{const t=Tn(this.apiClient,e);s=u("{model}:streamGenerateContent?alt=sse",t._url),a=t._query,delete t._url,delete t._query;return i=this.apiClient.requestStream({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}),i.then(function(e){return Yt(this,arguments,function*(){var t,n,r,o;try{for(var i,s=!0,a=$t(e);!(t=(i=yield Kt(a.next())).done);s=!0){o=i.value,s=!1;const e=o,t=In(yield Kt(e.json()));t.sdkHttpResponse={headers:e.headers};const n=new Ee;Object.assign(n,t),yield yield Kt(n)}}catch(l){n={error:l}}finally{try{s||t||!(r=a.return)||(yield Kt(r.call(a)))}finally{if(n)throw n.error}}})})}}async embedContent(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=wn(this.apiClient,e);return s=u("{model}:predict",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["predictions[]","embeddings"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>mn(e))),d(t,["embeddings"],e)}const o=h(e,["metadata"]);return null!=o&&d(t,["metadata"],o),t}(e),n=new Se;return Object.assign(n,t),n})}{const t=_n(this.apiClient,e);return s=u("{model}:batchEmbedContents",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["embeddings"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["embeddings"],e)}const o=h(e,["metadata"]);return null!=o&&d(t,["metadata"],o),t}(e),n=new Se;return Object.assign(n,t),n})}}async generateImagesInternal(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=kn(this.apiClient,e);return s=u("{model}:predict",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>Mn(e))),d(t,["generatedImages"],e)}const o=h(e,["positivePromptSafetyAttributes"]);return null!=o&&d(t,["positivePromptSafetyAttributes"],Wn(o)),t}(e),n=new Te;return Object.assign(n,t),n})}{const t=An(this.apiClient,e);return s=u("{model}:predict",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=xn(e),n=new Te;return Object.assign(n,t),n})}}async editImageInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const s=bn(this.apiClient,e);return o=u("{model}:predict",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>Mn(e))),d(t,["generatedImages"],e)}return t}(e),n=new Oe;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const s=er(this.apiClient,e);return o=u("{model}:predict",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>Mn(e))),d(t,["generatedImages"],e)}return t}(e),n=new Ie;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const s=zn(this.apiClient,e);return o=u("{model}:predict",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=h(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>Mn(e))),d(t,["generatedImages"],e)}return t}(e),n=new Ce;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const s=Kn(this.apiClient,e);return o=u("{model}:predict",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=Yn(e),n=new Ae;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=h(t,["model"]);return null!=r&&d(n,["_url","name"],Ke(e,r)),n}(this.apiClient,e);return s=u("{name}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>Vn(e))}{const t=function(e,t){const n={},r=h(t,["model"]);return null!=r&&d(n,["_url","name"],Ke(e,r)),n}(this.apiClient,e);return s=u("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>Hn(e))}}async listInternal(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=Gn(this.apiClient,e);return s=u("{models_url}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);null!=r&&d(t,["nextPageToken"],r);const o=h(e,["_self"]);if(null!=o){let e=bt(o);Array.isArray(e)&&(e=e.map(e=>Vn(e))),d(t,["models"],e)}return t}(e),n=new ke;return Object.assign(n,t),n})}{const t=Bn(this.apiClient,e);return s=u("{models_url}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);null!=r&&d(t,["nextPageToken"],r);const o=h(e,["_self"]);if(null!=o){let e=bt(o);Array.isArray(e)&&(e=e.map(e=>Hn(e))),d(t,["models"],e)}return t}(e),n=new ke;return Object.assign(n,t),n})}}async update(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=Zn(this.apiClient,e);return s=u("{model}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>Vn(e))}{const t=Xn(this.apiClient,e);return s=u("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>Hn(e))}}async delete(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=h(t,["model"]);return null!=r&&d(n,["_url","name"],Ke(e,r)),n}(this.apiClient,e);return s=u("{name}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);return null!=n&&d(t,["sdkHttpResponse"],n),t}(e),n=new xe;return Object.assign(n,t),n})}{const t=function(e,t){const n={},r=h(t,["model"]);return null!=r&&d(n,["_url","name"],Ke(e,r)),n}(this.apiClient,e);return s=u("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);return null!=n&&d(t,["sdkHttpResponse"],n),t}(e),n=new xe;return Object.assign(n,t),n})}}async countTokens(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","model"],Ke(e,r));const o=h(t,["contents"]);if(null!=o){let e=at(o);Array.isArray(e)&&(e=e.map(e=>e)),d(n,["contents"],e)}const i=h(t,["config"]);return null!=i&&vn(i,n),n}(this.apiClient,e);return s=u("{model}:countTokens",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["totalTokens"]);return null!=r&&d(t,["totalTokens"],r),t}(e),n=new Ne;return Object.assign(n,t),n})}{const t=yn(this.apiClient,e);return s=u("{model}:countTokens",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["totalTokens"]);null!=r&&d(t,["totalTokens"],r);const o=h(e,["cachedContentTokenCount"]);return null!=o&&d(t,["cachedContentTokenCount"],o),t}(e),n=new Ne;return Object.assign(n,t),n})}}async computeTokens(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const s=function(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["_url","model"],Ke(e,r));const o=h(t,["contents"]);if(null!=o){let e=at(o);Array.isArray(e)&&(e=e.map(e=>e)),d(n,["contents"],e)}return n}(this.apiClient,e);return o=u("{model}:computeTokens",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["tokensInfo"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["tokensInfo"],e)}return t}(e),n=new Re;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=Un(this.apiClient,e);return s=u("{model}:predictLongRunning",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>{const t=jn(e),n=new Pe;return Object.assign(n,t),n})}{const t=Dn(this.apiClient,e);return s=u("{model}:predictLongRunning",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>{const t=Pn(e),n=new Pe;return Object.assign(n,t),n})}}}class Tr extends c{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let r;n&&"httpOptions"in n&&(r=n.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}{const e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async get(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let r;n&&"httpOptions"in n&&(r=n.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}{const e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=h(e,["operationName"]);return null!=n&&d(t,["_url","operationName"],n),t}(e);return s=u("{operationName}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i}{const t=function(e){const t={},n=h(e,["operationName"]);return null!=n&&d(t,["_url","operationName"],n),t}(e);return s=u("{operationName}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i}}async fetchPredictVideosOperationInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const s=function(e){const t={},n=h(e,["operationName"]);null!=n&&d(t,["operationName"],n);const r=h(e,["resourceName"]);return null!=r&&d(t,["_url","resourceName"],r),t}(e);return o=u("{resourceName}:fetchPredictOperation",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r}throw new Error("This method is only supported by the Vertex AI.")}}function Or(e){const t={},n=h(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["mediaResolution"]);null!=n&&d(t,["mediaResolution"],n);const r=h(e,["codeExecutionResult"]);null!=r&&d(t,["codeExecutionResult"],r);const o=h(e,["executableCode"]);null!=o&&d(t,["executableCode"],o);const i=h(e,["fileData"]);null!=i&&d(t,["fileData"],function(e){const t={};if(void 0!==h(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);null!=n&&d(t,["fileUri"],n);const r=h(e,["mimeType"]);null!=r&&d(t,["mimeType"],r);return t}(i));const s=h(e,["functionCall"]);null!=s&&d(t,["functionCall"],function(e){const t={},n=h(e,["id"]);null!=n&&d(t,["id"],n);const r=h(e,["args"]);null!=r&&d(t,["args"],r);const o=h(e,["name"]);null!=o&&d(t,["name"],o);if(void 0!==h(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==h(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(s));const a=h(e,["functionResponse"]);null!=a&&d(t,["functionResponse"],a);const l=h(e,["inlineData"]);null!=l&&d(t,["inlineData"],function(e){const t={},n=h(e,["data"]);if(null!=n&&d(t,["data"],n),void 0!==h(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=h(e,["mimeType"]);return null!=r&&d(t,["mimeType"],r),t}(l));const c=h(e,["text"]);null!=c&&d(t,["text"],c);const u=h(e,["thought"]);null!=u&&d(t,["thought"],u);const p=h(e,["thoughtSignature"]);null!=p&&d(t,["thoughtSignature"],p);const f=h(e,["videoMetadata"]);null!=f&&d(t,["videoMetadata"],f);return t}(e))),d(t,["parts"],e)}const r=h(e,["role"]);return null!=r&&d(t,["role"],r),t}function Ir(e,t,n){const r=h(t,["expireTime"]);void 0!==n&&null!=r&&d(n,["expireTime"],r);const o=h(t,["newSessionExpireTime"]);void 0!==n&&null!=o&&d(n,["newSessionExpireTime"],o);const i=h(t,["uses"]);void 0!==n&&null!=i&&d(n,["uses"],i);const s=h(t,["liveConnectConstraints"]);void 0!==n&&null!=s&&d(n,["bidiGenerateContentSetup"],function(e,t){const n={},r=h(t,["model"]);null!=r&&d(n,["setup","model"],Ke(e,r));const o=h(t,["config"]);null!=o&&d(n,["config"],function(e,t){const n={},r=h(e,["generationConfig"]);void 0!==t&&null!=r&&d(t,["setup","generationConfig"],r);const o=h(e,["responseModalities"]);void 0!==t&&null!=o&&d(t,["setup","generationConfig","responseModalities"],o);const i=h(e,["temperature"]);void 0!==t&&null!=i&&d(t,["setup","generationConfig","temperature"],i);const s=h(e,["topP"]);void 0!==t&&null!=s&&d(t,["setup","generationConfig","topP"],s);const a=h(e,["topK"]);void 0!==t&&null!=a&&d(t,["setup","generationConfig","topK"],a);const l=h(e,["maxOutputTokens"]);void 0!==t&&null!=l&&d(t,["setup","generationConfig","maxOutputTokens"],l);const c=h(e,["mediaResolution"]);void 0!==t&&null!=c&&d(t,["setup","generationConfig","mediaResolution"],c);const u=h(e,["seed"]);void 0!==t&&null!=u&&d(t,["setup","generationConfig","seed"],u);const p=h(e,["speechConfig"]);void 0!==t&&null!=p&&d(t,["setup","generationConfig","speechConfig"],dt(p));const f=h(e,["thinkingConfig"]);void 0!==t&&null!=f&&d(t,["setup","generationConfig","thinkingConfig"],f);const m=h(e,["enableAffectiveDialog"]);void 0!==t&&null!=m&&d(t,["setup","generationConfig","enableAffectiveDialog"],m);const g=h(e,["systemInstruction"]);void 0!==t&&null!=g&&d(t,["setup","systemInstruction"],Or(it(g)));const v=h(e,["tools"]);if(void 0!==t&&null!=v){let e=pt(v);Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=h(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["functionDeclarations"],e)}if(void 0!==h(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(e,["googleSearchRetrieval"]);null!=r&&d(t,["googleSearchRetrieval"],r);const o=h(e,["computerUse"]);null!=o&&d(t,["computerUse"],o);const i=h(e,["fileSearch"]);null!=i&&d(t,["fileSearch"],i);const s=h(e,["codeExecution"]);null!=s&&d(t,["codeExecution"],s);if(void 0!==h(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(e,["googleMaps"]);null!=a&&d(t,["googleMaps"],function(e){const t={};if(void 0!==h(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(e,["enableWidget"]);null!=n&&d(t,["enableWidget"],n);return t}(a));const l=h(e,["googleSearch"]);null!=l&&d(t,["googleSearch"],function(e){const t={};if(void 0!==h(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==h(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(e,["timeRangeFilter"]);null!=n&&d(t,["timeRangeFilter"],n);return t}(l));const c=h(e,["urlContext"]);null!=c&&d(t,["urlContext"],c);return t}(ht(e)))),d(t,["setup","tools"],e)}const y=h(e,["sessionResumption"]);void 0!==t&&null!=y&&d(t,["setup","sessionResumption"],function(e){const t={},n=h(e,["handle"]);null!=n&&d(t,["handle"],n);if(void 0!==h(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}(y));const b=h(e,["inputAudioTranscription"]);void 0!==t&&null!=b&&d(t,["setup","inputAudioTranscription"],b);const _=h(e,["outputAudioTranscription"]);void 0!==t&&null!=_&&d(t,["setup","outputAudioTranscription"],_);const w=h(e,["realtimeInputConfig"]);void 0!==t&&null!=w&&d(t,["setup","realtimeInputConfig"],w);const E=h(e,["contextWindowCompression"]);void 0!==t&&null!=E&&d(t,["setup","contextWindowCompression"],E);const S=h(e,["proactivity"]);void 0!==t&&null!=S&&d(t,["setup","proactivity"],S);return n}(o,n));return n}(e,s));const a=h(t,["lockAdditionalFields"]);return void 0!==n&&null!=a&&d(n,["fieldMask"],a),{}}function Cr(e,t){let n=null;const r=e.bidiGenerateContentSetup;if("object"===typeof r&&null!==r&&"setup"in r){const t=r.setup;"object"===typeof t&&null!==t?(e.bidiGenerateContentSetup=t,n=t):delete e.bidiGenerateContentSetup}else void 0!==r&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const r=function(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if("object"===typeof r&&null!=r&&Object.keys(r).length>0){const e=Object.keys(r).map(e=>"".concat(n,".").concat(e));t.push(...e)}else t.push(n)}return t.join(",")}(n);if(Array.isArray(null===t||void 0===t?void 0:t.lockAdditionalFields)&&0===(null===t||void 0===t?void 0:t.lockAdditionalFields.length))r?e.fieldMask=r:delete e.fieldMask;else if((null===t||void 0===t?void 0:t.lockAdditionalFields)&&t.lockAdditionalFields.length>0&&null!==o&&Array.isArray(o)&&o.length>0){const t=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let n=[];o.length>0&&(n=o.map(e=>t.includes(e)?"generationConfig.".concat(e):e));const i=[];r&&i.push(r),n.length>0&&i.push(...n),i.length>0?e.fieldMask=i.join(","):delete e.fieldMask}else delete e.fieldMask}else null!==o&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}class Ar extends c{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const s=function(e,t){const n={},r=h(t,["config"]);return null!=r&&d(n,["config"],Ir(e,r,n)),n}(this.apiClient,e);o=u("auth_tokens",s._url),i=s._query,delete s.config,delete s._url,delete s._query;const a=Cr(s,e.config);return r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>e)}}}function kr(e){const t={},n=h(e,["config"]);return null!=n&&function(e,t){const n=h(e,["displayName"]);void 0!==t&&null!=n&&d(t,["displayName"],n)}(n,t),t}function xr(e){const t={},n=h(e,["name"]);null!=n&&d(t,["_url","name"],n);const r=h(e,["config"]);return null!=r&&function(e,t){const n=h(e,["force"]);void 0!==t&&null!=n&&d(t,["_query","force"],n)}(r,t),t}function Nr(e){const t={},n=h(e,["name"]);null!=n&&d(t,["name"],n);const r=h(e,["metadata"]);null!=r&&d(t,["metadata"],r);const o=h(e,["done"]);null!=o&&d(t,["done"],o);const i=h(e,["error"]);null!=i&&d(t,["error"],i);const s=h(e,["response"]);return null!=s&&d(t,["response"],function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["parent"]);null!=r&&d(t,["parent"],r);const o=h(e,["documentName"]);null!=o&&d(t,["documentName"],o);return t}(s)),t}function Rr(e){const t={},n=h(e,["fileSearchStoreName"]);null!=n&&d(t,["_url","file_search_store_name"],n);const r=h(e,["fileName"]);null!=r&&d(t,["fileName"],r);const o=h(e,["config"]);return null!=o&&function(e,t){const n=h(e,["customMetadata"]);if(void 0!==t&&null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["customMetadata"],e)}const r=h(e,["chunkingConfig"]);void 0!==t&&null!=r&&d(t,["chunkingConfig"],r)}(o,t),t}function Pr(e){const t={},n=h(e,["config"]);return null!=n&&function(e,t){const n=h(e,["pageSize"]);void 0!==t&&null!=n&&d(t,["_query","pageSize"],n);const r=h(e,["pageToken"]);void 0!==t&&null!=r&&d(t,["_query","pageToken"],r)}(n,t),t}function jr(e){const t={},n=h(e,["fileSearchStoreName"]);null!=n&&d(t,["_url","file_search_store_name"],n);const r=h(e,["config"]);return null!=r&&function(e,t){const n=h(e,["mimeType"]);void 0!==t&&null!=n&&d(t,["mimeType"],n);const r=h(e,["displayName"]);void 0!==t&&null!=r&&d(t,["displayName"],r);const o=h(e,["customMetadata"]);if(void 0!==t&&null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["customMetadata"],e)}const i=h(e,["chunkingConfig"]);void 0!==t&&null!=i&&d(t,["chunkingConfig"],i)}(r,t),t}function Dr(e){const t={},n=h(e,["name"]);null!=n&&d(t,["_url","name"],n);const r=h(e,["config"]);return null!=r&&function(e,t){const n=h(e,["force"]);void 0!==t&&null!=n&&d(t,["_query","force"],n)}(r,t),t}function Ur(e){const t={},n=h(e,["parent"]);null!=n&&d(t,["_url","parent"],n);const r=h(e,["config"]);return null!=r&&function(e,t){const n=h(e,["pageSize"]);void 0!==t&&null!=n&&d(t,["_query","pageSize"],n);const r=h(e,["pageToken"]);void 0!==t&&null!=r&&d(t,["_query","pageToken"],r)}(r,t),t}class Mr extends c{constructor(e){super(),this.apiClient=e,this.list=async e=>new Mt(_e.PAGED_ITEM_DOCUMENTS,t=>this.listInternal({parent:e.parent,config:t.config}),await this.listInternal(e),e)}async get(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=h(e,["name"]);return null!=n&&d(t,["_url","name"],n),t}(e);return o=u("{name}",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>e)}}async delete(e){var t,n;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=Dr(e);r=u("{name}",i._url),o=i._query,delete i._url,delete i._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}}async listInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Ur(e);return o=u("{parent}/documents",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);null!=r&&d(t,["nextPageToken"],r);const o=h(e,["documents"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["documents"],e)}return t}(e),n=new Me;return Object.assign(n,t),n})}}}class Lr extends c{constructor(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mr(e);super(),t=this,this.apiClient=e,this.documents=n,this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Mt(_e.PAGED_ITEM_FILE_SEARCH_STORES,e=>t.listInternal(e),await t.listInternal(e),e)}}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=kr(e);return o=u("fileSearchStores",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>e)}}async get(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=h(e,["name"]);return null!=n&&d(t,["_url","name"],n),t}(e);return o=u("{name}",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>e)}}async delete(e){var t,n;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=xr(e);r=u("{name}",i._url),o=i._query,delete i._url,delete i._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}}async listInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Pr(e);return o=u("fileSearchStores",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);null!=r&&d(t,["nextPageToken"],r);const o=h(e,["fileSearchStores"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["fileSearchStores"],e)}return t}(e),n=new Le;return Object.assign(n,t),n})}}async uploadToFileSearchStoreInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=jr(e);return o=u("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);return null!=n&&d(t,["sdkHttpResponse"],n),t}(e),n=new Fe;return Object.assign(n,t),n})}}async importFile(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Rr(e);return o=u("{file_search_store_name}:importFile",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=Nr(e),n=new qe;return Object.assign(n,t),n})}}}function Fr(e,t){const n={},r=h(e,["baseModel"]);null!=r&&d(n,["baseModel"],r);const o=h(e,["preTunedModel"]);null!=o&&d(n,["preTunedModel"],o);const i=h(e,["trainingDataset"]);null!=i&&function(e){const t={};if(void 0!==h(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==h(e,["vertexDatasetResource"]))throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=h(e,["examples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),d(t,["examples","examples"],e)}}(i);const s=h(e,["config"]);return null!=s&&function(e,t){const n={};if(void 0!==h(e,["validationDataset"]))throw new Error("validationDataset parameter is not supported in Gemini API.");const r=h(e,["tunedModelDisplayName"]);if(void 0!==t&&null!=r&&d(t,["displayName"],r),void 0!==h(e,["description"]))throw new Error("description parameter is not supported in Gemini API.");const o=h(e,["epochCount"]);void 0!==t&&null!=o&&d(t,["tuningTask","hyperparameters","epochCount"],o);const i=h(e,["learningRateMultiplier"]);if(null!=i&&d(n,["tuningTask","hyperparameters","learningRateMultiplier"],i),void 0!==h(e,["exportLastCheckpointOnly"]))throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==h(e,["preTunedModelCheckpointId"]))throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==h(e,["adapterSize"]))throw new Error("adapterSize parameter is not supported in Gemini API.");const s=h(e,["batchSize"]);void 0!==t&&null!=s&&d(t,["tuningTask","hyperparameters","batchSize"],s);const a=h(e,["learningRate"]);if(void 0!==t&&null!=a&&d(t,["tuningTask","hyperparameters","learningRate"],a),void 0!==h(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");if(void 0!==h(e,["beta"]))throw new Error("beta parameter is not supported in Gemini API.")}(s,n),n}function qr(e,t){const n={},r=h(e,["baseModel"]);null!=r&&d(n,["baseModel"],r);const o=h(e,["preTunedModel"]);null!=o&&d(n,["preTunedModel"],o);const i=h(e,["trainingDataset"]);null!=i&&function(e,t,n){const r={};let o=h(n,["config","method"]);void 0===o&&(o="SUPERVISED_FINE_TUNING");if("SUPERVISED_FINE_TUNING"===o){const n=h(e,["gcsUri"]);void 0!==t&&null!=n&&d(t,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===o){const n=h(e,["gcsUri"]);void 0!==t&&null!=n&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],n)}let i=h(n,["config","method"]);void 0===i&&(i="SUPERVISED_FINE_TUNING");if("SUPERVISED_FINE_TUNING"===i){const n=h(e,["vertexDatasetResource"]);void 0!==t&&null!=n&&d(t,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===i){const n=h(e,["vertexDatasetResource"]);void 0!==t&&null!=n&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],n)}if(void 0!==h(e,["examples"]))throw new Error("examples parameter is not supported in Vertex AI.")}(i,n,t);const s=h(e,["config"]);return null!=s&&function(e,t,n){let r=h(n,["config","method"]);if(void 0===r&&(r="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===r){const n=h(e,["validationDataset"]);void 0!==t&&null!=n&&d(t,["supervisedTuningSpec"],zr(n))}else if("PREFERENCE_TUNING"===r){const n=h(e,["validationDataset"]);void 0!==t&&null!=n&&d(t,["preferenceOptimizationSpec"],zr(n))}const o=h(e,["tunedModelDisplayName"]);void 0!==t&&null!=o&&d(t,["tunedModelDisplayName"],o);const i=h(e,["description"]);void 0!==t&&null!=i&&d(t,["description"],i);let s=h(n,["config","method"]);if(void 0===s&&(s="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===s){const n=h(e,["epochCount"]);void 0!==t&&null!=n&&d(t,["supervisedTuningSpec","hyperParameters","epochCount"],n)}else if("PREFERENCE_TUNING"===s){const n=h(e,["epochCount"]);void 0!==t&&null!=n&&d(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],n)}let a=h(n,["config","method"]);if(void 0===a&&(a="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===a){const n=h(e,["learningRateMultiplier"]);void 0!==t&&null!=n&&d(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],n)}else if("PREFERENCE_TUNING"===a){const n=h(e,["learningRateMultiplier"]);void 0!==t&&null!=n&&d(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],n)}let l=h(n,["config","method"]);if(void 0===l&&(l="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===l){const n=h(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=n&&d(t,["supervisedTuningSpec","exportLastCheckpointOnly"],n)}else if("PREFERENCE_TUNING"===l){const n=h(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=n&&d(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],n)}let c=h(n,["config","method"]);if(void 0===c&&(c="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===c){const n=h(e,["adapterSize"]);void 0!==t&&null!=n&&d(t,["supervisedTuningSpec","hyperParameters","adapterSize"],n)}else if("PREFERENCE_TUNING"===c){const n=h(e,["adapterSize"]);void 0!==t&&null!=n&&d(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],n)}if(void 0!==h(e,["batchSize"]))throw new Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==h(e,["learningRate"]))throw new Error("learningRate parameter is not supported in Vertex AI.");const u=h(e,["labels"]);void 0!==t&&null!=u&&d(t,["labels"],u);const p=h(e,["beta"]);void 0!==t&&null!=p&&d(t,["preferenceOptimizationSpec","hyperParameters","beta"],p)}(s,n,t),n}function Br(e,t){const n={},r=h(e,["config"]);return null!=r&&function(e,t){const n=h(e,["pageSize"]);void 0!==t&&null!=n&&d(t,["_query","pageSize"],n);const r=h(e,["pageToken"]);void 0!==t&&null!=r&&d(t,["_query","pageToken"],r);const o=h(e,["filter"]);void 0!==t&&null!=o&&d(t,["_query","filter"],o)}(r,n),n}function Gr(e,t){const n={},r=h(e,["config"]);return null!=r&&function(e,t){const n=h(e,["pageSize"]);void 0!==t&&null!=n&&d(t,["_query","pageSize"],n);const r=h(e,["pageToken"]);void 0!==t&&null!=r&&d(t,["_query","pageToken"],r);const o=h(e,["filter"]);void 0!==t&&null!=o&&d(t,["_query","filter"],o)}(r,n),n}function Hr(e,t){const n={},r=h(e,["sdkHttpResponse"]);null!=r&&d(n,["sdkHttpResponse"],r);const o=h(e,["name"]);null!=o&&d(n,["name"],o);const i=h(e,["state"]);null!=i&&d(n,["state"],mt(i));const s=h(e,["createTime"]);null!=s&&d(n,["createTime"],s);const a=h(e,["tuningTask","startTime"]);null!=a&&d(n,["startTime"],a);const l=h(e,["tuningTask","completeTime"]);null!=l&&d(n,["endTime"],l);const c=h(e,["updateTime"]);null!=c&&d(n,["updateTime"],c);const u=h(e,["description"]);null!=u&&d(n,["description"],u);const p=h(e,["baseModel"]);null!=p&&d(n,["baseModel"],p);const f=h(e,["_self"]);return null!=f&&d(n,["tunedModel"],function(e){const t={},n=h(e,["name"]);null!=n&&d(t,["model"],n);const r=h(e,["name"]);return null!=r&&d(t,["endpoint"],r),t}(f)),n}function Vr(e,t){const n={},r=h(e,["sdkHttpResponse"]);null!=r&&d(n,["sdkHttpResponse"],r);const o=h(e,["name"]);null!=o&&d(n,["name"],o);const i=h(e,["state"]);null!=i&&d(n,["state"],mt(i));const s=h(e,["createTime"]);null!=s&&d(n,["createTime"],s);const a=h(e,["startTime"]);null!=a&&d(n,["startTime"],a);const l=h(e,["endTime"]);null!=l&&d(n,["endTime"],l);const c=h(e,["updateTime"]);null!=c&&d(n,["updateTime"],c);const u=h(e,["error"]);null!=u&&d(n,["error"],u);const p=h(e,["description"]);null!=p&&d(n,["description"],p);const f=h(e,["baseModel"]);null!=f&&d(n,["baseModel"],f);const m=h(e,["tunedModel"]);null!=m&&d(n,["tunedModel"],m);const g=h(e,["preTunedModel"]);null!=g&&d(n,["preTunedModel"],g);const v=h(e,["supervisedTuningSpec"]);null!=v&&d(n,["supervisedTuningSpec"],v);const y=h(e,["preferenceOptimizationSpec"]);null!=y&&d(n,["preferenceOptimizationSpec"],y);const b=h(e,["tuningDataStats"]);null!=b&&d(n,["tuningDataStats"],b);const _=h(e,["encryptionSpec"]);null!=_&&d(n,["encryptionSpec"],_);const w=h(e,["partnerModelTuningSpec"]);null!=w&&d(n,["partnerModelTuningSpec"],w);const E=h(e,["customBaseModel"]);null!=E&&d(n,["customBaseModel"],E);const S=h(e,["experiment"]);null!=S&&d(n,["experiment"],S);const T=h(e,["labels"]);null!=T&&d(n,["labels"],T);const O=h(e,["outputUri"]);null!=O&&d(n,["outputUri"],O);const I=h(e,["pipelineJob"]);null!=I&&d(n,["pipelineJob"],I);const C=h(e,["serviceAccount"]);null!=C&&d(n,["serviceAccount"],C);const A=h(e,["tunedModelDisplayName"]);null!=A&&d(n,["tunedModelDisplayName"],A);const k=h(e,["veoTuningSpec"]);return null!=k&&d(n,["veoTuningSpec"],k),n}function zr(e,t){const n={},r=h(e,["gcsUri"]);null!=r&&d(n,["validationDatasetUri"],r);const o=h(e,["vertexDatasetResource"]);return null!=o&&d(n,["validationDatasetUri"],o),n}class Jr extends c{constructor(e){var t;super(),t=this,this.apiClient=e,this.get=async e=>await this.getInternal(e),this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Mt(_e.PAGED_ITEM_TUNING_JOBS,e=>t.listInternal(e),await t.listInternal(e),e)},this.tune=async e=>{var t;if(this.apiClient.isVertexAI()){if(e.baseModel.startsWith("projects/")){const n={tunedModelName:e.baseModel};(null===(t=e.config)||void 0===t?void 0:t.preTunedModelCheckpointId)&&(n.checkpointId=e.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},e),{preTunedModel:n});return r.baseModel=void 0,await this.tuneInternal(r)}{const t=Object.assign({},e);return await this.tuneInternal(t)}}{const t=Object.assign({},e),n=await this.tuneMldevInternal(t);let r="";void 0!==n.metadata&&void 0!==n.metadata.tunedModel?r=n.metadata.tunedModel:void 0!==n.name&&n.name.includes("/operations/")&&(r=n.name.split("/operations/")[0]);return{name:r,state:G.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=h(e,["name"]);return null!=n&&d(t,["_url","name"],n),t}(e);return s=u("{name}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>Vr(e))}{const t=function(e){const t={},n=h(e,["name"]);return null!=n&&d(t,["_url","name"],n),t}(e);return s=u("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>Hr(e))}}async listInternal(e){var t,n,r,o;let i,s="",a={};if(this.apiClient.isVertexAI()){const r=Gr(e);return s=u("tuningJobs",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);null!=r&&d(t,["nextPageToken"],r);const o=h(e,["tuningJobs"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>Vr(e))),d(t,["tuningJobs"],e)}return t}(e),n=new je;return Object.assign(n,t),n})}{const t=Br(e);return s=u("tunedModels",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);null!=r&&d(t,["nextPageToken"],r);const o=h(e,["tunedModels"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>Hr(e))),d(t,["tuningJobs"],e)}return t}(e),n=new je;return Object.assign(n,t),n})}}async cancel(e){var t,n,r,o;let i="",s={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=h(e,["name"]);return null!=n&&d(t,["_url","name"],n),t}(e);i=u("{name}:cancel",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}else{const t=function(e){const t={},n=h(e,["name"]);return null!=n&&d(t,["_url","name"],n),t}(e);i=u("{name}:cancel",t._url),s=t._query,delete t._url,delete t._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal})}}async tuneInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const s=qr(e,e);return o=u("tuningJobs",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>Vr(e))}throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Fr(e);return o=u("tunedModels",s._url),i=s._query,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>function(e){const t={},n=h(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const r=h(e,["name"]);null!=r&&d(t,["name"],r);const o=h(e,["metadata"]);null!=o&&d(t,["metadata"],o);const i=h(e,["done"]);null!=i&&d(t,["done"],i);const s=h(e,["error"]);return null!=s&&d(t,["error"],s),t}(e))}}}class Wr{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Kr="x-goog-upload-status";async function Yr(e,t,n){var r,o;let i=0,s=0,a=new we(new Response),l="upload";for(i=e.size;s<i;){const c=Math.min(8388608,i-s),u=e.slice(s,s+c);s+c>=i&&(l+=", finalize");let d=0,h=1e3;for(;d<3&&(a=await n.request({path:"",body:u,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(null===(r=null===a||void 0===a?void 0:a.headers)||void 0===r?void 0:r[Kr]));)d++,await $r(h),h*=2;if(s+=c,"active"!==(null===(o=null===a||void 0===a?void 0:a.headers)||void 0===o?void 0:o[Kr]))break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}function $r(e){return new Promise(t=>setTimeout(t,e))}class Qr{async upload(e,t,n){if("string"===typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e,t,n){var r;const o=await Yr(e,t,n),i=await(null===o||void 0===o?void 0:o.json());if("final"!==(null===(r=null===o||void 0===o?void 0:o.headers)||void 0===r?void 0:r[Kr]))throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}(e,t,n)}async uploadToFileSearchStore(e,t,n){if("string"===typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e,t,n){var r;const o=await Yr(e,t,n),i=await(null===o||void 0===o?void 0:o.json());if("final"!==(null===(r=null===o||void 0===o?void 0:o.headers)||void 0===r?void 0:r[Kr]))throw new Error("Failed to upload file: Upload status is not finalized.");const s=y(i),a=new We;return Object.assign(a,s),a}(e,t,n)}async stat(e){if("string"===typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e){return{size:e.size,type:e.type}}(e)}}class Xr{create(e,t,n){return new Zr(e,t,n)}}class Zr{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.close()}}const eo="x-goog-api-key";class to{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(null===e.get(eo)){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(eo,this.apiKey)}}}class no{constructor(e){var t;if(null==e.apiKey)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!==(t=e.vertexai)&&void 0!==t&&t,this.apiKey=e.apiKey;const n=l(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const r=new to(this.apiKey);this.apiClient=new sr({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:"gl-node/web",uploader:new Qr,downloader:new Wr}),this.models=new Sr(this.apiClient),this.live=new gr(this.apiClient,r,new Xr),this.batches=new Lt(this.apiClient),this.chats=new en(this.models,this.apiClient),this.caches=new Jt(this.apiClient),this.files=new on(this.apiClient),this.operations=new Tr(this.apiClient),this.authTokens=new Ar(this.apiClient),this.tunings=new Jr(this.apiClient),this.fileSearchStores=new Lr(this.apiClient)}}var ro=n(448),oo=n.t(ro,2);const{PostgrestError:io,FunctionsHttpError:so,FunctionsFetchError:ao,FunctionsRelayError:lo,FunctionsError:co,FunctionRegion:uo,SupabaseClient:ho,createClient:po,GoTrueAdminApi:fo,GoTrueClient:mo,AuthAdminApi:go,AuthClient:vo,navigatorLock:yo,NavigatorLockAcquireTimeoutError:bo,lockInternals:_o,processLock:wo,SIGN_OUT_SCOPES:Eo,AuthError:So,AuthApiError:To,AuthUnknownError:Oo,CustomAuthError:Io,AuthSessionMissingError:Co,AuthInvalidTokenResponseError:Ao,AuthInvalidCredentialsError:ko,AuthImplicitGrantRedirectError:xo,AuthPKCEGrantCodeExchangeError:No,AuthRetryableFetchError:Ro,AuthWeakPasswordError:Po,AuthInvalidJwtError:jo,isAuthError:Do,isAuthApiError:Uo,isAuthSessionMissingError:Mo,isAuthImplicitGrantRedirectError:Lo,isAuthRetryableFetchError:Fo,isAuthWeakPasswordError:qo,RealtimePresence:Bo,RealtimeChannel:Go,RealtimeClient:Ho,REALTIME_LISTEN_TYPES:Vo,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:zo,REALTIME_PRESENCE_LISTEN_EVENTS:Jo,REALTIME_SUBSCRIBE_STATES:Wo,REALTIME_CHANNEL_STATES:Ko}=ro||oo,Yo=po("https://vdeipnqyesduiohxvuvu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZkZWlwbnF5ZXNkdWlvaHh2dXZ1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc1MjY5NTEsImV4cCI6MjA4MzEwMjk1MX0.IknEZ-GQvspcppJxLR00ayBDq1DbL0HiUKy9RDb59DU"),$o=async()=>{try{const{data:e,error:t}=await Yo.from("employers").select("*");return t?(console.error("Error fetching employers:",t),[]):e||[]}catch(e){return console.error("Unexpected error fetching employers:",e),[]}},Qo=async()=>{try{const{data:e,error:t}=await Yo.from("employer_contacts").select("*");return t?(console.error("Error fetching employer contacts:",t),[]):e||[]}catch(e){return console.error("Unexpected error fetching employer contacts:",e),[]}},Xo=async()=>{try{const{data:e,error:t}=await Yo.from("supervisor_contacts").select("*");return t?(console.error("Error fetching supervisor contacts:",t),[]):e||[]}catch(e){return console.error("Unexpected error fetching supervisor contacts:",e),[]}};var Zo={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ei=["color","size","strokeWidth","absoluteStrokeWidth","children"];var ti=(e,t)=>{const n=(0,o.forwardRef)((n,i)=>{let{color:s="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:c,children:u}=n,d=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,ei);return(0,o.createElement)("svg",(0,r.A)((0,r.A)({ref:i},Zo),{},{width:a,height:a,stroke:s,strokeWidth:c?24*Number(l)/Number(a):l,className:"lucide lucide-".concat((h=e,h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},d),[...t.map(e=>{let[t,n]=e;return(0,o.createElement)(t,n)}),...(Array.isArray(u)?u:[u])||[]]);var h});return n.displayName="".concat(e),n};const ni=ti("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),ri=ti("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),oi=ti("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ii=ti("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),si=ti("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),ai=ti("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),li=ti("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),ci=ti("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ui=ti("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),di=ti("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),hi=ti("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),pi=ti("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),fi=ti("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),mi=ti("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),gi=ti("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),vi=ti("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),yi=ti("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),bi=ti("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),_i=ti("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),wi=ti("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Ei=n(579);let Si=function(e){return e.EMPLOYER="EMPLOYER",e.SUPERVISOR="SUPERVISOR",e}({}),Ti=function(e){return e.PRESENT="Aanwezig",e.ABSENT="Afwezig",e.SICK="Ziek",e.LATE="Te Laat",e}({});const Oi=[{id:"s1",name:"Lucas de Vries",email:"lucas@student.nl",studentNumber:"2024001"},{id:"s2",name:"Sophie Jansen",email:"sophie@student.nl",studentNumber:"2024002"},{id:"s3",name:"Milan Bakker",email:"milan@student.nl",studentNumber:"2024003"}],Ii=[{id:"e1",companyName:"TechSolutions BV",phoneNumber:"06-12345678"},{id:"e2",companyName:"ZorgCentrum Oost",phoneNumber:"06-87654321"}],Ci=[{id:"ec1",employerId:"e1",name:"Jan Klaassen",email:"jan@techsolutions.nl",accessCode:"12345"},{id:"ec2",employerId:"e2",name:"Els Visser",email:"els@zorg.nl",accessCode:"12345"}],Ai=[{id:"sup1",name:"Mevr. K. Dijkstra",email:"k.dijkstra@school.nl",phoneNumber:"030-1239988",accessCode:"sup1234",assignedStudents:["s1","s3"]},{id:"sup2",name:"Dhr. P. de Jong",email:"p.dejong@school.nl",phoneNumber:"030-5554433",accessCode:"sup1234",assignedStudents:["s2"]}],ki=[{id:"i1",studentId:"s1",employerId:"e1",supervisorId:"sup1",startDate:"2024-02-01",endDate:"2024-06-30",scheduledDays:["Ma","Di"]},{id:"i2",studentId:"s2",employerId:"e2",supervisorId:"sup2",startDate:"2024-02-01",endDate:"2024-06-30",scheduledDays:["Do","Vr"]}],xi=[{id:"a1",internshipId:"i1",date:"2024-05-20",status:Ti.PRESENT},{id:"a2",internshipId:"i1",date:"2024-05-21",status:Ti.SICK,notes:"Griepje"}],Ni=[{id:"m1",internshipId:"i1",senderRole:"SCHOOL",text:"Hoi Jan, hoe gaat het met Lucas?",timestamp:Date.now()-864e5,read:!0}],Ri=()=>{const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZkZWlwbnF5ZXNkdWlvaHh2dXZ1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc1MjY5NTEsImV4cCI6MjA4MzEwMjk1MX0.IknEZ-GQvspcppJxLR00ayBDq1DbL0HiUKy9RDb59DU",REACT_APP_SUPABASE_URL:"https://vdeipnqyesduiohxvuvu.supabase.co"}.REACT_APP_API_KEY||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZkZWlwbnF5ZXNkdWlvaHh2dXZ1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc1MjY5NTEsImV4cCI6MjA4MzEwMjk1MX0.IknEZ-GQvspcppJxLR00ayBDq1DbL0HiUKy9RDb59DU",REACT_APP_SUPABASE_URL:"https://vdeipnqyesduiohxvuvu.supabase.co"}.API_KEY;return e?new no({apiKey:e}):null},Pi=(0,o.createContext)(void 0),ji=e=>{let{children:t}=e;const n=(e,t)=>{try{const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return t}},[r,i]=(0,o.useState)(()=>n("sc_students",Oi)),[s,a]=(0,o.useState)(()=>n("sc_employers",Ii)),[l,c]=(0,o.useState)(()=>n("sc_employer_contacts",Ci)),[u,d]=(0,o.useState)(()=>n("sc_supervisors",Ai)),[h,p]=(0,o.useState)(()=>n("sc_internships",ki)),[f,m]=(0,o.useState)(()=>n("sc_attendance",xi)),[g,v]=(0,o.useState)(()=>n("sc_messages",Ni));(0,o.useEffect)(()=>{(async()=>{try{console.log("\ud83d\udd04 Loading data from Supabase...");if(!await(async()=>{try{const{error:e}=await Yo.from("employers").select("id").limit(1);return e?(console.error("Supabase connection test failed:",e),!1):(console.log("\u2705 Supabase connection successful"),!0)}catch(e){return console.error("Supabase connection test error:",e),!1}})())return void console.warn("\u26a0\ufe0f Supabase not available, using local data");const[e,t,n]=await Promise.all([$o(),Qo(),Xo()]);if(e.length>0){const t=e.map(e=>({id:e.id,companyName:e.company_name,phoneNumber:e.phone_number||""}));a(t),console.log("\u2705 Loaded ".concat(t.length," employers from Supabase"))}if(t.length>0){const e=t.map(e=>({id:e.id,employerId:e.employer_id,name:e.name,email:e.email,accessCode:e.access_code,assignedInternships:e.assigned_internships||[]}));c(e),console.log("\u2705 Loaded ".concat(e.length," employer contacts from Supabase"))}if(n.length>0){const e=n.map(e=>({id:e.id,name:e.name,email:e.email,phoneNumber:e.phone_number||"",accessCode:e.access_code,assignedStudents:e.assigned_students||[]}));d(e),console.log("\u2705 Loaded ".concat(e.length," supervisors from Supabase"))}}catch(e){console.error("\u274c Error loading Supabase data:",e)}})()},[]),(0,o.useEffect)(()=>{localStorage.setItem("sc_students",JSON.stringify(r))},[r]),(0,o.useEffect)(()=>{localStorage.setItem("sc_employers",JSON.stringify(s))},[s]),(0,o.useEffect)(()=>{localStorage.setItem("sc_supervisors",JSON.stringify(u))},[u]),(0,o.useEffect)(()=>{localStorage.setItem("sc_internships",JSON.stringify(h))},[h]),(0,o.useEffect)(()=>{localStorage.setItem("sc_attendance",JSON.stringify(f))},[f]),(0,o.useEffect)(()=>{localStorage.setItem("sc_messages",JSON.stringify(g))},[g]);return(0,Ei.jsx)(Pi.Provider,{value:{students:r,employers:s,employerContacts:l,supervisors:u,internships:h,attendance:f,messages:g,addStudent:e=>i(t=>[...t,e]),removeStudent:e=>i(t=>t.filter(t=>t.id!==e)),addEmployer:e=>a(t=>[...t,e]),removeEmployer:e=>a(t=>t.filter(t=>t.id!==e)),addSupervisor:e=>d(t=>[...t,e]),removeSupervisor:e=>d(t=>t.filter(t=>t.id!==e)),addInternship:e=>p(t=>[...t,e]),removeInternship:e=>p(t=>t.filter(t=>t.id!==e)),addAttendanceRecord:e=>{m(t=>{const n=t.findIndex(t=>t.internshipId===e.internshipId&&t.date===e.date);if(n>=0){const r=[...t];return r[n]=e,r}return[...t,e]})},sendMessage:(e,t,n)=>{v(r=>[...r,{id:"msg_".concat(Date.now()),internshipId:e,text:t,senderRole:n,timestamp:Date.now(),read:!1}])},getInternshipByEmployer:e=>h.filter(t=>t.employerId===e),getInternshipStudent:e=>{const t=h.find(t=>t.id===e);return t?r.find(e=>e.id===t.studentId):void 0},getInternshipSupervisor:e=>{const t=h.find(t=>t.id===e);return t?u.find(e=>e.id===t.supervisorId):void 0},getAttendanceForInternship:e=>f.filter(t=>t.internshipId===e).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),getMessagesForInternship:e=>g.filter(t=>t.internshipId===e).sort((e,t)=>e.timestamp-t.timestamp)},children:t})},Di=()=>{const e=(0,o.useContext)(Pi);if(!e)throw new Error("useApp must be used within an AppProvider");return e},Ui=e=>{let{className:t="h-12",showText:n=!0}=e;const[r,i]=(0,o.useState)(!1);return(0,Ei.jsxs)("div",{className:"flex items-center gap-3 select-none ".concat(t),children:[r?(0,Ei.jsx)("div",{className:"h-full aspect-square bg-blue-50 rounded-lg flex items-center justify-center border border-blue-100",children:(0,Ei.jsx)(ni,{className:"text-[#009FE3] w-3/4 h-3/4"})}):(0,Ei.jsx)("img",{src:"/logo.png",alt:"Logo",className:"h-full w-auto object-contain",onError:()=>i(!0)}),n&&r&&(0,Ei.jsxs)("div",{className:"flex flex-col justify-center h-full -ml-1",children:[(0,Ei.jsx)("span",{className:"text-[#78BE20] text-[0.55em]",children:"Groene Hart"}),(0,Ei.jsx)("span",{className:"text-[#009FE3] font-bold text-[1.2em]",children:"Pro College"})]})]})},Mi=e=>{var t,n;let{onLogout:r,loggedInEmployerId:i}=e;const{employers:s,employerContacts:a,internships:l,students:c,getInternshipStudent:u,getInternshipSupervisor:d,addAttendanceRecord:h,getAttendanceForInternship:p,getMessagesForInternship:f,sendMessage:m}=Di(),g=a.find(e=>e.id===i),v=(g&&s.find(e=>e.id===g.employerId),(null===g||void 0===g?void 0:g.assignedInternships)||[]),y=l.filter(e=>v.includes(e.id)),[b,_]=(0,o.useState)((null===(t=y[0])||void 0===t?void 0:t.id)||null),[w,E]=(0,o.useState)("schedule"),[S,T]=(0,o.useState)(0),[O,I]=(0,o.useState)(null),[C,A]=(0,o.useState)(!1),[k,x]=(0,o.useState)(""),[N,R]=(0,o.useState)(!1),[P,j]=(0,o.useState)("15"),[D,U]=(0,o.useState)(null),M=(0,o.useRef)(null),L=(0,o.useMemo)(()=>getInternshipByEmployer(selectedEmployerId),[selectedEmployerId,getInternshipByEmployer]),F=s.find(e=>e.id===selectedEmployerId),q=L.find(e=>e.id===b),B=b?u(b):null,G=b?d(b):null,H=b?p(b):[],V=b?f(b):[];(0,o.useEffect)(()=>{(()=>{var e;null===(e=M.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()},[V,w]);const z=(()=>{const e=new Date,t=e.getDay(),n=e.getDate()-t+(0===t?-6:1),r=new Date(e.setDate(n));r.setDate(r.getDate()+7*S);const o=[];for(let i=0;i<5;i++){const e=new Date(r);e.setDate(r.getDate()+i),o.push(e)}return o})(),J=e=>!(null===q||void 0===q||!q.scheduledDays)&&q.scheduledDays.includes((e=>({1:"Ma",2:"Di",3:"Wo",4:"Do",5:"Vr"}[e.getDay()]))(e)),W=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!b)return;const r=e.toISOString().split("T")[0],o={id:"att_".concat(Date.now(),"_").concat(Math.random()),internshipId:b,date:r,status:t,minutesLate:t===Ti.LATE?n:void 0};h(o),t===Ti.SICK?m(b,"\u26a0\ufe0f MELDING: ".concat(null===B||void 0===B?void 0:B.name," is ziek gemeld op ").concat(e.toLocaleDateString("nl-NL"),"."),"EMPLOYER"):t===Ti.ABSENT?m(b,"\u26a0\ufe0f MELDING: ".concat(null===B||void 0===B?void 0:B.name," is afwezig gemeld op ").concat(e.toLocaleDateString("nl-NL"),"."),"EMPLOYER"):t===Ti.LATE&&m(b,"\u26a0\ufe0f MELDING: ".concat(null===B||void 0===B?void 0:B.name," is ").concat(n," minuten te laat op ").concat(e.toLocaleDateString("nl-NL"),"."),"EMPLOYER")},K=(e,t)=>{if(t===Ti.LATE)return U(e),j("15"),void R(!0);W(e,t)};return b?(0,Ei.jsxs)("div",{className:"flex flex-col h-full bg-slate-50 relative",children:[(0,Ei.jsxs)("div",{className:"bg-[#009FE3] text-white px-6 pt-12 pb-16 rounded-b-[40px] shadow-lg relative z-0",children:[(0,Ei.jsx)("button",{onClick:()=>_(null),className:"absolute top-12 left-4 p-2 text-white/80 hover:text-white transition",children:(0,Ei.jsx)(ii,{size:28})}),(0,Ei.jsxs)("div",{className:"text-center",children:[(0,Ei.jsx)("h2",{className:"text-2xl font-bold",children:null===B||void 0===B?void 0:B.name}),(0,Ei.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-1 opacity-90",children:[(0,Ei.jsx)(si,{size:14}),(0,Ei.jsx)("p",{className:"text-blue-100 text-sm",children:null!==q&&void 0!==q&&null!==(n=q.scheduledDays)&&void 0!==n&&n.length?q.scheduledDays.join(", "):"Geen dagen ingesteld"})]})]}),G&&"chat"!==w&&(0,Ei.jsxs)("div",{className:"absolute -bottom-8 left-6 right-6 bg-white rounded-xl shadow-md p-3 flex items-center justify-between",children:[(0,Ei.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ei.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-50 flex items-center justify-center text-[#009FE3]",children:(0,Ei.jsx)(oi,{size:18})}),(0,Ei.jsxs)("div",{children:[(0,Ei.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Begeleider"}),(0,Ei.jsx)("p",{className:"text-sm font-bold text-slate-800 leading-none",children:G.name})]})]}),(0,Ei.jsxs)("div",{className:"flex gap-2",children:[(0,Ei.jsx)("button",{onClick:()=>E("chat"),className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 hover:bg-blue-200 transition",children:(0,Ei.jsx)(ai,{size:18})}),(0,Ei.jsx)("a",{href:"tel:".concat(G.phoneNumber),className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center text-green-600 hover:bg-green-200 transition",children:(0,Ei.jsx)(li,{size:18})})]})]})]}),(0,Ei.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 no-scrollbar ".concat("chat"===w?"pt-4 pb-24":"pt-12 pb-24"),children:["schedule"===w&&(0,Ei.jsxs)("div",{className:"animate-slide-up",children:[(0,Ei.jsxs)("div",{className:"flex items-center justify-between mb-6 bg-white p-2 rounded-xl shadow-sm",children:[(0,Ei.jsx)("button",{onClick:()=>T(e=>e-1),className:"p-2 text-slate-400 hover:text-[#009FE3] transition",children:(0,Ei.jsx)(ii,{size:20})}),(0,Ei.jsxs)("div",{className:"text-center",children:[(0,Ei.jsxs)("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider",children:["Week ",z[0].toLocaleDateString("nl-NL",{week:"numeric"})]}),(0,Ei.jsxs)("p",{className:"text-sm font-semibold text-slate-700",children:[z[0].toLocaleDateString("nl-NL",{day:"numeric",month:"short"})," - ",z[4].toLocaleDateString("nl-NL",{day:"numeric",month:"short"})]})]}),(0,Ei.jsx)("button",{onClick:()=>T(e=>e+1),className:"p-2 text-slate-400 hover:text-[#009FE3] transition",children:(0,Ei.jsx)(ci,{size:20})})]}),(0,Ei.jsxs)("div",{className:"space-y-4",children:[z.map(e=>{if(!J(e))return null;const t=e.toISOString().split("T")[0],n=(e=>H.find(t=>t.date===e))(t),r=null===n||void 0===n?void 0:n.status,o=(new Date).toISOString().split("T")[0]===t;return(0,Ei.jsxs)("div",{className:"bg-white rounded-2xl p-4 shadow-sm border ".concat(o?"border-[#009FE3] ring-1 ring-[#009FE3]/20":"border-slate-100"),children:[(0,Ei.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Ei.jsx)("div",{children:(0,Ei.jsx)("p",{className:"text-sm font-bold capitalize ".concat(o?"text-[#009FE3]":"text-slate-800"),children:e.toLocaleDateString("nl-NL",{weekday:"long",day:"numeric",month:"long"})})}),r&&(0,Ei.jsxs)("span",{className:"text-xs px-2 py-1 rounded font-bold flex items-center gap-1 ".concat(r===Ti.PRESENT?"bg-green-100 text-green-700":""," ").concat(r===Ti.SICK?"bg-orange-100 text-orange-700":""," ").concat(r===Ti.ABSENT?"bg-red-100 text-red-700":""," ").concat(r===Ti.LATE?"bg-yellow-100 text-yellow-700":""),children:[r,r===Ti.LATE&&null!==n&&void 0!==n&&n.minutesLate?" (".concat(n.minutesLate,"m)"):""]})]}),(0,Ei.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,Ei.jsxs)("button",{onClick:()=>K(e,Ti.PRESENT),className:"p-2 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 ".concat(r===Ti.PRESENT?"bg-green-500 text-white shadow-md":"bg-slate-50 text-slate-400 hover:bg-green-50 hover:text-green-500"),children:[(0,Ei.jsx)(ui,{size:20,className:"mb-1"}),(0,Ei.jsx)("span",{className:"text-[10px] font-bold",children:"Aanw."})]}),(0,Ei.jsxs)("button",{onClick:()=>K(e,Ti.SICK),className:"p-2 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 ".concat(r===Ti.SICK?"bg-orange-500 text-white shadow-md":"bg-slate-50 text-slate-400 hover:bg-orange-50 hover:text-orange-500"),children:[(0,Ei.jsx)(di,{size:20,className:"mb-1"}),(0,Ei.jsx)("span",{className:"text-[10px] font-bold",children:"Ziek"})]}),(0,Ei.jsxs)("button",{onClick:()=>K(e,Ti.LATE),className:"p-2 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 ".concat(r===Ti.LATE?"bg-yellow-500 text-white shadow-md":"bg-slate-50 text-slate-400 hover:bg-yellow-50 hover:text-yellow-500"),children:[(0,Ei.jsx)(hi,{size:20,className:"mb-1"}),(0,Ei.jsx)("span",{className:"text-[10px] font-bold",children:"Te laat"})]}),(0,Ei.jsxs)("button",{onClick:()=>K(e,Ti.ABSENT),className:"p-2 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 ".concat(r===Ti.ABSENT?"bg-red-500 text-white shadow-md":"bg-slate-50 text-slate-400 hover:bg-red-50 hover:text-red-500"),children:[(0,Ei.jsx)(pi,{size:20,className:"mb-1"}),(0,Ei.jsx)("span",{className:"text-[10px] font-bold",children:"Afw."})]})]})]},t)}),z.every(e=>!J(e))&&(0,Ei.jsx)("div",{className:"text-center p-8 text-slate-400 bg-white rounded-2xl border border-dashed border-slate-200",children:"Geen stagedagen in deze week."})]})]}),"history"===w&&(0,Ei.jsxs)("div",{className:"animate-slide-up",children:[(0,Ei.jsxs)("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2 no-scrollbar",children:[(0,Ei.jsxs)("button",{onClick:async()=>{if(!B||!q)return;A(!0);const e=s.find(e=>e.id===selectedEmployerId),t=await(async(e,t,n)=>{const r=Ri();if(!r)return"AI configuratie ontbreekt (API Key).";const o="Schrijf een voortgangsrapportage voor leerling ".concat(e.name," bij ").concat(t.companyName,". Totaal dagen: ").concat(n.length,".");try{return(await r.models.generateContent({model:"gemini-2.5-flash",contents:o})).text||"Geen rapport."}catch(i){return"Fout bij genereren."}})(B,e,H);I(t),A(!1)},disabled:C,className:"flex-shrink-0 bg-indigo-600 text-white px-4 py-2.5 rounded-xl font-medium text-sm flex items-center gap-2 shadow-lg shadow-indigo-200 active:scale-95 transition",children:[C?(0,Ei.jsx)(fi,{className:"animate-spin",size:16}):(0,Ei.jsx)(fi,{size:16})," Genereer Rapport"]}),(0,Ei.jsxs)("button",{onClick:async()=>{if(!B||!H.length)return;A(!0);const e=H[0],t=await(async(e,t)=>{const n=Ri();if(!n)return"AI configuratie ontbreekt.";const r="Schrijf een mail aan ".concat(e.name," over afwezigheid op ").concat(t.date," (").concat(t.status,").");try{return(await n.models.generateContent({model:"gemini-2.5-flash",contents:r})).text||"Geen email."}catch(o){return"Fout bij genereren."}})(B,e);I(t),A(!1)},disabled:C,className:"flex-shrink-0 bg-white border border-slate-200 text-slate-700 px-4 py-2.5 rounded-xl font-medium text-sm flex items-center gap-2 active:scale-95 transition",children:[(0,Ei.jsx)(mi,{size:16})," Email Concept"]})]}),O&&(0,Ei.jsxs)("div",{className:"bg-white border-l-4 border-indigo-500 p-4 rounded-r-xl shadow-sm mb-6 animate-slide-up",children:[(0,Ei.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Ei.jsxs)("h4",{className:"font-bold text-indigo-900 flex items-center gap-2",children:[(0,Ei.jsx)(fi,{size:14,className:"text-indigo-500"})," AI Assistent"]}),(0,Ei.jsx)("button",{onClick:()=>I(null),className:"text-slate-400",children:(0,Ei.jsx)(pi,{size:18})})]}),(0,Ei.jsx)("p",{className:"text-slate-600 text-sm leading-relaxed",children:O})]}),(0,Ei.jsx)("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden border border-slate-100",children:0===H.length?(0,Ei.jsx)("div",{className:"p-8 text-center text-slate-400",children:"Geen geschiedenis"}):(0,Ei.jsx)("div",{className:"divide-y divide-slate-50",children:H.map(e=>(0,Ei.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,Ei.jsxs)("div",{children:[(0,Ei.jsx)("p",{className:"font-bold text-slate-700",children:new Date(e.date).toLocaleDateString("nl-NL",{day:"numeric",month:"long"})}),(0,Ei.jsx)("p",{className:"text-xs text-slate-400 capitalize",children:new Date(e.date).toLocaleDateString("nl-NL",{weekday:"long"})})]}),(0,Ei.jsxs)("span",{className:"px-3 py-1.5 rounded-lg text-xs font-bold flex items-center gap-1 ".concat(e.status===Ti.PRESENT?"bg-green-100 text-green-700":""," ").concat(e.status===Ti.SICK?"bg-orange-100 text-orange-700":""," ").concat(e.status===Ti.ABSENT?"bg-red-100 text-red-700":""," ").concat(e.status===Ti.LATE?"bg-yellow-100 text-yellow-700":""),children:[e.status,e.status===Ti.LATE&&e.minutesLate?" (".concat(e.minutesLate,"m)"):""]})]},e.id))})})]}),"chat"===w&&(0,Ei.jsx)("div",{className:"flex flex-col h-full",children:(0,Ei.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 flex-1 overflow-hidden flex flex-col mb-20",children:[(0,Ei.jsxs)("div",{className:"bg-slate-50 p-3 border-b border-slate-100 flex items-center gap-3",children:[(0,Ei.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-[#009FE3]",children:(0,Ei.jsx)(oi,{size:20})}),(0,Ei.jsxs)("div",{children:[(0,Ei.jsx)("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Begeleider"}),(0,Ei.jsx)("p",{className:"font-bold text-slate-800 text-sm",children:(null===G||void 0===G?void 0:G.name)||"School"})]})]}),(0,Ei.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-[#f0f4f8]",children:[0===V.length&&(0,Ei.jsx)("div",{className:"text-center text-slate-400 text-xs mt-4",children:"Begin een gesprek met de begeleider."}),V.map(e=>{const t="EMPLOYER"===e.senderRole;return(0,Ei.jsx)("div",{className:"flex ".concat(t?"justify-end":"justify-start"),children:(0,Ei.jsxs)("div",{className:"max-w-[80%] p-3 rounded-2xl text-sm shadow-sm ".concat(t?"bg-[#009FE3] text-white rounded-tr-none":"bg-white text-slate-700 rounded-tl-none"),children:[(0,Ei.jsx)("p",{children:e.text}),(0,Ei.jsx)("span",{className:"text-[10px] block mt-1 ".concat(t?"text-blue-100":"text-slate-400"),children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},e.id)}),(0,Ei.jsx)("div",{ref:M})]}),(0,Ei.jsx)("div",{className:"p-3 bg-white border-t border-slate-100",children:(0,Ei.jsxs)("form",{onSubmit:e=>{e.preventDefault(),k.trim()&&b&&(m(b,k,"EMPLOYER"),x(""))},className:"flex gap-2",children:[(0,Ei.jsx)("input",{value:k,onChange:e=>x(e.target.value),placeholder:"Typ een bericht...",className:"flex-1 bg-slate-100 border-none rounded-full px-4 py-2 text-sm focus:ring-2 focus:ring-[#009FE3]"}),(0,Ei.jsx)("button",{type:"submit",disabled:!k.trim(),className:"bg-[#009FE3] text-white p-2 rounded-full hover:bg-blue-600 disabled:opacity-50 transition-colors",children:(0,Ei.jsx)(gi,{size:18})})]})})]})})]}),(0,Ei.jsx)("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t border-slate-100 pb-safe-bottom z-20",children:(0,Ei.jsxs)("div",{className:"flex justify-around items-center p-2 safe-area-bottom",children:[(0,Ei.jsxs)("button",{onClick:()=>E("schedule"),className:"flex flex-col items-center p-3 rounded-xl flex-1 transition-colors ".concat("schedule"===w?"text-[#009FE3]":"text-slate-400 hover:text-slate-600"),children:[(0,Ei.jsx)(vi,{size:24,strokeWidth:"schedule"===w?2.5:2}),(0,Ei.jsx)("span",{className:"text-[10px] font-bold mt-1",children:"Rooster"})]}),(0,Ei.jsx)("div",{className:"w-px h-8 bg-slate-100"}),(0,Ei.jsxs)("button",{onClick:()=>E("history"),className:"flex flex-col items-center p-3 rounded-xl flex-1 transition-colors ".concat("history"===w?"text-[#009FE3]":"text-slate-400 hover:text-slate-600"),children:[(0,Ei.jsx)(yi,{size:24,strokeWidth:"history"===w?2.5:2}),(0,Ei.jsx)("span",{className:"text-[10px] font-bold mt-1",children:"Historie"})]}),(0,Ei.jsx)("div",{className:"w-px h-8 bg-slate-100"}),(0,Ei.jsxs)("button",{onClick:()=>E("chat"),className:"flex flex-col items-center p-3 rounded-xl flex-1 transition-colors ".concat("chat"===w?"text-[#009FE3]":"text-slate-400 hover:text-slate-600"),children:[(0,Ei.jsx)(ai,{size:24,strokeWidth:"chat"===w?2.5:2}),(0,Ei.jsx)("span",{className:"text-[10px] font-bold mt-1",children:"Chat"})]})]})}),N&&(0,Ei.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center px-4 animate-fade-in",children:(0,Ei.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-sm animate-scale-in",children:[(0,Ei.jsxs)("div",{className:"text-center mb-4",children:[(0,Ei.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-3 text-yellow-600",children:(0,Ei.jsx)(hi,{size:24})}),(0,Ei.jsx)("h3",{className:"text-lg font-bold text-slate-800",children:"Te laat melding"}),(0,Ei.jsx)("p",{className:"text-sm text-slate-500",children:"Hoeveel minuten is de stagiair te laat?"})]}),(0,Ei.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),D){const e=parseInt(P)||0;W(D,Ti.LATE,e),R(!1),U(null)}},children:[(0,Ei.jsxs)("div",{className:"flex items-center justify-center mb-6",children:[(0,Ei.jsx)("input",{type:"number",min:"1",max:"480",autoFocus:!0,required:!0,value:P,onChange:e=>j(e.target.value),className:"text-center text-3xl font-bold w-24 border-b-2 border-[#009FE3] focus:outline-none text-slate-800 pb-1"}),(0,Ei.jsx)("span",{className:"text-slate-400 ml-2 font-medium",children:"minuten"})]}),(0,Ei.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Ei.jsx)("button",{type:"button",onClick:()=>R(!1),className:"w-full py-3 rounded-xl border border-slate-200 text-slate-600 font-medium hover:bg-slate-50 transition",children:"Annuleren"}),(0,Ei.jsx)("button",{type:"submit",className:"w-full py-3 rounded-xl bg-[#009FE3] text-white font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-200",children:"Opslaan"})]})]})]})})]}):(0,Ei.jsxs)("div",{className:"flex flex-col h-full bg-slate-50",children:[(0,Ei.jsxs)("div",{className:"bg-white px-6 pt-12 pb-6 rounded-b-[32px] shadow-sm z-10",children:[(0,Ei.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,Ei.jsxs)("div",{children:[(0,Ei.jsx)("h1",{className:"text-2xl font-bold text-slate-800",children:"Goedemorgen,"}),(0,Ei.jsx)("h2",{className:"text-lg font-medium text-slate-500",children:null===F||void 0===F?void 0:F.contactPerson}),(0,Ei.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:null===F||void 0===F?void 0:F.companyName})]}),(0,Ei.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,Ei.jsx)(Ui,{className:"h-10",showText:!1}),(0,Ei.jsxs)("button",{onClick:r,className:"text-xs font-medium text-slate-400 flex items-center gap-1 hover:text-red-500 transition-colors",children:[(0,Ei.jsx)(ri,{size:14})," Uitloggen"]})]})]}),(0,Ei.jsxs)("div",{className:"relative",children:[(0,Ei.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Ei.jsx)(oi,{size:18,className:"text-slate-400"})}),(0,Ei.jsx)("input",{disabled:!0,placeholder:"Zoek stagiair...",className:"w-full bg-slate-100 text-sm rounded-xl py-3 pl-10 pr-4 border-none text-slate-600 placeholder-slate-400 focus:ring-2 focus:ring-emerald-500"})]})]}),(0,Ei.jsxs)("div",{className:"flex-1 p-6 overflow-y-auto",children:[(0,Ei.jsx)("h2",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-4",children:"Mijn Stagiairs"}),(0,Ei.jsx)("div",{className:"space-y-3",children:0===L.length?(0,Ei.jsx)("div",{className:"p-8 text-center text-slate-400 bg-white rounded-2xl border border-slate-100 border-dashed",children:"Geen stagiairs gekoppeld."}):L.map(e=>{const t=u(e.id);return t?(0,Ei.jsxs)("button",{onClick:()=>_(e.id),className:"w-full bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4 active:scale-95 transition-transform duration-200",children:[(0,Ei.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-emerald-100 to-teal-50 rounded-full flex items-center justify-center text-emerald-600 font-bold text-lg shadow-inner",children:t.name.charAt(0)}),(0,Ei.jsxs)("div",{className:"text-left flex-1",children:[(0,Ei.jsx)("h3",{className:"font-bold text-slate-800 text-lg leading-tight",children:t.name}),(0,Ei.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:[e.startDate," - ",e.endDate]})]}),(0,Ei.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-50 flex items-center justify-center text-slate-300",children:(0,Ei.jsx)(ii,{className:"rotate-180",size:18})})]},e.id):null})})]})]})},Li=e=>{let{onLogout:t,loggedInSupervisorId:n}=e;const{supervisors:r,students:o,internships:i,getAttendanceForInternship:s}=Di(),a=r.find(e=>e.id===n),l=o.filter(e=>{var t;return null===a||void 0===a||null===(t=a.assignedStudents)||void 0===t?void 0:t.includes(e.id)});return a?(0,Ei.jsx)("div",{className:"min-h-screen bg-slate-50 p-6",children:(0,Ei.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,Ei.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,Ei.jsxs)("div",{children:[(0,Ei.jsx)("h1",{className:"text-4xl font-bold text-slate-800",children:"Stagebegeleiding"}),(0,Ei.jsxs)("p",{className:"text-slate-600",children:["Welkom, ",a.name]})]}),(0,Ei.jsxs)("button",{onClick:t,className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg",children:[(0,Ei.jsx)(ri,{size:18})," Uitloggen"]})]}),(0,Ei.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(e=>{const t=i.find(t=>t.studentId===e.id),n=(t?s(t.id):[]).find(e=>e.date===(new Date).toISOString().split("T")[0]);return(0,Ei.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition",children:[(0,Ei.jsx)("h3",{className:"font-bold text-lg text-slate-800",children:e.name}),(0,Ei.jsx)("p",{className:"text-slate-600 text-sm",children:e.email}),(0,Ei.jsxs)("p",{className:"text-slate-600 text-sm",children:["Studentnummer: ",e.studentNumber]}),n?(0,Ei.jsxs)("div",{className:"mt-4 p-3 rounded-lg bg-slate-50",children:[(0,Ei.jsx)("p",{className:"text-sm text-slate-600",children:"Vandaag:"}),(0,Ei.jsx)("p",{className:"font-semibold ".concat("Aanwezig"===n.status?"text-green-600":"Afwezig"===n.status?"text-red-600":"Ziek"===n.status?"text-orange-600":"text-yellow-600"),children:n.status})]}):(0,Ei.jsx)("div",{className:"mt-4 p-3 rounded-lg bg-slate-50",children:(0,Ei.jsx)("p",{className:"text-sm text-slate-600",children:"Geen aanwezigheid geregistreerd vandaag"})})]},e.id)})}),0===l.length&&(0,Ei.jsx)("div",{className:"text-center py-12",children:(0,Ei.jsx)("p",{className:"text-slate-600 text-lg",children:"Je hebt nog geen leerlingen toegewezen gekregen."})})]})}):(0,Ei.jsx)("div",{children:"Supervisor niet gevonden"})},Fi=()=>{const{employers:e,employerContacts:t,supervisors:n}=Di(),[i,s]=(0,o.useState)(null),[a,l]=(0,o.useState)({open:!1,role:null,email:"",pass:"",empId:"",error:""}),[c,u]=(0,o.useState)(null);(0,o.useEffect)(()=>{const e=localStorage.getItem("stageconnect_session");if(e)try{const t=JSON.parse(e);t.role===Si.EMPLOYER&&t.empId?(s(Si.EMPLOYER),u(t.empId)):t.role===Si.SUPERVISOR&&t.supId&&(s(Si.SUPERVISOR),u(t.supId))}catch(t){console.error("Error restoring session",t)}},[]);const d=()=>{s(null),u(null),localStorage.removeItem("stageconnect_session")};return i===Si.EMPLOYER?(0,Ei.jsx)(Mi,{onLogout:d,loggedInEmployerId:c}):i===Si.SUPERVISOR?(0,Ei.jsx)(Li,{onLogout:d,loggedInSupervisorId:c}):(0,Ei.jsxs)("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[(0,Ei.jsx)("div",{className:"absolute top-0 left-0 w-full h-64 bg-[#009FE3] rounded-b-[40px] z-0"}),(0,Ei.jsxs)("div",{className:"relative z-10 w-full max-w-md",children:[(0,Ei.jsx)("div",{className:"bg-white p-4 rounded-2xl shadow-xl w-max mx-auto mb-8",children:(0,Ei.jsx)(Ui,{showText:!1,className:"h-16"})}),(0,Ei.jsxs)("div",{className:"text-center text-white mb-8",children:[(0,Ei.jsx)("h1",{className:"text-3xl font-bold",children:"StageConnect"}),(0,Ei.jsx)("p",{children:"Groene Hart Pro College"})]}),(0,Ei.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-6 space-y-4",children:[(0,Ei.jsx)("h2",{className:"text-center font-bold text-slate-800",children:"Inloggen"}),(0,Ei.jsxs)("button",{onClick:()=>l({open:!0,role:Si.EMPLOYER,email:"",pass:"",empId:"",error:""}),className:"w-full p-4 border rounded-xl flex items-center gap-4 hover:bg-slate-50",children:[(0,Ei.jsx)("div",{className:"bg-green-100 text-green-600 p-3 rounded-xl",children:(0,Ei.jsx)(bi,{})}),(0,Ei.jsx)("div",{className:"text-left flex-1",children:(0,Ei.jsx)("h3",{className:"font-bold",children:"Werkgever"})}),(0,Ei.jsx)(ci,{className:"text-slate-300"})]}),(0,Ei.jsxs)("button",{onClick:()=>l({open:!0,role:Si.SUPERVISOR,email:"",pass:"",empId:"",error:""}),className:"w-full p-4 border rounded-xl flex items-center gap-4 hover:bg-slate-50",children:[(0,Ei.jsx)("div",{className:"bg-purple-100 text-purple-600 p-3 rounded-xl",children:(0,Ei.jsx)(_i,{})}),(0,Ei.jsx)("div",{className:"text-left flex-1",children:(0,Ei.jsx)("h3",{className:"font-bold",children:"Stagebegeleider"})}),(0,Ei.jsx)(ci,{className:"text-slate-300"})]})]})]}),a.open&&(0,Ei.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ei.jsxs)("div",{className:"bg-white p-6 rounded-2xl w-full max-w-sm",children:[(0,Ei.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,Ei.jsxs)("h3",{className:"font-bold",children:["Inloggen ",a.role]}),(0,Ei.jsx)("button",{onClick:()=>l((0,r.A)((0,r.A)({},a),{},{open:!1})),children:(0,Ei.jsx)(wi,{})})]}),(0,Ei.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),a.role===Si.EMPLOYER){const e=t.find(e=>e.email===a.email);e&&e.accessCode===a.pass?(u(e.id),s(Si.EMPLOYER),localStorage.setItem("stageconnect_session",JSON.stringify({role:Si.EMPLOYER,empId:e.id})),l({open:!1,role:null,email:"",pass:"",empId:"",error:""})):l((0,r.A)((0,r.A)({},a),{},{error:"Fout"}))}else if(a.role===Si.SUPERVISOR){const e=n.find(e=>e.email===a.email);e&&e.accessCode===a.pass?(u(e.id),s(Si.SUPERVISOR),localStorage.setItem("stageconnect_session",JSON.stringify({role:Si.SUPERVISOR,supId:e.id})),l({open:!1,role:null,email:"",pass:"",empId:"",error:""})):l((0,r.A)((0,r.A)({},a),{},{error:"Fout"}))}else l((0,r.A)((0,r.A)({},a),{},{error:"Fout"}))},className:"space-y-4",children:[a.role===Si.EMPLOYER&&(0,Ei.jsxs)(Ei.Fragment,{children:[(0,Ei.jsx)("input",{type:"email",placeholder:"Email",className:"w-full border p-3 rounded-xl",value:a.email,onChange:e=>l((0,r.A)((0,r.A)({},a),{},{email:e.target.value}))}),(0,Ei.jsx)("input",{type:"password",placeholder:"Wachtwoord",className:"w-full border p-3 rounded-xl",value:a.pass,onChange:e=>l((0,r.A)((0,r.A)({},a),{},{pass:e.target.value}))})]}),a.role===Si.SUPERVISOR&&(0,Ei.jsxs)(Ei.Fragment,{children:[(0,Ei.jsx)("input",{type:"email",placeholder:"Email",className:"w-full border p-3 rounded-xl",value:a.email,onChange:e=>l((0,r.A)((0,r.A)({},a),{},{email:e.target.value}))}),(0,Ei.jsx)("input",{type:"password",placeholder:"Wachtwoord",className:"w-full border p-3 rounded-xl",value:a.pass,onChange:e=>l((0,r.A)((0,r.A)({},a),{},{pass:e.target.value}))})]}),a.error&&(0,Ei.jsx)("p",{className:"text-red-500 text-sm",children:a.error}),(0,Ei.jsx)("button",{type:"submit",className:"w-full bg-[#009FE3] text-white p-3 rounded-xl font-bold",children:"Inloggen"})]})]})})]})};i.createRoot(document.getElementById("root")).render((0,Ei.jsx)(o.StrictMode,{children:(0,Ei.jsx)(ji,{children:(0,Ei.jsx)(Fi,{})})}))})();
//# sourceMappingURL=main.ca64dd65.js.map